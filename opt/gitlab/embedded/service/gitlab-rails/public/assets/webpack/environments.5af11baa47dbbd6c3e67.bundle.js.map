{"version":3,"sources":["webpack:///environments.5af11baa47dbbd6c3e67.bundle.js","webpack:///./environments/components/environment_item.js?dea3","webpack:///./environments/components/environment_external_url.js?0214","webpack:///./environments/components/environment_rollback.js?15a5","webpack:///./environments/components/environment_terminal_button.js?43f8","webpack:///./environments/components/environment_actions.js?47c0","webpack:////var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_terminal.svg?eef3","webpack:///./environments/environments_bundle.js","webpack:///./environments/components/environments_table.js?8cd6","webpack:///./environments/components/environment_stop.js?9175","webpack:///./environments/services/environments_service.js?a463","webpack:///./environments/components/environment.js","webpack:///./environments/stores/environments_store.js?c3e8"],"names":["webpackJsonp","3qMg","module","exports","__webpack_require__","Vue","Timeago","ActionsComponent","ExternalUrlComponent","StopComponent","RollbackComponent","TerminalButtonComponent","timeagoInstance","component","components","commit-component","gl","CommitComponent","actions-component","external-url-component","stop-component","rollback-component","terminal-button-component","props","model","type","Object","required","default","canCreateDeployment","Boolean","canReadEnvironment","computed","hasLastDeploymentKey","this","last_deployment","$options","isObjectEmpty","hasManualActions","manual_actions","length","hasStopAction","canRetry","deployable","canShowDate","undefined","createdDate","created_at","format","manualActions","map","action","parsedAction","name","text","humanize","play_path","userImageAltDescription","user","username","commitTag","tag","commitRef","ref","commitUrl","commit","commit_path","commitShortSha","short_id","commitTitle","title","commitAuthor","author","retryUrl","retry_path","isLastDeployment","buildName","id","deploymentInternalId","iid","deploymentHasUser","deploymentUser","shouldRenderBuildName","isFolder","buildPath","build_path","externalURL","external_url","shouldRenderDeploymentID","environmentPath","environment_path","folderUrl","window","location","pathname","folderName","object","key","hasOwnProperty","call","template","AhTQ","externalUrl","String","FaWK","Q/iC","terminalIconSvg","terminalPath","data","R8Dz","playIconSvg","actions","Array","WEra","XJ/8","$","EnvironmentsComponent","EnvironmentsListApp","$destroy","el","document","querySelector","jNb8","EnvironmentItem","environment-item","environments","kXVd","stopUrl","pGP2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","i","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","prototype","EnvironmentsService","endpoint","resource","value","get","vm9i","use","EnvironmentTable","EnvironmentsStore","environment-table","table-pagination","VueGlPagination","environmentsData","dataset","store","state","visibility","isLoading","cssContainerClass","cssClass","environmentsDataEndpoint","canCreateEnvironment","projectEnvironmentsPath","projectStoppedEnvironmentsPath","newEnvironmentPath","helpPagePath","paginationInformation","pageNumber","scope","utils","getParameterByName","canReadEnvironmentParsed","convertPermissionToBoolean","canCreateDeploymentParsed","canCreateEnvironmentParsed","created","_this","service","then","resp","headers","body","json","response","storeAvailableCount","available_count","storeStoppedCount","stopped_count","storeEnvironments","setPagination","catch","Flash","methods","toggleRow","toggleFolder","changePage","param","setParamInURL","visitUrl","w+iT","stoppedCounter","availableCounter","arguments","filteredEnvironments","env","filtered","size","assign","latest","pagination","normalizedHeaders","normalizeHeaders","parseIntPagination","count"],"mappings":"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","file":"environments.5af11baa47dbbd6c3e67.bundle.js","sourcesContent":["webpackJsonp([6,25,26],{\n\n/***/ \"3qMg\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Vue = __webpack_require__(\"Eruj\");\nvar Timeago = __webpack_require__(\"j4Jp\");\n\n__webpack_require__(\"A+3H\");\n__webpack_require__(\"zp3R\");\nvar ActionsComponent = __webpack_require__(\"R8Dz\");\nvar ExternalUrlComponent = __webpack_require__(\"AhTQ\");\nvar StopComponent = __webpack_require__(\"kXVd\");\nvar RollbackComponent = __webpack_require__(\"FaWK\");\nvar TerminalButtonComponent = __webpack_require__(\"Q/iC\");\n\n/**\n * Envrionment Item Component\n *\n * Renders a table row for each environment.\n */\n\nvar timeagoInstance = new Timeago();\n\nmodule.exports = Vue.component('environment-item', {\n\n  components: {\n    'commit-component': gl.CommitComponent,\n    'actions-component': ActionsComponent,\n    'external-url-component': ExternalUrlComponent,\n    'stop-component': StopComponent,\n    'rollback-component': RollbackComponent,\n    'terminal-button-component': TerminalButtonComponent\n  },\n\n  props: {\n    model: {\n      type: Object,\n      required: true,\n      default: function _default() {\n        return {};\n      }\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  computed: {\n    /**\n     * Verifies if `last_deployment` key exists in the current Envrionment.\n     * This key is required to render most of the html - this method works has\n     * an helper.\n     *\n     * @returns {Boolean}\n     */\n    hasLastDeploymentKey: function hasLastDeploymentKey() {\n      if (this.model && this.model.last_deployment && !this.$options.isObjectEmpty(this.model.last_deployment)) {\n        return true;\n      }\n      return false;\n    },\n\n\n    /**\n     * Verifies is the given environment has manual actions.\n     * Used to verify if we should render them or nor.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    hasManualActions: function hasManualActions() {\n      return this.model && this.model.last_deployment && this.model.last_deployment.manual_actions && this.model.last_deployment.manual_actions.length > 0;\n    },\n\n\n    /**\n     * Returns the value of the `stop_action?` key provided in the response.\n     *\n     * @returns {Boolean}\n     */\n    hasStopAction: function hasStopAction() {\n      return this.model && this.model['stop_action?'];\n    },\n\n\n    /**\n     * Verifies if the `deployable` key is present in `last_deployment` key.\n     * Used to verify whether we should or not render the rollback partial.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canRetry: function canRetry() {\n      return this.model && this.hasLastDeploymentKey && this.model.last_deployment && this.model.last_deployment.deployable;\n    },\n\n\n    /**\n     * Verifies if the date to be shown is present.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canShowDate: function canShowDate() {\n      return this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable !== undefined;\n    },\n\n\n    /**\n     * Human readable date.\n     *\n     * @returns {String}\n     */\n    createdDate: function createdDate() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.created_at) {\n        return timeagoInstance.format(this.model.last_deployment.deployable.created_at);\n      }\n      return '';\n    },\n\n\n    /**\n     * Returns the manual actions with the name parsed.\n     *\n     * @returns {Array.<Object>|Undefined}\n     */\n    manualActions: function manualActions() {\n      if (this.hasManualActions) {\n        return this.model.last_deployment.manual_actions.map(function (action) {\n          var parsedAction = {\n            name: gl.text.humanize(action.name),\n            play_path: action.play_path\n          };\n          return parsedAction;\n        });\n      }\n      return [];\n    },\n\n\n    /**\n     * Builds the string used in the user image alt attribute.\n     *\n     * @returns {String}\n     */\n    userImageAltDescription: function userImageAltDescription() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.user && this.model.last_deployment.user.username) {\n        return this.model.last_deployment.user.username + '\\'s avatar\\'';\n      }\n      return '';\n    },\n\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTag: function commitTag() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.tag) {\n        return this.model.last_deployment.tag;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit ref.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitRef: function commitRef() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.ref) {\n        return this.model.last_deployment.ref;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit url.\n     *\n     * @returns {String|Undefined}\n     */\n    commitUrl: function commitUrl() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.commit_path) {\n        return this.model.last_deployment.commit.commit_path;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit short sha.\n     *\n     * @returns {String|Undefined}\n     */\n    commitShortSha: function commitShortSha() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.short_id) {\n        return this.model.last_deployment.commit.short_id;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit title.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTitle: function commitTitle() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.title) {\n        return this.model.last_deployment.commit.title;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitAuthor: function commitAuthor() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.commit && this.model.last_deployment.commit.author) {\n        return this.model.last_deployment.commit.author;\n      }\n\n      return undefined;\n    },\n\n\n    /**\n     * Verifies if the `retry_path` key is present and returns its value.\n     *\n     * @returns {String|Undefined}\n     */\n    retryUrl: function retryUrl() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.retry_path) {\n        return this.model.last_deployment.deployable.retry_path;\n      }\n      return undefined;\n    },\n\n\n    /**\n     * Verifies if the `last?` key is present and returns its value.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    isLastDeployment: function isLastDeployment() {\n      return this.model && this.model.last_deployment && this.model.last_deployment['last?'];\n    },\n\n\n    /**\n     * Builds the name of the builds needed to display both the name and the id.\n     *\n     * @returns {String}\n     */\n    buildName: function buildName() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable) {\n        return this.model.last_deployment.deployable.name + ' #' + this.model.last_deployment.deployable.id;\n      }\n      return '';\n    },\n\n\n    /**\n     * Builds the needed string to show the internal id.\n     *\n     * @returns {String}\n     */\n    deploymentInternalId: function deploymentInternalId() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.iid) {\n        return '#' + this.model.last_deployment.iid;\n      }\n      return '';\n    },\n\n\n    /**\n     * Verifies if the user object is present under last_deployment object.\n     *\n     * @returns {Boolean}\n     */\n    deploymentHasUser: function deploymentHasUser() {\n      return this.model && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.user);\n    },\n\n\n    /**\n     * Returns the user object nested with the last_deployment object.\n     * Used to render the template.\n     *\n     * @returns {Object}\n     */\n    deploymentUser: function deploymentUser() {\n      if (this.model && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.user)) {\n        return this.model.last_deployment.user;\n      }\n      return {};\n    },\n\n\n    /**\n     * Verifies if the build name column should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderBuildName: function shouldRenderBuildName() {\n      return !this.model.isFolder && !this.$options.isObjectEmpty(this.model.last_deployment) && !this.$options.isObjectEmpty(this.model.last_deployment.deployable);\n    },\n\n\n    /**\n     * Verifies the presence of all the keys needed to render the buil_path.\n     *\n     * @return {String}\n     */\n    buildPath: function buildPath() {\n      if (this.model && this.model.last_deployment && this.model.last_deployment.deployable && this.model.last_deployment.deployable.build_path) {\n        return this.model.last_deployment.deployable.build_path;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Verifies the presence of all the keys needed to render the external_url.\n     *\n     * @return {String}\n     */\n    externalURL: function externalURL() {\n      if (this.model && this.model.external_url) {\n        return this.model.external_url;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Verifies if deplyment internal ID should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderDeploymentID: function shouldRenderDeploymentID() {\n      return !this.model.isFolder && !this.$options.isObjectEmpty(this.model.last_deployment) && this.model.last_deployment.iid !== undefined;\n    },\n    environmentPath: function environmentPath() {\n      if (this.model && this.model.environment_path) {\n        return this.model.environment_path;\n      }\n\n      return '';\n    },\n\n\n    /**\n     * Constructs folder URL based on the current location and the folder id.\n     *\n     * @return {String}\n     */\n    folderUrl: function folderUrl() {\n      return window.location.pathname + '/folders/' + this.model.folderName;\n    }\n  },\n\n  /**\n   * Helper to verify if certain given object are empty.\n   * Should be replaced by lodash _.isEmpty - https://lodash.com/docs/4.17.2#isEmpty\n   * @param  {Object} object\n   * @returns {Bollean}\n   */\n  isObjectEmpty: function isObjectEmpty(object) {\n    for (var key in object) {\n      // eslint-disable-line\n      if (hasOwnProperty.call(object, key)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n\n  template: '\\n    <tr>\\n      <td>\\n        <a v-if=\"!model.isFolder\"\\n          class=\"environment-name\"\\n          :href=\"environmentPath\">\\n          {{model.name}}\\n        </a>\\n        <a v-else class=\"folder-name\" :href=\"folderUrl\">\\n          <span class=\"folder-icon\">\\n            <i class=\"fa fa-folder\" aria-hidden=\"true\"></i>\\n          </span>\\n\\n          <span>\\n            {{model.folderName}}\\n          </span>\\n\\n          <span class=\"badge\">\\n            {{model.size}}\\n          </span>\\n        </a>\\n      </td>\\n\\n      <td class=\"deployment-column\">\\n        <span v-if=\"shouldRenderDeploymentID\">\\n          {{deploymentInternalId}}\\n        </span>\\n\\n        <span v-if=\"!model.isFolder && deploymentHasUser\">\\n          by\\n          <a :href=\"deploymentUser.web_url\" class=\"js-deploy-user-container\">\\n            <img class=\"avatar has-tooltip s20\"\\n              :src=\"deploymentUser.avatar_url\"\\n              :alt=\"userImageAltDescription\"\\n              :title=\"deploymentUser.username\" />\\n          </a>\\n        </span>\\n      </td>\\n\\n      <td class=\"environments-build-cell\">\\n        <a v-if=\"shouldRenderBuildName\"\\n          class=\"build-link\"\\n          :href=\"buildPath\">\\n          {{buildName}}\\n        </a>\\n      </td>\\n\\n      <td>\\n        <div v-if=\"!model.isFolder && hasLastDeploymentKey\" class=\"js-commit-component\">\\n          <commit-component\\n            :tag=\"commitTag\"\\n            :commit-ref=\"commitRef\"\\n            :commit-url=\"commitUrl\"\\n            :short-sha=\"commitShortSha\"\\n            :title=\"commitTitle\"\\n            :author=\"commitAuthor\"/>\\n        </div>\\n        <p v-if=\"!model.isFolder && !hasLastDeploymentKey\" class=\"commit-title\">\\n          No deployments yet\\n        </p>\\n      </td>\\n\\n      <td>\\n        <span v-if=\"!model.isFolder && canShowDate\"\\n          class=\"environment-created-date-timeago\">\\n          {{createdDate}}\\n        </span>\\n      </td>\\n\\n      <td class=\"environments-actions\">\\n        <div v-if=\"!model.isFolder\" class=\"btn-group pull-right\" role=\"group\">\\n          <actions-component v-if=\"hasManualActions && canCreateDeployment\"\\n            :actions=\"manualActions\"/>\\n\\n          <external-url-component v-if=\"externalURL && canReadEnvironment\"\\n            :external-url=\"externalURL\"/>\\n\\n          <stop-component v-if=\"hasStopAction && canCreateDeployment\"\\n            :stop-url=\"model.stop_path\"/>\\n\\n          <terminal-button-component v-if=\"model && model.terminal_path\"\\n            :terminal-path=\"model.terminal_path\"/>\\n\\n          <rollback-component v-if=\"canRetry && canCreateDeployment\"\\n            :is-last-deployment=\"isLastDeployment\"\\n            :retry-url=\"retryUrl\"/>\\n        </div>\\n      </td>\\n    </tr>\\n  '\n});\n\n/***/ }),\n\n/***/ \"AhTQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Renders the external url link in environments table.\n */\nvar Vue = __webpack_require__(\"Eruj\");\n\nmodule.exports = Vue.component('external-url-component', {\n  props: {\n    externalUrl: {\n      type: String,\n      default: ''\n    }\n  },\n\n  template: '\\n    <a class=\"btn external_url\" :href=\"externalUrl\" target=\"_blank\" rel=\"noopener noreferrer\">\\n      <i class=\"fa fa-external-link\"></i>\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"FaWK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Renders Rollback or Re deploy button in environments table depending\n * of the provided property `isLastDeployment`\n */\nvar Vue = __webpack_require__(\"Eruj\");\n\nmodule.exports = Vue.component('rollback-component', {\n  props: {\n    retryUrl: {\n      type: String,\n      default: ''\n    },\n\n    isLastDeployment: {\n      type: Boolean,\n      default: true\n    }\n  },\n\n  template: '\\n    <a class=\"btn\" :href=\"retryUrl\" data-method=\"post\" rel=\"nofollow\">\\n      <span v-if=\"isLastDeployment\">\\n        Re-deploy\\n      </span>\\n      <span v-else>\\n        Rollback\\n      </span>\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"Q/iC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Renders a terminal button to open a web terminal.\n * Used in environments table.\n */\nvar Vue = __webpack_require__(\"Eruj\");\nvar terminalIconSvg = __webpack_require__(\"WEra\");\n\nmodule.exports = Vue.component('terminal-button-component', {\n  props: {\n    terminalPath: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data: function data() {\n    return { terminalIconSvg: terminalIconSvg };\n  },\n\n\n  template: '\\n    <a class=\"btn terminal-button\"\\n      :href=\"terminalPath\">\\n      ' + terminalIconSvg + '\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"R8Dz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Vue = __webpack_require__(\"Eruj\");\nvar playIconSvg = __webpack_require__(\"LIwm\");\n\nmodule.exports = Vue.component('actions-component', {\n  props: {\n    actions: {\n      type: Array,\n      required: false,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n\n  data: function data() {\n    return { playIconSvg: playIconSvg };\n  },\n\n\n  template: '\\n    <div class=\"btn-group\" role=\"group\">\\n      <button class=\"dropdown btn btn-default dropdown-new\" data-toggle=\"dropdown\">\\n        <span>\\n          <span class=\"js-dropdown-play-icon-container\" v-html=\"playIconSvg\"></span>\\n          <i class=\"fa fa-caret-down\"></i>\\n        </span>\\n\\n      <ul class=\"dropdown-menu dropdown-menu-align-right\">\\n        <li v-for=\"action in actions\">\\n          <a :href=\"action.play_path\"\\n            data-method=\"post\"\\n            rel=\"nofollow\"\\n            class=\"js-manual-action-link\">\\n            ' + playIconSvg + '\\n            <span>\\n              {{action.name}}\\n            </span>\\n          </a>\\n        </li>\\n      </ul>\\n    </button>\\n  </div>\\n  '\n});\n\n/***/ }),\n\n/***/ \"WEra\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg width=\\\"19\\\" height=\\\"14\\\" viewBox=\\\"0 0 19 14\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect fill=\\\"#848484\\\" x=\\\"7.2\\\" y=\\\"9.25\\\" width=\\\"6.46\\\" height=\\\"1.5\\\" rx=\\\".5\\\"/><path d=\\\"M5.851 7.016L3.81 9.103a.503.503 0 0 0 .017.709l.35.334c.207.198.524.191.717-.006l2.687-2.748a.493.493 0 0 0 .137-.376.493.493 0 0 0-.137-.376L4.894 3.892a.507.507 0 0 0-.717-.006l-.35.334a.503.503 0 0 0-.017.709L5.85 7.016z\\\"/><path d=\\\"M1.25 11.497c0 .691.562 1.253 1.253 1.253h13.994c.694 0 1.253-.56 1.253-1.253V2.503c0-.691-.562-1.253-1.253-1.253H2.503c-.694 0-1.253.56-1.253 1.253v8.994zM2.503 0h13.994A2.504 2.504 0 0 1 19 2.503v8.994A2.501 2.501 0 0 1 16.497 14H2.503A2.504 2.504 0 0 1 0 11.497V2.503A2.501 2.501 0 0 1 2.503 0z\\\"/></svg>\\n\"\n\n/***/ }),\n\n/***/ \"XJ/8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {var EnvironmentsComponent = __webpack_require__(\"vm9i\");\n\n$(function () {\n  window.gl = window.gl || {};\n\n  if (gl.EnvironmentsListApp) {\n    gl.EnvironmentsListApp.$destroy(true);\n  }\n\n  gl.EnvironmentsListApp = new EnvironmentsComponent({\n    el: document.querySelector('#environments-list-view')\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"jNb8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Render environments table.\n */\nvar Vue = __webpack_require__(\"Eruj\");\nvar EnvironmentItem = __webpack_require__(\"3qMg\");\n\nmodule.exports = Vue.component('environment-table-component', {\n\n  components: {\n    'environment-item': EnvironmentItem\n  },\n\n  props: {\n    environments: {\n      type: Array,\n      required: true,\n      default: function _default() {\n        return [];\n      }\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  template: '\\n    <table class=\"table ci-table\">\\n      <thead>\\n        <tr>\\n          <th class=\"environments-name\">Environment</th>\\n          <th class=\"environments-deploy\">Last deployment</th>\\n          <th class=\"environments-build\">Job</th>\\n          <th class=\"environments-commit\">Commit</th>\\n          <th class=\"environments-date\">Updated</th>\\n          <th class=\"environments-actions\"></th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <template v-for=\"model in environments\"\\n          v-bind:model=\"model\">\\n          <tr is=\"environment-item\"\\n            :model=\"model\"\\n            :can-create-deployment=\"canCreateDeployment\"\\n            :can-read-environment=\"canReadEnvironment\"></tr>\\n        </template>\\n      </tbody>\\n    </table>\\n  '\n});\n\n/***/ }),\n\n/***/ \"kXVd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Renders the stop \"button\" that allows stop an environment.\n * Used in environments table.\n */\nvar Vue = __webpack_require__(\"Eruj\");\n\nmodule.exports = Vue.component('stop-component', {\n  props: {\n    stopUrl: {\n      type: String,\n      default: ''\n    }\n  },\n\n  template: '\\n    <a class=\"btn stop-env-link\"\\n      :href=\"stopUrl\"\\n      data-confirm=\"Are you sure you want to stop this environment?\"\\n      data-method=\"post\"\\n      rel=\"nofollow\">\\n      <i class=\"fa fa-stop stop-env-icon\" aria-hidden=\"true\"></i>\\n    </a>\\n  '\n});\n\n/***/ }),\n\n/***/ \"pGP2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Vue = __webpack_require__(\"Eruj\");\n\nvar EnvironmentsService = function () {\n  function EnvironmentsService(endpoint) {\n    _classCallCheck(this, EnvironmentsService);\n\n    this.environments = Vue.resource(endpoint);\n  }\n\n  _createClass(EnvironmentsService, [{\n    key: 'get',\n    value: function get() {\n      return this.environments.get();\n    }\n  }]);\n\n  return EnvironmentsService;\n}();\n\nmodule.exports = EnvironmentsService;\n\n/***/ }),\n\n/***/ \"vm9i\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint-disable no-param-reassign, no-new */\n/* global Flash */\n\nvar Vue = window.Vue = __webpack_require__(\"Eruj\");\nwindow.Vue.use(__webpack_require__(\"7UJR\"));\nvar EnvironmentsService = __webpack_require__(\"pGP2\");\nvar EnvironmentTable = __webpack_require__(\"jNb8\");\nvar EnvironmentsStore = __webpack_require__(\"w+iT\");\n__webpack_require__(\"03o2\");\n__webpack_require__(\"RsTm\");\n__webpack_require__(\"wFzz\");\n\nmodule.exports = Vue.component('environment-component', {\n\n  components: {\n    'environment-table': EnvironmentTable,\n    'table-pagination': gl.VueGlPagination\n  },\n\n  data: function data() {\n    var environmentsData = document.querySelector('#environments-list-view').dataset;\n    var store = new EnvironmentsStore();\n\n    return {\n      store: store,\n      state: store.state,\n      visibility: 'available',\n      isLoading: false,\n      cssContainerClass: environmentsData.cssClass,\n      endpoint: environmentsData.environmentsDataEndpoint,\n      canCreateDeployment: environmentsData.canCreateDeployment,\n      canReadEnvironment: environmentsData.canReadEnvironment,\n      canCreateEnvironment: environmentsData.canCreateEnvironment,\n      projectEnvironmentsPath: environmentsData.projectEnvironmentsPath,\n      projectStoppedEnvironmentsPath: environmentsData.projectStoppedEnvironmentsPath,\n      newEnvironmentPath: environmentsData.newEnvironmentPath,\n      helpPagePath: environmentsData.helpPagePath,\n\n      // Pagination Properties,\n      paginationInformation: {},\n      pageNumber: 1\n    };\n  },\n\n\n  computed: {\n    scope: function scope() {\n      return gl.utils.getParameterByName('scope');\n    },\n    canReadEnvironmentParsed: function canReadEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canReadEnvironment);\n    },\n    canCreateDeploymentParsed: function canCreateDeploymentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateDeployment);\n    },\n    canCreateEnvironmentParsed: function canCreateEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateEnvironment);\n    }\n  },\n\n  /**\n   * Fetches all the environments and stores them.\n   * Toggles loading property.\n   */\n  created: function created() {\n    var _this = this;\n\n    var scope = gl.utils.getParameterByName('scope') || this.visibility;\n    var pageNumber = gl.utils.getParameterByName('page') || this.pageNumber;\n\n    var endpoint = this.endpoint + '?scope=' + scope + '&page=' + pageNumber;\n\n    var service = new EnvironmentsService(endpoint);\n\n    this.isLoading = true;\n\n    return service.get().then(function (resp) {\n      return {\n        headers: resp.headers,\n        body: resp.json()\n      };\n    }).then(function (response) {\n      _this.store.storeAvailableCount(response.body.available_count);\n      _this.store.storeStoppedCount(response.body.stopped_count);\n      _this.store.storeEnvironments(response.body.environments);\n      _this.store.setPagination(response.headers);\n    }).then(function () {\n      _this.isLoading = false;\n    }).catch(function () {\n      _this.isLoading = false;\n      new Flash('An error occurred while fetching the environments.', 'alert');\n    });\n  },\n\n\n  methods: {\n    toggleRow: function toggleRow(model) {\n      return this.store.toggleFolder(model.name);\n    },\n\n\n    /**\n     * Will change the page number and update the URL.\n     *\n     * @param  {Number} pageNumber desired page to go to.\n     * @return {String}\n     */\n    changePage: function changePage(pageNumber) {\n      var param = gl.utils.setParamInURL('page', pageNumber);\n\n      gl.utils.visitUrl(param);\n      return param;\n    }\n  },\n\n  template: '\\n    <div :class=\"cssContainerClass\">\\n      <div class=\"top-area\">\\n        <ul v-if=\"!isLoading\" class=\"nav-links\">\\n          <li v-bind:class=\"{ \\'active\\': scope === null || scope === \\'available\\' }\">\\n            <a :href=\"projectEnvironmentsPath\">\\n              Available\\n              <span class=\"badge js-available-environments-count\">\\n                {{state.availableCounter}}\\n              </span>\\n            </a>\\n          </li>\\n          <li v-bind:class=\"{ \\'active\\' : scope === \\'stopped\\' }\">\\n            <a :href=\"projectStoppedEnvironmentsPath\">\\n              Stopped\\n              <span class=\"badge js-stopped-environments-count\">\\n                {{state.stoppedCounter}}\\n              </span>\\n            </a>\\n          </li>\\n        </ul>\\n        <div v-if=\"canCreateEnvironmentParsed && !isLoading\" class=\"nav-controls\">\\n          <a :href=\"newEnvironmentPath\" class=\"btn btn-create\">\\n            New environment\\n          </a>\\n        </div>\\n      </div>\\n\\n      <div class=\"content-list environments-container\">\\n        <div class=\"environments-list-loading text-center\" v-if=\"isLoading\">\\n          <i class=\"fa fa-spinner fa-spin\"></i>\\n        </div>\\n\\n        <div class=\"blank-state blank-state-no-icon\"\\n          v-if=\"!isLoading && state.environments.length === 0\">\\n          <h2 class=\"blank-state-title js-blank-state-title\">\\n            You don\\'t have any environments right now.\\n          </h2>\\n          <p class=\"blank-state-text\">\\n            Environments are places where code gets deployed, such as staging or production.\\n            <br />\\n            <a :href=\"helpPagePath\">\\n              Read more about environments\\n            </a>\\n          </p>\\n\\n          <a v-if=\"canCreateEnvironmentParsed\"\\n            :href=\"newEnvironmentPath\"\\n            class=\"btn btn-create js-new-environment-button\">\\n            New Environment\\n          </a>\\n        </div>\\n\\n        <div class=\"table-holder\"\\n          v-if=\"!isLoading && state.environments.length > 0\">\\n\\n          <environment-table\\n            :environments=\"state.environments\"\\n            :can-create-deployment=\"canCreateDeploymentParsed\"\\n            :can-read-environment=\"canReadEnvironmentParsed\"/>\\n        </div>\\n\\n        <table-pagination v-if=\"state.paginationInformation && state.paginationInformation.totalPages > 1\"\\n          :change=\"changePage\"\\n          :pageInfo=\"state.paginationInformation\">\\n        </table-pagination>\\n      </div>\\n    </div>\\n  '\n});\n\n/***/ }),\n\n/***/ \"w+iT\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n__webpack_require__(\"RsTm\");\n/**\n * Environments Store.\n *\n * Stores received environments, count of stopped environments and count of\n * available environments.\n */\n\nvar EnvironmentsStore = function () {\n  function EnvironmentsStore() {\n    _classCallCheck(this, EnvironmentsStore);\n\n    this.state = {};\n    this.state.environments = [];\n    this.state.stoppedCounter = 0;\n    this.state.availableCounter = 0;\n    this.state.paginationInformation = {};\n\n    return this;\n  }\n\n  /**\n   *\n   * Stores the received environments.\n   *\n   * In the main environments endpoint, each environment has the following schema\n   * { name: String, size: Number, latest: Object }\n   * In the endpoint to retrieve environments from each folder, the environment does\n   * not have the `latest` key and the data is all in the root level.\n   * To avoid doing this check in the view, we store both cases the same by extracting\n   * what is inside the `latest` key.\n   *\n   * If the `size` is bigger than 1, it means it should be rendered as a folder.\n   * In those cases we add `isFolder` key in order to render it properly.\n   *\n   * @param  {Array} environments\n   * @returns {Array}\n   */\n\n\n  _createClass(EnvironmentsStore, [{\n    key: 'storeEnvironments',\n    value: function storeEnvironments() {\n      var environments = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var filteredEnvironments = environments.map(function (env) {\n        var filtered = {};\n\n        if (env.size > 1) {\n          filtered = Object.assign({}, env, { isFolder: true, folderName: env.name });\n        }\n\n        if (env.latest) {\n          filtered = Object.assign(filtered, env, env.latest);\n          delete filtered.latest;\n        } else {\n          filtered = Object.assign(filtered, env);\n        }\n\n        return filtered;\n      });\n\n      this.state.environments = filteredEnvironments;\n\n      return filteredEnvironments;\n    }\n  }, {\n    key: 'setPagination',\n    value: function setPagination() {\n      var pagination = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var normalizedHeaders = gl.utils.normalizeHeaders(pagination);\n      var paginationInformation = gl.utils.parseIntPagination(normalizedHeaders);\n\n      this.state.paginationInformation = paginationInformation;\n      return paginationInformation;\n    }\n\n    /**\n     * Stores the number of available environments.\n     *\n     * @param  {Number} count = 0\n     * @return {Number}\n     */\n\n  }, {\n    key: 'storeAvailableCount',\n    value: function storeAvailableCount() {\n      var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.state.availableCounter = count;\n      return count;\n    }\n\n    /**\n     * Stores the number of closed environments.\n     *\n     * @param  {Number} count = 0\n     * @return {Number}\n     */\n\n  }, {\n    key: 'storeStoppedCount',\n    value: function storeStoppedCount() {\n      var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.state.stoppedCounter = count;\n      return count;\n    }\n  }]);\n\n  return EnvironmentsStore;\n}();\n\nmodule.exports = EnvironmentsStore;\n\n/***/ })\n\n},[\"XJ/8\"]);\n\n\n// WEBPACK FOOTER //\n// environments.5af11baa47dbbd6c3e67.bundle.js","const Vue = require('vue');\nconst Timeago = require('timeago.js');\n\nrequire('../../lib/utils/text_utility');\nrequire('../../vue_shared/components/commit');\nconst ActionsComponent = require('./environment_actions');\nconst ExternalUrlComponent = require('./environment_external_url');\nconst StopComponent = require('./environment_stop');\nconst RollbackComponent = require('./environment_rollback');\nconst TerminalButtonComponent = require('./environment_terminal_button');\n\n/**\n * Envrionment Item Component\n *\n * Renders a table row for each environment.\n */\n\nconst timeagoInstance = new Timeago();\n\nmodule.exports = Vue.component('environment-item', {\n\n  components: {\n    'commit-component': gl.CommitComponent,\n    'actions-component': ActionsComponent,\n    'external-url-component': ExternalUrlComponent,\n    'stop-component': StopComponent,\n    'rollback-component': RollbackComponent,\n    'terminal-button-component': TerminalButtonComponent,\n  },\n\n  props: {\n    model: {\n      type: Object,\n      required: true,\n      default: () => ({}),\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n\n  computed: {\n    /**\n     * Verifies if `last_deployment` key exists in the current Envrionment.\n     * This key is required to render most of the html - this method works has\n     * an helper.\n     *\n     * @returns {Boolean}\n     */\n    hasLastDeploymentKey() {\n      if (this.model &&\n        this.model.last_deployment &&\n        !this.$options.isObjectEmpty(this.model.last_deployment)) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Verifies is the given environment has manual actions.\n     * Used to verify if we should render them or nor.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    hasManualActions() {\n      return this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.manual_actions &&\n        this.model.last_deployment.manual_actions.length > 0;\n    },\n\n    /**\n     * Returns the value of the `stop_action?` key provided in the response.\n     *\n     * @returns {Boolean}\n     */\n    hasStopAction() {\n      return this.model && this.model['stop_action?'];\n    },\n\n    /**\n     * Verifies if the `deployable` key is present in `last_deployment` key.\n     * Used to verify whether we should or not render the rollback partial.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canRetry() {\n      return this.model &&\n        this.hasLastDeploymentKey &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable;\n    },\n\n    /**\n     * Verifies if the date to be shown is present.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    canShowDate() {\n      return this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable !== undefined;\n    },\n\n    /**\n     * Human readable date.\n     *\n     * @returns {String}\n     */\n    createdDate() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.created_at) {\n        return timeagoInstance.format(this.model.last_deployment.deployable.created_at);\n      }\n      return '';\n    },\n\n    /**\n     * Returns the manual actions with the name parsed.\n     *\n     * @returns {Array.<Object>|Undefined}\n     */\n    manualActions() {\n      if (this.hasManualActions) {\n        return this.model.last_deployment.manual_actions.map((action) => {\n          const parsedAction = {\n            name: gl.text.humanize(action.name),\n            play_path: action.play_path,\n          };\n          return parsedAction;\n        });\n      }\n      return [];\n    },\n\n    /**\n     * Builds the string used in the user image alt attribute.\n     *\n     * @returns {String}\n     */\n    userImageAltDescription() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.user &&\n        this.model.last_deployment.user.username) {\n        return `${this.model.last_deployment.user.username}'s avatar'`;\n      }\n      return '';\n    },\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTag() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.tag) {\n        return this.model.last_deployment.tag;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit ref.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitRef() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.ref) {\n        return this.model.last_deployment.ref;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit url.\n     *\n     * @returns {String|Undefined}\n     */\n    commitUrl() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.commit_path) {\n        return this.model.last_deployment.commit.commit_path;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit short sha.\n     *\n     * @returns {String|Undefined}\n     */\n    commitShortSha() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.short_id) {\n        return this.model.last_deployment.commit.short_id;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit title.\n     *\n     * @returns {String|Undefined}\n     */\n    commitTitle() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.title) {\n        return this.model.last_deployment.commit.title;\n      }\n      return undefined;\n    },\n\n    /**\n     * If provided, returns the commit tag.\n     *\n     * @returns {Object|Undefined}\n     */\n    commitAuthor() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.commit &&\n        this.model.last_deployment.commit.author) {\n        return this.model.last_deployment.commit.author;\n      }\n\n      return undefined;\n    },\n\n    /**\n     * Verifies if the `retry_path` key is present and returns its value.\n     *\n     * @returns {String|Undefined}\n     */\n    retryUrl() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.retry_path) {\n        return this.model.last_deployment.deployable.retry_path;\n      }\n      return undefined;\n    },\n\n    /**\n     * Verifies if the `last?` key is present and returns its value.\n     *\n     * @returns {Boolean|Undefined}\n     */\n    isLastDeployment() {\n      return this.model && this.model.last_deployment &&\n        this.model.last_deployment['last?'];\n    },\n\n    /**\n     * Builds the name of the builds needed to display both the name and the id.\n     *\n     * @returns {String}\n     */\n    buildName() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable) {\n        return `${this.model.last_deployment.deployable.name} #${this.model.last_deployment.deployable.id}`;\n      }\n      return '';\n    },\n\n    /**\n     * Builds the needed string to show the internal id.\n     *\n     * @returns {String}\n     */\n    deploymentInternalId() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.iid) {\n        return `#${this.model.last_deployment.iid}`;\n      }\n      return '';\n    },\n\n    /**\n     * Verifies if the user object is present under last_deployment object.\n     *\n     * @returns {Boolean}\n     */\n    deploymentHasUser() {\n      return this.model &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.user);\n    },\n\n    /**\n     * Returns the user object nested with the last_deployment object.\n     * Used to render the template.\n     *\n     * @returns {Object}\n     */\n    deploymentUser() {\n      if (this.model &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.user)) {\n        return this.model.last_deployment.user;\n      }\n      return {};\n    },\n\n    /**\n     * Verifies if the build name column should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderBuildName() {\n      return !this.model.isFolder &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        !this.$options.isObjectEmpty(this.model.last_deployment.deployable);\n    },\n\n    /**\n     * Verifies the presence of all the keys needed to render the buil_path.\n     *\n     * @return {String}\n     */\n    buildPath() {\n      if (this.model &&\n        this.model.last_deployment &&\n        this.model.last_deployment.deployable &&\n        this.model.last_deployment.deployable.build_path) {\n        return this.model.last_deployment.deployable.build_path;\n      }\n\n      return '';\n    },\n\n    /**\n     * Verifies the presence of all the keys needed to render the external_url.\n     *\n     * @return {String}\n     */\n    externalURL() {\n      if (this.model && this.model.external_url) {\n        return this.model.external_url;\n      }\n\n      return '';\n    },\n\n    /**\n     * Verifies if deplyment internal ID should be rendered by verifing\n     * if all the information needed is present\n     * and if the environment is not a folder.\n     *\n     * @returns {Boolean}\n     */\n    shouldRenderDeploymentID() {\n      return !this.model.isFolder &&\n        !this.$options.isObjectEmpty(this.model.last_deployment) &&\n        this.model.last_deployment.iid !== undefined;\n    },\n\n    environmentPath() {\n      if (this.model && this.model.environment_path) {\n        return this.model.environment_path;\n      }\n\n      return '';\n    },\n\n    /**\n     * Constructs folder URL based on the current location and the folder id.\n     *\n     * @return {String}\n     */\n    folderUrl() {\n      return `${window.location.pathname}/folders/${this.model.folderName}`;\n    },\n\n  },\n\n  /**\n   * Helper to verify if certain given object are empty.\n   * Should be replaced by lodash _.isEmpty - https://lodash.com/docs/4.17.2#isEmpty\n   * @param  {Object} object\n   * @returns {Bollean}\n   */\n  isObjectEmpty(object) {\n    for (const key in object) { // eslint-disable-line\n      if (hasOwnProperty.call(object, key)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  template: `\n    <tr>\n      <td>\n        <a v-if=\"!model.isFolder\"\n          class=\"environment-name\"\n          :href=\"environmentPath\">\n          {{model.name}}\n        </a>\n        <a v-else class=\"folder-name\" :href=\"folderUrl\">\n          <span class=\"folder-icon\">\n            <i class=\"fa fa-folder\" aria-hidden=\"true\"></i>\n          </span>\n\n          <span>\n            {{model.folderName}}\n          </span>\n\n          <span class=\"badge\">\n            {{model.size}}\n          </span>\n        </a>\n      </td>\n\n      <td class=\"deployment-column\">\n        <span v-if=\"shouldRenderDeploymentID\">\n          {{deploymentInternalId}}\n        </span>\n\n        <span v-if=\"!model.isFolder && deploymentHasUser\">\n          by\n          <a :href=\"deploymentUser.web_url\" class=\"js-deploy-user-container\">\n            <img class=\"avatar has-tooltip s20\"\n              :src=\"deploymentUser.avatar_url\"\n              :alt=\"userImageAltDescription\"\n              :title=\"deploymentUser.username\" />\n          </a>\n        </span>\n      </td>\n\n      <td class=\"environments-build-cell\">\n        <a v-if=\"shouldRenderBuildName\"\n          class=\"build-link\"\n          :href=\"buildPath\">\n          {{buildName}}\n        </a>\n      </td>\n\n      <td>\n        <div v-if=\"!model.isFolder && hasLastDeploymentKey\" class=\"js-commit-component\">\n          <commit-component\n            :tag=\"commitTag\"\n            :commit-ref=\"commitRef\"\n            :commit-url=\"commitUrl\"\n            :short-sha=\"commitShortSha\"\n            :title=\"commitTitle\"\n            :author=\"commitAuthor\"/>\n        </div>\n        <p v-if=\"!model.isFolder && !hasLastDeploymentKey\" class=\"commit-title\">\n          No deployments yet\n        </p>\n      </td>\n\n      <td>\n        <span v-if=\"!model.isFolder && canShowDate\"\n          class=\"environment-created-date-timeago\">\n          {{createdDate}}\n        </span>\n      </td>\n\n      <td class=\"environments-actions\">\n        <div v-if=\"!model.isFolder\" class=\"btn-group pull-right\" role=\"group\">\n          <actions-component v-if=\"hasManualActions && canCreateDeployment\"\n            :actions=\"manualActions\"/>\n\n          <external-url-component v-if=\"externalURL && canReadEnvironment\"\n            :external-url=\"externalURL\"/>\n\n          <stop-component v-if=\"hasStopAction && canCreateDeployment\"\n            :stop-url=\"model.stop_path\"/>\n\n          <terminal-button-component v-if=\"model && model.terminal_path\"\n            :terminal-path=\"model.terminal_path\"/>\n\n          <rollback-component v-if=\"canRetry && canCreateDeployment\"\n            :is-last-deployment=\"isLastDeployment\"\n            :retry-url=\"retryUrl\"/>\n        </div>\n      </td>\n    </tr>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_item.js","/**\n * Renders the external url link in environments table.\n */\nconst Vue = require('vue');\n\nmodule.exports = Vue.component('external-url-component', {\n  props: {\n    externalUrl: {\n      type: String,\n      default: '',\n    },\n  },\n\n  template: `\n    <a class=\"btn external_url\" :href=\"externalUrl\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <i class=\"fa fa-external-link\"></i>\n    </a>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_external_url.js","/**\n * Renders Rollback or Re deploy button in environments table depending\n * of the provided property `isLastDeployment`\n */\nconst Vue = require('vue');\n\nmodule.exports = Vue.component('rollback-component', {\n  props: {\n    retryUrl: {\n      type: String,\n      default: '',\n    },\n\n    isLastDeployment: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  template: `\n    <a class=\"btn\" :href=\"retryUrl\" data-method=\"post\" rel=\"nofollow\">\n      <span v-if=\"isLastDeployment\">\n        Re-deploy\n      </span>\n      <span v-else>\n        Rollback\n      </span>\n    </a>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_rollback.js","/**\n * Renders a terminal button to open a web terminal.\n * Used in environments table.\n */\nconst Vue = require('vue');\nconst terminalIconSvg = require('icons/_icon_terminal.svg');\n\nmodule.exports = Vue.component('terminal-button-component', {\n  props: {\n    terminalPath: {\n      type: String,\n      default: '',\n    },\n  },\n\n  data() {\n    return { terminalIconSvg };\n  },\n\n  template: `\n    <a class=\"btn terminal-button\"\n      :href=\"terminalPath\">\n      ${terminalIconSvg}\n    </a>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_terminal_button.js","const Vue = require('vue');\nconst playIconSvg = require('icons/_icon_play.svg');\n\nmodule.exports = Vue.component('actions-component', {\n  props: {\n    actions: {\n      type: Array,\n      required: false,\n      default: () => [],\n    },\n  },\n\n  data() {\n    return { playIconSvg };\n  },\n\n  template: `\n    <div class=\"btn-group\" role=\"group\">\n      <button class=\"dropdown btn btn-default dropdown-new\" data-toggle=\"dropdown\">\n        <span>\n          <span class=\"js-dropdown-play-icon-container\" v-html=\"playIconSvg\"></span>\n          <i class=\"fa fa-caret-down\"></i>\n        </span>\n\n      <ul class=\"dropdown-menu dropdown-menu-align-right\">\n        <li v-for=\"action in actions\">\n          <a :href=\"action.play_path\"\n            data-method=\"post\"\n            rel=\"nofollow\"\n            class=\"js-manual-action-link\">\n            ${playIconSvg}\n            <span>\n              {{action.name}}\n            </span>\n          </a>\n        </li>\n      </ul>\n    </button>\n  </div>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_actions.js","module.exports = \"<svg width=\\\"19\\\" height=\\\"14\\\" viewBox=\\\"0 0 19 14\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect fill=\\\"#848484\\\" x=\\\"7.2\\\" y=\\\"9.25\\\" width=\\\"6.46\\\" height=\\\"1.5\\\" rx=\\\".5\\\"/><path d=\\\"M5.851 7.016L3.81 9.103a.503.503 0 0 0 .017.709l.35.334c.207.198.524.191.717-.006l2.687-2.748a.493.493 0 0 0 .137-.376.493.493 0 0 0-.137-.376L4.894 3.892a.507.507 0 0 0-.717-.006l-.35.334a.503.503 0 0 0-.017.709L5.85 7.016z\\\"/><path d=\\\"M1.25 11.497c0 .691.562 1.253 1.253 1.253h13.994c.694 0 1.253-.56 1.253-1.253V2.503c0-.691-.562-1.253-1.253-1.253H2.503c-.694 0-1.253.56-1.253 1.253v8.994zM2.503 0h13.994A2.504 2.504 0 0 1 19 2.503v8.994A2.501 2.501 0 0 1 16.497 14H2.503A2.504 2.504 0 0 1 0 11.497V2.503A2.501 2.501 0 0 1 2.503 0z\\\"/></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /var/cache/omnibus/src/gitlab-rails/app/views/shared/icons/_icon_terminal.svg\n// module id = WEra\n// module chunks = 5 6","const EnvironmentsComponent = require('./components/environment');\n\n$(() => {\n  window.gl = window.gl || {};\n\n  if (gl.EnvironmentsListApp) {\n    gl.EnvironmentsListApp.$destroy(true);\n  }\n\n  gl.EnvironmentsListApp = new EnvironmentsComponent({\n    el: document.querySelector('#environments-list-view'),\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/environments_bundle.js","/**\n * Render environments table.\n */\nconst Vue = require('vue');\nconst EnvironmentItem = require('./environment_item');\n\nmodule.exports = Vue.component('environment-table-component', {\n\n  components: {\n    'environment-item': EnvironmentItem,\n  },\n\n  props: {\n    environments: {\n      type: Array,\n      required: true,\n      default: () => ([]),\n    },\n\n    canReadEnvironment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n\n    canCreateDeployment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n\n  template: `\n    <table class=\"table ci-table\">\n      <thead>\n        <tr>\n          <th class=\"environments-name\">Environment</th>\n          <th class=\"environments-deploy\">Last deployment</th>\n          <th class=\"environments-build\">Job</th>\n          <th class=\"environments-commit\">Commit</th>\n          <th class=\"environments-date\">Updated</th>\n          <th class=\"environments-actions\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-for=\"model in environments\"\n          v-bind:model=\"model\">\n          <tr is=\"environment-item\"\n            :model=\"model\"\n            :can-create-deployment=\"canCreateDeployment\"\n            :can-read-environment=\"canReadEnvironment\"></tr>\n        </template>\n      </tbody>\n    </table>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environments_table.js","/**\n * Renders the stop \"button\" that allows stop an environment.\n * Used in environments table.\n */\nconst Vue = require('vue');\n\nmodule.exports = Vue.component('stop-component', {\n  props: {\n    stopUrl: {\n      type: String,\n      default: '',\n    },\n  },\n\n  template: `\n    <a class=\"btn stop-env-link\"\n      :href=\"stopUrl\"\n      data-confirm=\"Are you sure you want to stop this environment?\"\n      data-method=\"post\"\n      rel=\"nofollow\">\n      <i class=\"fa fa-stop stop-env-icon\" aria-hidden=\"true\"></i>\n    </a>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment_stop.js","const Vue = require('vue');\n\nclass EnvironmentsService {\n  constructor(endpoint) {\n    this.environments = Vue.resource(endpoint);\n  }\n\n  get() {\n    return this.environments.get();\n  }\n}\n\nmodule.exports = EnvironmentsService;\n\n\n\n// WEBPACK FOOTER //\n// ./environments/services/environments_service.js","/* eslint-disable no-param-reassign, no-new */\n/* global Flash */\n\nconst Vue = window.Vue = require('vue');\nwindow.Vue.use(require('vue-resource'));\nconst EnvironmentsService = require('../services/environments_service');\nconst EnvironmentTable = require('./environments_table');\nconst EnvironmentsStore = require('../stores/environments_store');\nrequire('../../vue_shared/components/table_pagination');\nrequire('../../lib/utils/common_utils');\nrequire('../../vue_shared/vue_resource_interceptor');\n\nmodule.exports = Vue.component('environment-component', {\n\n  components: {\n    'environment-table': EnvironmentTable,\n    'table-pagination': gl.VueGlPagination,\n  },\n\n  data() {\n    const environmentsData = document.querySelector('#environments-list-view').dataset;\n    const store = new EnvironmentsStore();\n\n    return {\n      store,\n      state: store.state,\n      visibility: 'available',\n      isLoading: false,\n      cssContainerClass: environmentsData.cssClass,\n      endpoint: environmentsData.environmentsDataEndpoint,\n      canCreateDeployment: environmentsData.canCreateDeployment,\n      canReadEnvironment: environmentsData.canReadEnvironment,\n      canCreateEnvironment: environmentsData.canCreateEnvironment,\n      projectEnvironmentsPath: environmentsData.projectEnvironmentsPath,\n      projectStoppedEnvironmentsPath: environmentsData.projectStoppedEnvironmentsPath,\n      newEnvironmentPath: environmentsData.newEnvironmentPath,\n      helpPagePath: environmentsData.helpPagePath,\n\n      // Pagination Properties,\n      paginationInformation: {},\n      pageNumber: 1,\n    };\n  },\n\n  computed: {\n    scope() {\n      return gl.utils.getParameterByName('scope');\n    },\n\n    canReadEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canReadEnvironment);\n    },\n\n    canCreateDeploymentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateDeployment);\n    },\n\n    canCreateEnvironmentParsed() {\n      return gl.utils.convertPermissionToBoolean(this.canCreateEnvironment);\n    },\n\n  },\n\n  /**\n   * Fetches all the environments and stores them.\n   * Toggles loading property.\n   */\n  created() {\n    const scope = gl.utils.getParameterByName('scope') || this.visibility;\n    const pageNumber = gl.utils.getParameterByName('page') || this.pageNumber;\n\n    const endpoint = `${this.endpoint}?scope=${scope}&page=${pageNumber}`;\n\n    const service = new EnvironmentsService(endpoint);\n\n    this.isLoading = true;\n\n    return service.get()\n      .then(resp => ({\n        headers: resp.headers,\n        body: resp.json(),\n      }))\n      .then((response) => {\n        this.store.storeAvailableCount(response.body.available_count);\n        this.store.storeStoppedCount(response.body.stopped_count);\n        this.store.storeEnvironments(response.body.environments);\n        this.store.setPagination(response.headers);\n      })\n      .then(() => {\n        this.isLoading = false;\n      })\n      .catch(() => {\n        this.isLoading = false;\n        new Flash('An error occurred while fetching the environments.', 'alert');\n      });\n  },\n\n  methods: {\n    toggleRow(model) {\n      return this.store.toggleFolder(model.name);\n    },\n\n    /**\n     * Will change the page number and update the URL.\n     *\n     * @param  {Number} pageNumber desired page to go to.\n     * @return {String}\n     */\n    changePage(pageNumber) {\n      const param = gl.utils.setParamInURL('page', pageNumber);\n\n      gl.utils.visitUrl(param);\n      return param;\n    },\n  },\n\n  template: `\n    <div :class=\"cssContainerClass\">\n      <div class=\"top-area\">\n        <ul v-if=\"!isLoading\" class=\"nav-links\">\n          <li v-bind:class=\"{ 'active': scope === null || scope === 'available' }\">\n            <a :href=\"projectEnvironmentsPath\">\n              Available\n              <span class=\"badge js-available-environments-count\">\n                {{state.availableCounter}}\n              </span>\n            </a>\n          </li>\n          <li v-bind:class=\"{ 'active' : scope === 'stopped' }\">\n            <a :href=\"projectStoppedEnvironmentsPath\">\n              Stopped\n              <span class=\"badge js-stopped-environments-count\">\n                {{state.stoppedCounter}}\n              </span>\n            </a>\n          </li>\n        </ul>\n        <div v-if=\"canCreateEnvironmentParsed && !isLoading\" class=\"nav-controls\">\n          <a :href=\"newEnvironmentPath\" class=\"btn btn-create\">\n            New environment\n          </a>\n        </div>\n      </div>\n\n      <div class=\"content-list environments-container\">\n        <div class=\"environments-list-loading text-center\" v-if=\"isLoading\">\n          <i class=\"fa fa-spinner fa-spin\"></i>\n        </div>\n\n        <div class=\"blank-state blank-state-no-icon\"\n          v-if=\"!isLoading && state.environments.length === 0\">\n          <h2 class=\"blank-state-title js-blank-state-title\">\n            You don't have any environments right now.\n          </h2>\n          <p class=\"blank-state-text\">\n            Environments are places where code gets deployed, such as staging or production.\n            <br />\n            <a :href=\"helpPagePath\">\n              Read more about environments\n            </a>\n          </p>\n\n          <a v-if=\"canCreateEnvironmentParsed\"\n            :href=\"newEnvironmentPath\"\n            class=\"btn btn-create js-new-environment-button\">\n            New Environment\n          </a>\n        </div>\n\n        <div class=\"table-holder\"\n          v-if=\"!isLoading && state.environments.length > 0\">\n\n          <environment-table\n            :environments=\"state.environments\"\n            :can-create-deployment=\"canCreateDeploymentParsed\"\n            :can-read-environment=\"canReadEnvironmentParsed\"/>\n        </div>\n\n        <table-pagination v-if=\"state.paginationInformation && state.paginationInformation.totalPages > 1\"\n          :change=\"changePage\"\n          :pageInfo=\"state.paginationInformation\">\n        </table-pagination>\n      </div>\n    </div>\n  `,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./environments/components/environment.js","require('~/lib/utils/common_utils');\n/**\n * Environments Store.\n *\n * Stores received environments, count of stopped environments and count of\n * available environments.\n */\nclass EnvironmentsStore {\n  constructor() {\n    this.state = {};\n    this.state.environments = [];\n    this.state.stoppedCounter = 0;\n    this.state.availableCounter = 0;\n    this.state.paginationInformation = {};\n\n    return this;\n  }\n\n  /**\n   *\n   * Stores the received environments.\n   *\n   * In the main environments endpoint, each environment has the following schema\n   * { name: String, size: Number, latest: Object }\n   * In the endpoint to retrieve environments from each folder, the environment does\n   * not have the `latest` key and the data is all in the root level.\n   * To avoid doing this check in the view, we store both cases the same by extracting\n   * what is inside the `latest` key.\n   *\n   * If the `size` is bigger than 1, it means it should be rendered as a folder.\n   * In those cases we add `isFolder` key in order to render it properly.\n   *\n   * @param  {Array} environments\n   * @returns {Array}\n   */\n  storeEnvironments(environments = []) {\n    const filteredEnvironments = environments.map((env) => {\n      let filtered = {};\n\n      if (env.size > 1) {\n        filtered = Object.assign({}, env, { isFolder: true, folderName: env.name });\n      }\n\n      if (env.latest) {\n        filtered = Object.assign(filtered, env, env.latest);\n        delete filtered.latest;\n      } else {\n        filtered = Object.assign(filtered, env);\n      }\n\n      return filtered;\n    });\n\n    this.state.environments = filteredEnvironments;\n\n    return filteredEnvironments;\n  }\n\n  setPagination(pagination = {}) {\n    const normalizedHeaders = gl.utils.normalizeHeaders(pagination);\n    const paginationInformation = gl.utils.parseIntPagination(normalizedHeaders);\n\n    this.state.paginationInformation = paginationInformation;\n    return paginationInformation;\n  }\n\n  /**\n   * Stores the number of available environments.\n   *\n   * @param  {Number} count = 0\n   * @return {Number}\n   */\n  storeAvailableCount(count = 0) {\n    this.state.availableCounter = count;\n    return count;\n  }\n\n  /**\n   * Stores the number of closed environments.\n   *\n   * @param  {Number} count = 0\n   * @return {Number}\n   */\n  storeStoppedCount(count = 0) {\n    this.state.stoppedCounter = count;\n    return count;\n  }\n}\n\nmodule.exports = EnvironmentsStore;\n\n\n\n// WEBPACK FOOTER //\n// ./environments/stores/environments_store.js"],"sourceRoot":""}