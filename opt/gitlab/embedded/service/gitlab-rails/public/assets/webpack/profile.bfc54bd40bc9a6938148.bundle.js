webpackJsonp([14,25,26],{RUZQ:function(t,i,e){e("Yig8"),e("dYvO")},Yig8:function(t,i,e){"use strict";(function(t){function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=e("aX1M"),s=(e.n(a),function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}());!function(i){var e=/^.*[\\\/]/,a=function(){function i(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.filename,n=a.previewImage,h=a.modalCrop,r=a.pickImageEl,l=a.uploadImageBtn,p=a.modalCropImg,c=a.exportWidth,d=void 0===c?200:c,u=a.exportHeight,g=void 0===u?200:u,f=a.cropBoxWidth,m=void 0===f?200:f,v=a.cropBoxHeight,w=void 0===v?200:v;o(this,i),this.onUploadImageBtnClick=this.onUploadImageBtnClick.bind(this),this.onModalHide=this.onModalHide.bind(this),this.onModalShow=this.onModalShow.bind(this),this.onPickImageClick=this.onPickImageClick.bind(this),this.fileInput=t(e),this.modalCropImg=_.isString(this.modalCropImg)?t(this.modalCropImg):this.modalCropImg,this.fileInput.attr("name",this.fileInput.attr("name")+"-trigger").attr("id",this.fileInput.attr("id")+"-trigger"),this.exportWidth=d,this.exportHeight=g,this.cropBoxWidth=m,this.cropBoxHeight=w,this.form=this.fileInput.parents("form"),this.filename=s,this.previewImage=n,this.modalCrop=h,this.pickImageEl=r,this.uploadImageBtn=l,this.modalCropImg=p,this.filename=this.getElement(s),this.previewImage=this.getElement(n),this.pickImageEl=this.getElement(r),this.modalCrop=_.isString(h)?t(h):h,this.uploadImageBtn=_.isString(l)?t(l):l,this.modalCropImg=_.isString(p)?t(p):p,this.cropActionsBtn=this.modalCrop.find("[data-method]"),this.bindEvents()}return s(i,[{key:"getElement",value:function(i){return t(i,this.form)}},{key:"bindEvents",value:function(){var t;return t=this,this.fileInput.on("change",function(i){return t.onFileInputChange(i,this)}),this.pickImageEl.on("click",this.onPickImageClick),this.modalCrop.on("shown.bs.modal",this.onModalShow),this.modalCrop.on("hidden.bs.modal",this.onModalHide),this.uploadImageBtn.on("click",this.onUploadImageBtnClick),this.cropActionsBtn.on("click",function(i){var e;return e=this,t.onActionBtnClick(e)}),this.croppedImageBlob=null}},{key:"onPickImageClick",value:function(){return this.fileInput.trigger("click")}},{key:"onModalShow",value:function(){var i;return i=this,this.modalCropImg.cropper({viewMode:1,center:!1,aspectRatio:1,modal:!0,scalable:!1,rotatable:!1,zoomable:!0,dragMode:"move",guides:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropBoxMovable:!1,cropBoxResizable:!1,toggleDragModeOnDblclick:!1,built:function(){var e,o,a,s;return e=t(this),o=e.cropper("getContainerData"),s=i.cropBoxWidth,a=i.cropBoxHeight,e.cropper("setCropBoxData",{width:s,height:a,left:(o.width-s)/2,top:(o.height-a)/2})}})}},{key:"onModalHide",value:function(){return this.modalCropImg.attr("src","").cropper("destroy")}},{key:"onUploadImageBtnClick",value:function(t){return t.preventDefault(),this.setBlob(),this.setPreview(),this.modalCrop.modal("hide"),this.fileInput.val("")}},{key:"onActionBtnClick",value:function(i){var e,o;if(e=t(i).data(),this.modalCropImg.data("cropper")&&e.method)return o=this.modalCropImg.cropper(e.method,e.option)}},{key:"onFileInputChange",value:function(t,i){return this.readFile(i)}},{key:"readFile",value:function(t){var i,e;return i=this,e=new FileReader,e.onload=function(){return i.modalCropImg.attr("src",e.result),i.modalCrop.modal("show")},e.readAsDataURL(t.files[0])}},{key:"dataURLtoBlob",value:function(t){var i,e,o,a,s,n;for(e=atob(t.split(",")[1]),i=[],a=o=0,s=e.length;o<s;a=o+=1)n=e[a],i.push(e.charCodeAt(a));return new Blob([new Uint8Array(i)],{type:"image/png"})}},{key:"setPreview",value:function(){var t;return this.previewImage.attr("src",this.dataURL),t=this.fileInput.val().replace(e,""),this.filename.text(t)}},{key:"setBlob",value:function(){return this.dataURL=this.modalCropImg.cropper("getCroppedCanvas",{width:200,height:200}).toDataURL("image/png"),this.croppedImageBlob=this.dataURLtoBlob(this.dataURL)}},{key:"getBlob",value:function(){return this.croppedImageBlob}}]),i}();t.fn.glCrop=function(i){return this.each(function(){return t(this).data("glcrop",new a(this,i))})}}(window.gl||(window.gl={}))}).call(i,e("lwLq"))},aX1M:function(t,i,e){var o,a,s;/*!
 * Cropper v2.3.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-02-22T02:13:13.332Z
 */
!function(n){a=[e("lwLq")],o=n,s="function"==typeof o?o.apply(i,a):o,!(void 0!==s&&(t.exports=s))}(function(t){"use strict";function i(t){return"number"==typeof t&&!isNaN(t)}function e(t){return"undefined"==typeof t}function o(t,e){var o=[];return i(e)&&o.push(e),o.slice.apply(t,o)}function a(t,i){var e=o(arguments,2);return function(){return t.apply(i,e.concat(o(arguments)))}}function s(t){var i=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return i&&(i[1]!==b.protocol||i[2]!==b.hostname||i[3]!==b.port)}function n(t){var i="timestamp="+(new Date).getTime();return t+(t.indexOf("?")===-1?"?":"&")+i}function h(t){return t?' crossOrigin="'+t+'"':""}function r(t,i){var e;return t.naturalWidth&&!mt?i(t.naturalWidth,t.naturalHeight):(e=document.createElement("img"),e.onload=function(){i(this.width,this.height)},void(e.src=t.src))}function l(t){var e=[],o=t.rotate,a=t.scaleX,s=t.scaleY;return i(o)&&e.push("rotate("+o+"deg)"),i(a)&&i(s)&&e.push("scale("+a+","+s+")"),e.length?e.join(" "):"none"}function p(t,i){var e,o,a=bt(t.degree)%180,s=(a>90?180-a:a)*Math.PI/180,n=Ct(s),h=Bt(s),r=t.width,l=t.height,p=t.aspectRatio;return i?(e=r/(h+n/p),o=e/p):(e=r*h+l*n,o=r*n+l*h),{width:e,height:o}}function c(e,o){var a,s,n,h=t("<canvas>")[0],r=h.getContext("2d"),l=0,c=0,d=o.naturalWidth,u=o.naturalHeight,g=o.rotate,f=o.scaleX,m=o.scaleY,v=i(f)&&i(m)&&(1!==f||1!==m),w=i(g)&&0!==g,x=w||v,b=d*bt(f||1),C=u*bt(m||1);return v&&(a=b/2,s=C/2),w&&(n=p({width:b,height:C,degree:g}),b=n.width,C=n.height,a=b/2,s=C/2),h.width=b,h.height=C,x&&(l=-d/2,c=-u/2,r.save(),r.translate(a,s)),w&&r.rotate(g*Math.PI/180),v&&r.scale(f,m),r.drawImage(e,Dt(l),Dt(c),Dt(d),Dt(u)),x&&r.restore(),h}function d(i){var e=i.length,o=0,a=0;return e&&(t.each(i,function(t,i){o+=i.pageX,a+=i.pageY}),o/=e,a/=e),{pageX:o,pageY:a}}function u(t,i,e){var o,a="";for(o=i,e+=i;o<e;o++)a+=$t(t.getUint8(o));return a}function g(t){var i,e,o,a,s,n,h,r,l,p,c=new k(t),d=c.byteLength;if(255===c.getUint8(0)&&216===c.getUint8(1))for(l=2;l<d;){if(255===c.getUint8(l)&&225===c.getUint8(l+1)){h=l;break}l++}if(h&&(e=h+4,o=h+10,"Exif"===u(c,e,4)&&(n=c.getUint16(o),s=18761===n,(s||19789===n)&&42===c.getUint16(o+2,s)&&(a=c.getUint32(o+4,s),a>=8&&(r=o+a)))),r)for(d=c.getUint16(r,s),p=0;p<d;p++)if(l=r+12*p+2,274===c.getUint16(l,s)){l+=8,i=c.getUint16(l,s),mt&&c.setUint16(l,1,s);break}return i}function f(t){var i,e=t.replace(K,""),o=atob(e),a=o.length,s=new B(a),n=new y(s);for(i=0;i<a;i++)n[i]=o.charCodeAt(i);return s}function m(t){var i,e=new y(t),o=e.length,a="";for(i=0;i<o;i++)a+=$t(e[i]);return"data:image/jpeg;base64,"+D(a)}function v(i,e){this.$element=t(i),this.options=t.extend({},v.DEFAULTS,t.isPlainObject(e)&&e),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var w=t(window),x=t(document),b=window.location,C=window.navigator,B=window.ArrayBuffer,y=window.Uint8Array,k=window.DataView,D=window.btoa,$="cropper",I="cropper-modal",M="cropper-hide",L="cropper-hidden",T="cropper-invisible",Y="cropper-move",X="cropper-crop",U="cropper-disabled",R="cropper-bg",W="mousedown touchstart pointerdown MSPointerDown",H="mousemove touchmove pointermove MSPointerMove",E="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",F="wheel mousewheel DOMMouseScroll",O="dblclick",z="load."+$,P="error."+$,S="resize."+$,j="build."+$,A="built."+$,_="cropstart."+$,N="cropmove."+$,q="cropend."+$,G="crop."+$,Z="zoom."+$,J=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,Q=/^data\:/,K=/^data\:([^\;]+)\;base64,/,V=/^data\:image\/jpeg.*;base64,/,tt="preview",it="action",et="e",ot="w",at="s",st="n",nt="se",ht="sw",rt="ne",lt="nw",pt="all",ct="crop",dt="move",ut="zoom",gt="none",ft=t.isFunction(t("<canvas>")[0].getContext),mt=C&&/safari/i.test(C.userAgent)&&/apple computer/i.test(C.vendor),vt=Number,wt=Math.min,xt=Math.max,bt=Math.abs,Ct=Math.sin,Bt=Math.cos,yt=Math.sqrt,kt=Math.round,Dt=Math.floor,$t=String.fromCharCode;v.prototype={constructor:v,init:function(){var t,i=this.$element;if(i.is("img")){if(this.isImg=!0,this.originalUrl=t=i.attr("src"),!t)return;t=i.prop("src")}else i.is("canvas")&&ft&&(t=i[0].toDataURL());this.load(t)},trigger:function(i,e){var o=t.Event(i,e);return this.$element.trigger(o),o},load:function(i){var e,o,a=this.options,s=this.$element;if(i&&(s.one(j,a.build),!this.trigger(j).isDefaultPrevented())){if(this.url=i,this.image={},!a.checkOrientation||!B)return this.clone();if(e=t.proxy(this.read,this),Q.test(i))return V.test(i)?e(f(i)):this.clone();o=new XMLHttpRequest,o.onerror=o.onabort=t.proxy(function(){this.clone()},this),o.onload=function(){e(this.response)},o.open("get",i),o.responseType="arraybuffer",o.send()}},read:function(t){var i,e,o,a=this.options,s=g(t),n=this.image;if(s>1)switch(this.url=m(t),s){case 2:e=-1;break;case 3:i=-180;break;case 4:o=-1;break;case 5:i=90,o=-1;break;case 6:i=90;break;case 7:i=90,e=-1;break;case 8:i=-90}a.rotatable&&(n.rotate=i),a.scalable&&(n.scaleX=e,n.scaleY=o),this.clone()},clone:function(){var i,e,o=this.options,a=this.$element,r=this.url,l="";o.checkCrossOrigin&&s(r)&&(l=a.prop("crossOrigin"),l?i=r:(l="anonymous",i=n(r))),this.crossOrigin=l,this.crossOriginUrl=i,this.$clone=e=t("<img"+h(l)+' src="'+(i||r)+'">'),this.isImg?a[0].complete?this.start():a.one(z,t.proxy(this.start,this)):e.one(z,t.proxy(this.start,this)).one(P,t.proxy(this.stop,this)).addClass(M).insertAfter(a)},start:function(){var i=this.$element,e=this.$clone;this.isImg||(e.off(P,this.stop),i=e),r(i[0],t.proxy(function(i,e){t.extend(this.image,{naturalWidth:i,naturalHeight:e,aspectRatio:i/e}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var i,e,o,a=this.options,s=this.$element,n=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=s.parent(),this.$cropper=i=t(v.TEMPLATE),this.$canvas=i.find(".cropper-canvas").append(n),this.$dragBox=i.find(".cropper-drag-box"),this.$cropBox=e=i.find(".cropper-crop-box"),this.$viewBox=i.find(".cropper-view-box"),this.$face=o=e.find(".cropper-face"),s.addClass(L).after(i),this.isImg||n.removeClass(M),this.initPreview(),this.bind(),a.aspectRatio=xt(0,a.aspectRatio)||NaN,a.viewMode=xt(0,wt(3,kt(a.viewMode)))||0,a.autoCrop?(this.isCropped=!0,a.modal&&this.$dragBox.addClass(I)):e.addClass(L),a.guides||e.find(".cropper-dashed").addClass(L),a.center||e.find(".cropper-center").addClass(L),a.cropBoxMovable&&o.addClass(Y).data(it,pt),a.highlight||o.addClass(T),a.background&&i.addClass(R),a.cropBoxResizable||e.find(".cropper-line, .cropper-point").addClass(L),this.setDragMode(a.dragMode),this.render(),this.isBuilt=!0,this.setData(a.data),s.one(A,a.built),setTimeout(t.proxy(function(){this.trigger(A),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,i=this.$element,e=this.$container,o=this.$cropper;o.addClass(L),i.removeClass(L),o.css(this.container={width:xt(e.width(),vt(t.minContainerWidth)||200),height:xt(e.height(),vt(t.minContainerHeight)||100)}),i.addClass(L),o.removeClass(L)},initCanvas:function(){var i,e=this.options.viewMode,o=this.container,a=o.width,s=o.height,n=this.image,h=n.naturalWidth,r=n.naturalHeight,l=90===bt(n.rotate),p=l?r:h,c=l?h:r,d=p/c,u=a,g=s;s*d>a?3===e?u=s*d:g=a/d:3===e?g=a/d:u=s*d,i={naturalWidth:p,naturalHeight:c,aspectRatio:d,width:u,height:g},i.oldLeft=i.left=(a-u)/2,i.oldTop=i.top=(s-g)/2,this.canvas=i,this.isLimited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImage=t.extend({},n),this.initialCanvas=t.extend({},i)},limitCanvas:function(t,i){var e,o,a,s,n=this.options,h=n.viewMode,r=this.container,l=r.width,p=r.height,c=this.canvas,d=c.aspectRatio,u=this.cropBox,g=this.isCropped&&u;t&&(e=vt(n.minCanvasWidth)||0,o=vt(n.minCanvasHeight)||0,h&&(h>1?(e=xt(e,l),o=xt(o,p),3===h&&(o*d>e?e=o*d:o=e/d)):e?e=xt(e,g?u.width:0):o?o=xt(o,g?u.height:0):g&&(e=u.width,o=u.height,o*d>e?e=o*d:o=e/d)),e&&o?o*d>e?o=e/d:e=o*d:e?o=e/d:o&&(e=o*d),c.minWidth=e,c.minHeight=o,c.maxWidth=1/0,c.maxHeight=1/0),i&&(h?(a=l-c.width,s=p-c.height,c.minLeft=wt(0,a),c.minTop=wt(0,s),c.maxLeft=xt(0,a),c.maxTop=xt(0,s),g&&this.isLimited&&(c.minLeft=wt(u.left,u.left+u.width-c.width),c.minTop=wt(u.top,u.top+u.height-c.height),c.maxLeft=u.left,c.maxTop=u.top,2===h&&(c.width>=l&&(c.minLeft=wt(0,a),c.maxLeft=xt(0,a)),c.height>=p&&(c.minTop=wt(0,s),c.maxTop=xt(0,s))))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=l,c.maxTop=p))},renderCanvas:function(t){var i,e,o=this.canvas,a=this.image,s=a.rotate,n=a.naturalWidth,h=a.naturalHeight;this.isRotated&&(this.isRotated=!1,e=p({width:a.width,height:a.height,degree:s}),i=e.width/e.height,i!==o.aspectRatio&&(o.left-=(e.width-o.width)/2,o.top-=(e.height-o.height)/2,o.width=e.width,o.height=e.height,o.aspectRatio=i,o.naturalWidth=n,o.naturalHeight=h,s%180&&(e=p({width:n,height:h,degree:s}),o.naturalWidth=e.width,o.naturalHeight=e.height),this.limitCanvas(!0,!1))),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=wt(xt(o.width,o.minWidth),o.maxWidth),o.height=wt(xt(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.oldLeft=o.left=wt(xt(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=wt(xt(o.top,o.minTop),o.maxTop),this.$canvas.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(i){var e,o=this.canvas,a=this.image;a.rotate&&(e=p({width:o.width,height:o.height,degree:a.rotate,aspectRatio:a.aspectRatio},!0)),t.extend(a,e?{width:e.width,height:e.height,left:(o.width-e.width)/2,top:(o.height-e.height)/2}:{width:o.width,height:o.height,left:0,top:0}),this.$clone.css({width:a.width,height:a.height,marginLeft:a.left,marginTop:a.top,transform:l(a)}),i&&this.output()},initCropBox:function(){var i=this.options,e=this.canvas,o=i.aspectRatio,a=vt(i.autoCropArea)||.8,s={width:e.width,height:e.height};o&&(e.height*o>e.width?s.height=s.width/o:s.width=s.height*o),this.cropBox=s,this.limitCropBox(!0,!0),s.width=wt(xt(s.width,s.minWidth),s.maxWidth),s.height=wt(xt(s.height,s.minHeight),s.maxHeight),s.width=xt(s.minWidth,s.width*a),s.height=xt(s.minHeight,s.height*a),s.oldLeft=s.left=e.left+(e.width-s.width)/2,s.oldTop=s.top=e.top+(e.height-s.height)/2,this.initialCropBox=t.extend({},s)},limitCropBox:function(t,i){var e,o,a,s,n=this.options,h=n.aspectRatio,r=this.container,l=r.width,p=r.height,c=this.canvas,d=this.cropBox,u=this.isLimited;t&&(e=vt(n.minCropBoxWidth)||0,o=vt(n.minCropBoxHeight)||0,e=wt(e,l),o=wt(o,p),a=wt(l,u?c.width:l),s=wt(p,u?c.height:p),h&&(e&&o?o*h>e?o=e/h:e=o*h:e?o=e/h:o&&(e=o*h),s*h>a?s=a/h:a=s*h),d.minWidth=wt(e,a),d.minHeight=wt(o,s),d.maxWidth=a,d.maxHeight=s),i&&(u?(d.minLeft=xt(0,c.left),d.minTop=xt(0,c.top),d.maxLeft=wt(l,c.left+c.width)-d.width,d.maxTop=wt(p,c.top+c.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=l-d.width,d.maxTop=p-d.height))},renderCropBox:function(){var t=this.options,i=this.container,e=i.width,o=i.height,a=this.cropBox;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=wt(xt(a.width,a.minWidth),a.maxWidth),a.height=wt(xt(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.oldLeft=a.left=wt(xt(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=wt(xt(a.top,a.minTop),a.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data(it,a.width===e&&a.height===o?dt:pt),this.$cropBox.css({width:a.width,height:a.height,left:a.left,top:a.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger(G,this.getData()):this.isBuilt||this.$element.one(A,t.proxy(function(){this.trigger(G,this.getData())},this))},initPreview:function(){var i,e=h(this.crossOrigin),o=e?this.crossOriginUrl:this.url;this.$preview=t(this.options.preview),this.$clone2=i=t("<img"+e+' src="'+o+'">'),this.$viewBox.html(i),this.$preview.each(function(){var i=t(this);i.data(tt,{width:i.width(),height:i.height(),html:i.html()}),i.html("<img"+e+' src="'+o+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var i=t(this),e=i.data(tt);i.css({width:e.width,height:e.height}).html(e.html).removeData(tt)})},preview:function(){var i=this.image,e=this.canvas,o=this.cropBox,a=o.width,s=o.height,n=i.width,h=i.height,r=o.left-e.left-i.left,p=o.top-e.top-i.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:n,height:h,marginLeft:-r,marginTop:-p,transform:l(i)}),this.$preview.each(function(){var e=t(this),o=e.data(tt),c=o.width,d=o.height,u=c,g=d,f=1;a&&(f=c/a,g=s*f),s&&g>d&&(f=d/s,u=a*f,g=d),e.css({width:u,height:g}).find("img").css({width:n*f,height:h*f,marginLeft:-r*f,marginTop:-p*f,transform:l(i)})}))},bind:function(){var i=this.options,e=this.$element,o=this.$cropper;t.isFunction(i.cropstart)&&e.on(_,i.cropstart),t.isFunction(i.cropmove)&&e.on(N,i.cropmove),t.isFunction(i.cropend)&&e.on(q,i.cropend),t.isFunction(i.crop)&&e.on(G,i.crop),t.isFunction(i.zoom)&&e.on(Z,i.zoom),o.on(W,t.proxy(this.cropStart,this)),i.zoomable&&i.zoomOnWheel&&o.on(F,t.proxy(this.wheel,this)),i.toggleDragModeOnDblclick&&o.on(O,t.proxy(this.dblclick,this)),x.on(H,this._cropMove=a(this.cropMove,this)).on(E,this._cropEnd=a(this.cropEnd,this)),i.responsive&&w.on(S,this._resize=a(this.resize,this))},unbind:function(){var i=this.options,e=this.$element,o=this.$cropper;t.isFunction(i.cropstart)&&e.off(_,i.cropstart),t.isFunction(i.cropmove)&&e.off(N,i.cropmove),t.isFunction(i.cropend)&&e.off(q,i.cropend),t.isFunction(i.crop)&&e.off(G,i.crop),t.isFunction(i.zoom)&&e.off(Z,i.zoom),o.off(W,this.cropStart),i.zoomable&&i.zoomOnWheel&&o.off(F,this.wheel),i.toggleDragModeOnDblclick&&o.off(O,this.dblclick),x.off(H,this._cropMove).off(E,this._cropEnd),i.responsive&&w.off(S,this._resize)},resize:function(){var i,e,o,a=this.options.restore,s=this.$container,n=this.container;!this.isDisabled&&n&&(o=s.width()/n.width,1===o&&s.height()===n.height||(a&&(i=this.getCanvasData(),e=this.getCropBoxData()),this.render(),a&&(this.setCanvasData(t.each(i,function(t,e){i[t]=e*o})),this.setCropBoxData(t.each(e,function(t,i){e[t]=i*o})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(X)?this.setDragMode(dt):this.setDragMode(ct))},wheel:function(i){var e=i.originalEvent||i,o=vt(this.options.wheelZoomRatio)||.1,a=1;this.isDisabled||(i.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(t.proxy(function(){this.wheeling=!1},this),50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*o,i)))},cropStart:function(i){var e,o,a=this.options,s=i.originalEvent,n=s&&s.touches,h=i;if(!this.isDisabled){if(n){if(e=n.length,e>1){if(!a.zoomable||!a.zoomOnTouch||2!==e)return;h=n[1],this.startX2=h.pageX,this.startY2=h.pageY,o=ut}h=n[0]}if(o=o||t(h.target).data(it),J.test(o)){if(this.trigger(_,{originalEvent:s,action:o}).isDefaultPrevented())return;i.preventDefault(),this.action=o,this.cropping=!1,this.startX=h.pageX||s&&s.pageX,this.startY=h.pageY||s&&s.pageY,o===ct&&(this.cropping=!0,this.$dragBox.addClass(I))}}},cropMove:function(t){var i,e=this.options,o=t.originalEvent,a=o&&o.touches,s=t,n=this.action;if(!this.isDisabled){if(a){if(i=a.length,i>1){if(!e.zoomable||!e.zoomOnTouch||2!==i)return;s=a[1],this.endX2=s.pageX,this.endY2=s.pageY}s=a[0]}if(n){if(this.trigger(N,{originalEvent:o,action:n}).isDefaultPrevented())return;t.preventDefault(),this.endX=s.pageX||o&&o.pageX,this.endY=s.pageY||o&&o.pageY,this.change(s.shiftKey,n===ut?t:null)}}},cropEnd:function(t){var i=t.originalEvent,e=this.action;this.isDisabled||e&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(I,this.isCropped&&this.options.modal)),this.action="",this.trigger(q,{originalEvent:i,action:e}))},change:function(t,i){var e,o,a=this.options,s=a.aspectRatio,n=this.action,h=this.container,r=this.canvas,l=this.cropBox,p=l.width,c=l.height,d=l.left,u=l.top,g=d+p,f=u+c,m=0,v=0,w=h.width,x=h.height,b=!0;switch(!s&&t&&(s=p&&c?p/c:1),this.limited&&(m=l.minLeft,v=l.minTop,w=m+wt(h.width,r.left+r.width),x=v+wt(h.height,r.top+r.height)),o={x:this.endX-this.startX,y:this.endY-this.startY},s&&(o.X=o.y*s,o.Y=o.x/s),n){case pt:d+=o.x,u+=o.y;break;case et:if(o.x>=0&&(g>=w||s&&(u<=v||f>=x))){b=!1;break}p+=o.x,s&&(c=p/s,u-=o.Y/2),p<0&&(n=ot,p=0);break;case st:if(o.y<=0&&(u<=v||s&&(d<=m||g>=w))){b=!1;break}c-=o.y,u+=o.y,s&&(p=c*s,d+=o.X/2),c<0&&(n=at,c=0);break;case ot:if(o.x<=0&&(d<=m||s&&(u<=v||f>=x))){b=!1;break}p-=o.x,d+=o.x,s&&(c=p/s,u+=o.Y/2),p<0&&(n=et,p=0);break;case at:if(o.y>=0&&(f>=x||s&&(d<=m||g>=w))){b=!1;break}c+=o.y,s&&(p=c*s,d-=o.X/2),c<0&&(n=st,c=0);break;case rt:if(s){if(o.y<=0&&(u<=v||g>=w)){b=!1;break}c-=o.y,u+=o.y,p=c*s}else o.x>=0?g<w?p+=o.x:o.y<=0&&u<=v&&(b=!1):p+=o.x,o.y<=0?u>v&&(c-=o.y,u+=o.y):(c-=o.y,u+=o.y);p<0&&c<0?(n=ht,c=0,p=0):p<0?(n=lt,p=0):c<0&&(n=nt,c=0);break;case lt:if(s){if(o.y<=0&&(u<=v||d<=m)){b=!1;break}c-=o.y,u+=o.y,p=c*s,d+=o.X}else o.x<=0?d>m?(p-=o.x,d+=o.x):o.y<=0&&u<=v&&(b=!1):(p-=o.x,d+=o.x),o.y<=0?u>v&&(c-=o.y,u+=o.y):(c-=o.y,u+=o.y);p<0&&c<0?(n=nt,c=0,p=0):p<0?(n=rt,p=0):c<0&&(n=ht,c=0);break;case ht:if(s){if(o.x<=0&&(d<=m||f>=x)){b=!1;break}p-=o.x,d+=o.x,c=p/s}else o.x<=0?d>m?(p-=o.x,d+=o.x):o.y>=0&&f>=x&&(b=!1):(p-=o.x,d+=o.x),o.y>=0?f<x&&(c+=o.y):c+=o.y;p<0&&c<0?(n=rt,c=0,p=0):p<0?(n=nt,p=0):c<0&&(n=lt,c=0);break;case nt:if(s){if(o.x>=0&&(g>=w||f>=x)){b=!1;break}p+=o.x,c=p/s}else o.x>=0?g<w?p+=o.x:o.y>=0&&f>=x&&(b=!1):p+=o.x,o.y>=0?f<x&&(c+=o.y):c+=o.y;p<0&&c<0?(n=lt,c=0,p=0):p<0?(n=ht,p=0):c<0&&(n=rt,c=0);break;case dt:this.move(o.x,o.y),b=!1;break;case ut:this.zoom(function(t,i,e,o){var a=yt(t*t+i*i),s=yt(e*e+o*o);return(s-a)/a}(bt(this.startX-this.startX2),bt(this.startY-this.startY2),bt(this.endX-this.endX2),bt(this.endY-this.endY2)),i),this.startX2=this.endX2,this.startY2=this.endY2,b=!1;break;case ct:if(!o.x||!o.y){b=!1;break}e=this.$cropper.offset(),d=this.startX-e.left,u=this.startY-e.top,p=l.minWidth,c=l.minHeight,o.x>0?n=o.y>0?nt:rt:o.x<0&&(d-=p,n=o.y>0?ht:lt),o.y<0&&(u-=c),this.isCropped||(this.$cropBox.removeClass(L),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(l.width=p,l.height=c,l.left=d,l.top=u,this.action=n,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(I),this.$cropBox.removeClass(L)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(I),this.$cropBox.addClass(L))},replace:function(t,i){!this.isDisabled&&t&&(this.isImg&&this.$element.attr("src",t),i?(this.url=t,this.$clone.attr("src",t),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(U))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(U))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(L)):this.isImg?t.off(z,this.start):this.$clone&&this.$clone.remove(),t.removeData($)},move:function(t,i){var o=this.canvas;this.moveTo(e(t)?t:o.left+vt(t),e(i)?i:o.top+vt(i))},moveTo:function(t,o){var a=this.canvas,s=!1;e(o)&&(o=t),t=vt(t),o=vt(o),this.isBuilt&&!this.isDisabled&&this.options.movable&&(i(t)&&(a.left=t,s=!0),i(o)&&(a.top=o,s=!0),s&&this.renderCanvas(!0))},zoom:function(t,i){var e=this.canvas;t=vt(t),t=t<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,i)},zoomTo:function(t,i){var e,o,a,s,n,h=this.options,r=this.canvas,l=r.width,p=r.height,c=r.naturalWidth,u=r.naturalHeight;if(t=vt(t),t>=0&&this.isBuilt&&!this.isDisabled&&h.zoomable){if(o=c*t,a=u*t,i&&(e=i.originalEvent),this.trigger(Z,{originalEvent:e,oldRatio:l/c,ratio:o/c}).isDefaultPrevented())return;e?(s=this.$cropper.offset(),n=e.touches?d(e.touches):{pageX:i.pageX||e.pageX||0,pageY:i.pageY||e.pageY||0},r.left-=(o-l)*((n.pageX-s.left-r.left)/l),r.top-=(a-p)*((n.pageY-s.top-r.top)/p)):(r.left-=(o-l)/2,r.top-=(a-p)/2),r.width=o,r.height=a,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+vt(t))},rotateTo:function(t){t=vt(t),i(t)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,o){var a=this.image,s=!1;e(o)&&(o=t),t=vt(t),o=vt(o),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(i(t)&&(a.scaleX=t,s=!0),i(o)&&(a.scaleY=o,s=!0),s&&this.renderImage(!0))},scaleX:function(t){var e=this.image.scaleY;this.scale(t,i(e)?e:1)},scaleY:function(t){var e=this.image.scaleX;this.scale(i(e)?e:1,t)},getData:function(i){var e,o,a=this.options,s=this.image,n=this.canvas,h=this.cropBox;return this.isBuilt&&this.isCropped?(o={x:h.left-n.left,y:h.top-n.top,width:h.width,height:h.height},e=s.width/s.naturalWidth,t.each(o,function(t,a){a/=e,o[t]=i?kt(a):a})):o={x:0,y:0,width:0,height:0},a.rotatable&&(o.rotate=s.rotate||0),a.scalable&&(o.scaleX=s.scaleX||1,o.scaleY=s.scaleY||1),o},setData:function(e){var o,a,s,n=this.options,h=this.image,r=this.canvas,l={};t.isFunction(e)&&(e=e.call(this.element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(e)&&(n.rotatable&&i(e.rotate)&&e.rotate!==h.rotate&&(h.rotate=e.rotate,this.isRotated=o=!0),n.scalable&&(i(e.scaleX)&&e.scaleX!==h.scaleX&&(h.scaleX=e.scaleX,a=!0),i(e.scaleY)&&e.scaleY!==h.scaleY&&(h.scaleY=e.scaleY,a=!0)),o?this.renderCanvas():a&&this.renderImage(),s=h.width/h.naturalWidth,i(e.x)&&(l.left=e.x*s+r.left),i(e.y)&&(l.top=e.y*s+r.top),i(e.width)&&(l.width=e.width*s),i(e.height)&&(l.height=e.height*s),this.setCropBoxData(l))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,e={};return this.isBuilt&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,o){e[o]=i[o]}),e},setCanvasData:function(e){var o=this.canvas,a=o.aspectRatio;t.isFunction(e)&&(e=e.call(this.$element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(e)&&(i(e.left)&&(o.left=e.left),i(e.top)&&(o.top=e.top),i(e.width)?(o.width=e.width,o.height=e.width/a):i(e.height)&&(o.height=e.height,o.width=e.height*a),this.renderCanvas(!0))},getCropBoxData:function(){var t,i=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(e){var o,a,s=this.cropBox,n=this.options.aspectRatio;t.isFunction(e)&&(e=e.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&t.isPlainObject(e)&&(i(e.left)&&(s.left=e.left),i(e.top)&&(s.top=e.top),i(e.width)&&(o=!0,s.width=e.width),i(e.height)&&(a=!0,s.height=e.height),n&&(o?s.height=s.width/n:a&&(s.width=s.height*n)),this.renderCropBox())},getCroppedCanvas:function(i){var e,o,a,s,n,h,r,l,p,d,u;if(this.isBuilt&&this.isCropped&&ft)return t.isPlainObject(i)||(i={}),u=this.getData(),e=u.width,o=u.height,l=e/o,t.isPlainObject(i)&&(n=i.width,h=i.height,n?(h=n/l,r=n/e):h&&(n=h*l,r=h/o)),a=Dt(n||e),s=Dt(h||o),p=t("<canvas>")[0],p.width=a,p.height=s,d=p.getContext("2d"),i.fillColor&&(d.fillStyle=i.fillColor,d.fillRect(0,0,a,s)),d.drawImage.apply(d,function(){var t,i,a,s,n,h,l=c(this.$clone[0],this.image),p=l.width,d=l.height,g=this.canvas,f=[l],m=u.x+g.naturalWidth*(bt(u.scaleX||1)-1)/2,v=u.y+g.naturalHeight*(bt(u.scaleY||1)-1)/2;return m<=-e||m>p?m=t=a=n=0:m<=0?(a=-m,m=0,t=n=wt(p,e+m)):m<=p&&(a=0,t=n=wt(e,p-m)),t<=0||v<=-o||v>d?v=i=s=h=0:v<=0?(s=-v,v=0,i=h=wt(d,o+v)):v<=d&&(s=0,i=h=wt(o,d-v)),f.push(Dt(m),Dt(v),Dt(t),Dt(i)),r&&(a*=r,s*=r,n*=r,h*=r),n>0&&h>0&&f.push(Dt(a),Dt(s),Dt(n),Dt(h)),f}.call(this)),p},setAspectRatio:function(t){var i=this.options;this.isDisabled||e(t)||(i.aspectRatio=xt(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var i,e,o=this.options;this.isLoaded&&!this.isDisabled&&(i=t===ct,e=o.movable&&t===dt,t=i||e?t:gt,this.$dragBox.data(it,t).toggleClass(X,i).toggleClass(Y,e),o.cropBoxMovable||this.$face.data(it,t).toggleClass(X,i).toggleClass(Y,e))}},v.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},v.setDefaults=function(i){t.extend(v.DEFAULTS,i)},v.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',v.other=t.fn.cropper,t.fn.cropper=function(i){var a,s=o(arguments,1);return this.each(function(){var e,o,n=t(this),h=n.data($);if(!h){if(/destroy/.test(i))return;e=t.extend({},n.data(),t.isPlainObject(i)&&i),n.data($,h=new v(this,e))}"string"==typeof i&&t.isFunction(o=h[i])&&(a=o.apply(h,s))}),e(a)?this:a},t.fn.cropper.Constructor=v,t.fn.cropper.setDefaults=v.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=v.other,this}})},dYvO:function(t,i,e){(function(t){function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();!function(o){var a=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.form;i(this,o),this.onSubmitForm=this.onSubmitForm.bind(this),this.form=a||t(".edit-user"),this.bindEvents(),this.initAvatarGlCrop()}return e(o,[{key:"initAvatarGlCrop",value:function(){var i={filename:".js-avatar-filename",previewImage:".avatar-image .avatar",modalCrop:".modal-profile-crop",pickImageEl:".js-choose-user-avatar-button",uploadImageBtn:".js-upload-user-avatar",modalCropImg:".modal-profile-crop-image"};this.avatarGlCrop=t(".js-user-avatar-input").glCrop(i).data("glcrop")}},{key:"bindEvents",value:function(){t(".js-preferences-form").on("change.preference","input[type=radio]",this.submitForm),t("#user_notification_email").on("change",this.submitForm),t(".update-username").on("ajax:before",this.beforeUpdateUsername),t(".update-username").on("ajax:complete",this.afterUpdateUsername),t(".update-notifications").on("ajax:success",this.onUpdateNotifs),this.form.on("submit",this.onSubmitForm)}},{key:"submitForm",value:function(){return t(this).parents("form").submit()}},{key:"onSubmitForm",value:function(t){return t.preventDefault(),this.saveForm()}},{key:"beforeUpdateUsername",value:function(){t(".loading-username",this).removeClass("hidden")}},{key:"afterUpdateUsername",value:function(){t(".loading-username",this).addClass("hidden"),t("button[type=submit]",this).enable()}},{key:"onUpdateNotifs",value:function(t,i){return i.saved?new Flash("Notification settings saved","notice"):new Flash("Failed to save new settings","alert")}},{key:"saveForm",value:function(){var i=this,e=new FormData(this.form[0]),o=this.avatarGlCrop.getBlob();return null!=o&&e.append("user[avatar]",o,"avatar.png"),t.ajax({url:this.form.attr("action"),type:this.form.attr("method"),data:e,dataType:"json",processData:!1,contentType:!1,success:function(t){return new Flash(t.message,"notice")},error:function(t){return new Flash(t.responseJSON.message,"alert")},complete:function(){return window.scrollTo(0,0),i.form.find(":input[disabled]").enable()}})}}]),o}();t(function(){if(t(document).on("input.ssh_key","#key_key",function(){var i=t("#key_title"),e=t(this).val().match(/^\S+ \S+ (.+)\n?$/);if(e&&e.length>1)return i.val(e[1]).change()}),"profiles"===o.utils.getPagePath())return new a})}(window.gl||(window.gl={}))}).call(i,e("lwLq"))}},["RUZQ"]);
//# sourceMappingURL=profile.bfc54bd40bc9a6938148.bundle.js.map