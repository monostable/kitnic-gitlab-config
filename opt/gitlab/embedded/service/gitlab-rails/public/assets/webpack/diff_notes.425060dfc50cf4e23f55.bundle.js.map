{"version":3,"sources":["webpack:///diff_notes.425060dfc50cf4e23f55.bundle.js","webpack:///./diff_notes/diff_notes_bundle.js","webpack:///./diff_notes/services/resolve.js","webpack:///./diff_notes/components/resolve_btn.js","webpack:///./diff_notes/mixins/discussion.js","webpack:///./diff_notes/components/diff_note_avatars.js","webpack:///./diff_notes/components/jump_to_discussion.js","webpack:///./diff_notes/models/discussion.js","webpack:///./diff_notes/components/resolve_count.js","webpack:///./diff_notes/models/note.js","webpack:///./diff_notes/icons/collapse_icon.svg","webpack:///./diff_notes/components/comment_resolve_btn.js","webpack:///./diff_notes/components/resolve_discussion_btn.js","webpack:///./diff_notes/stores/comments.js"],"names":["webpackJsonp","EuiY","module","exports","__webpack_require__","$","Vue","projectPath","document","querySelector","dataset","COMPONENT_SELECTOR","window","gl","diffNoteApps","ResolveService","DiffNotesResolveServiceClass","diffNotesCompileComponents","each","tmp","extend","template","this","get","outerHTML","tmpApp","$mount","replaceWith","$el","$components","filter","closest","length","$this","noteId","attr","el","components","resolve-count","ResolveCount","call","G+9o","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","use","ResolveServiceClass","root","noteResource","resource","discussionResource","value","save","delete","mergeRequestId","discussionId","discussion","CommentsStore","state","isResolved","promise","unResolveAll","resolveAll","then","response","loading","status","data","json","resolved_by","unResolveAllNotes","resolveAllNotes","updateHeadline","Flash","MU9e","ResolveBtn","Number","String","resolved","Boolean","canResolve","resolvedBy","authorName","authorAvatar","noteTruncated","discussions","note","watch","handler","deep","computed","buttonText","resolvedByName","methods","updateTooltip","_this","$nextTick","$refs","button","tooltip","resolve","_this2","unresolve","update","mounted","container","beforeDestroy","created","create","getNote","component","SVCF","w","DiscussionMixins","discussionCount","keys","resolvedDiscussionCount","resolvedCount","unresolvedDiscussionCount","unresolvedCount","TP7M","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_0_vue___default","n","__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__","__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default","DiffNoteAvatars","a","isVisible","lineType","storeState","shownAvatars","collapseIcon","addNoCommentClass","setDiscussionVisible","hasClass","on","destroyed","off","notesSubset","_this3","notes","slice","map","extraNotesTitle","extra","notesCount","moreText","plusSign","clickedAvatar","e","_this4","addDiffNote","toggleDiscussionsToggleState","toggleClass","nextUntil","$notesHolders","find","$visibleNotesHolders","$toggleDiffCommentsBtn","id","is","WYUY","JumpToDiscussion","mixins","allResolved","showButton","lastResolvedId","lastId","jumpToNextUnresolvedDiscussion","discussionsSelector","discussionIdsInScope","firstUnresolvedDiscussionId","nextUnresolvedDiscussionId","activeTab","mrTabs","currentAction","hasDiscussionsToJumpTo","jumpToFirstDiscussion","discussionIdsForElements","elements","toArray","activateTab","currentDiscussionFound","$target","trigger","show","prevEl","prev","scrollTo","offset","ZZAo","DiscussionModel","noteObj","set","NoteModel","discussionSelector","$discussionHeadline","discussion_headline_html","append","utils","localTimeAgo","remove","cRac","loggedOut","resolvedCountText","epgj","gL/p","rK+X","CommentAndResolveBtn","textareaIsEmpty","isResolvable","isDiscussionResolved","$textarea","val","tExy","ResolveDiscussionBtn","toggleResolveForDiscussion","createDiscussion","zKIA","undefined","createNote","deleteNote","unresolvedDiscussionIds","ids","push"],"mappings":"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","file":"diff_notes.425060dfc50cf4e23f55.bundle.js","sourcesContent":["webpackJsonp([4,25,26],{\n\n/***/ \"EuiY\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/* eslint-disable func-names, comma-dangle, new-cap, no-new, max-len */\n/* global Vue */\n/* global ResolveCount */\n\nvar Vue = __webpack_require__(\"Eruj\");\n__webpack_require__(\"ZZAo\");\n__webpack_require__(\"epgj\");\n__webpack_require__(\"zKIA\");\n__webpack_require__(\"G+9o\");\n__webpack_require__(\"SVCF\");\n__webpack_require__(\"rK+X\");\n__webpack_require__(\"WYUY\");\n__webpack_require__(\"MU9e\");\n__webpack_require__(\"cRac\");\n__webpack_require__(\"tExy\");\n__webpack_require__(\"TP7M\");\n\n$(function () {\n  var projectPath = document.querySelector('.merge-request').dataset.projectPath;\n  var COMPONENT_SELECTOR = 'resolve-btn, resolve-discussion-btn, jump-to-discussion, comment-and-resolve-btn';\n\n  window.gl = window.gl || {};\n  window.gl.diffNoteApps = {};\n\n  window.ResolveService = new gl.DiffNotesResolveServiceClass(projectPath);\n\n  gl.diffNotesCompileComponents = function () {\n    $('diff-note-avatars').each(function () {\n      var tmp = Vue.extend({\n        template: $(this).get(0).outerHTML\n      });\n      var tmpApp = new tmp().$mount();\n\n      $(this).replaceWith(tmpApp.$el);\n    });\n\n    var $components = $(COMPONENT_SELECTOR).filter(function () {\n      return $(this).closest('resolve-count').length !== 1;\n    });\n\n    if ($components) {\n      $components.each(function () {\n        var $this = $(this);\n        var noteId = $this.attr(':note-id');\n        var tmp = Vue.extend({\n          template: $this.get(0).outerHTML\n        });\n        var tmpApp = new tmp().$mount();\n\n        if (noteId) {\n          gl.diffNoteApps['note_' + noteId] = tmpApp;\n        }\n\n        $this.replaceWith(tmpApp.$el);\n      });\n    }\n  };\n\n  gl.diffNotesCompileComponents();\n\n  new Vue({\n    el: '#resolve-count-app',\n    components: {\n      'resolve-count': ResolveCount\n    }\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"G+9o\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable class-methods-use-this, one-var, camelcase, no-new, comma-dangle, no-param-reassign, max-len */\n/* global Flash */\n/* global CommentsStore */\n\nvar Vue = window.Vue = __webpack_require__(\"Eruj\");\nwindow.Vue.use(__webpack_require__(\"7UJR\"));\n__webpack_require__(\"wFzz\");\n\n(function () {\n  window.gl = window.gl || {};\n\n  var ResolveServiceClass = function () {\n    function ResolveServiceClass(root) {\n      _classCallCheck(this, ResolveServiceClass);\n\n      this.noteResource = Vue.resource(root + '/notes{/noteId}/resolve');\n      this.discussionResource = Vue.resource(root + '/merge_requests{/mergeRequestId}/discussions{/discussionId}/resolve');\n    }\n\n    _createClass(ResolveServiceClass, [{\n      key: 'resolve',\n      value: function resolve(noteId) {\n        return this.noteResource.save({ noteId: noteId }, {});\n      }\n    }, {\n      key: 'unresolve',\n      value: function unresolve(noteId) {\n        return this.noteResource.delete({ noteId: noteId }, {});\n      }\n    }, {\n      key: 'toggleResolveForDiscussion',\n      value: function toggleResolveForDiscussion(mergeRequestId, discussionId) {\n        var discussion = CommentsStore.state[discussionId];\n        var isResolved = discussion.isResolved();\n        var promise = void 0;\n\n        if (isResolved) {\n          promise = this.unResolveAll(mergeRequestId, discussionId);\n        } else {\n          promise = this.resolveAll(mergeRequestId, discussionId);\n        }\n\n        promise.then(function (response) {\n          discussion.loading = false;\n\n          if (response.status === 200) {\n            var data = response.json();\n            var resolved_by = data ? data.resolved_by : null;\n\n            if (isResolved) {\n              discussion.unResolveAllNotes();\n            } else {\n              discussion.resolveAllNotes(resolved_by);\n            }\n\n            discussion.updateHeadline(data);\n          } else {\n            new Flash('An error occurred when trying to resolve a discussion. Please try again.', 'alert');\n          }\n        });\n      }\n    }, {\n      key: 'resolveAll',\n      value: function resolveAll(mergeRequestId, discussionId) {\n        var discussion = CommentsStore.state[discussionId];\n\n        discussion.loading = true;\n\n        return this.discussionResource.save({\n          mergeRequestId: mergeRequestId,\n          discussionId: discussionId\n        }, {});\n      }\n    }, {\n      key: 'unResolveAll',\n      value: function unResolveAll(mergeRequestId, discussionId) {\n        var discussion = CommentsStore.state[discussionId];\n\n        discussion.loading = true;\n\n        return this.discussionResource.delete({\n          mergeRequestId: mergeRequestId,\n          discussionId: discussionId\n        }, {});\n      }\n    }]);\n\n    return ResolveServiceClass;\n  }();\n\n  gl.DiffNotesResolveServiceClass = ResolveServiceClass;\n})();\n\n/***/ }),\n\n/***/ \"MU9e\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/* eslint-disable comma-dangle, object-shorthand, func-names, quote-props, no-else-return, camelcase, no-new, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n/* global Flash */\nvar Vue = __webpack_require__(\"Eruj\");\n\n(function () {\n  var ResolveBtn = Vue.extend({\n    props: {\n      noteId: Number,\n      discussionId: String,\n      resolved: Boolean,\n      canResolve: Boolean,\n      resolvedBy: String,\n      authorName: String,\n      authorAvatar: String,\n      noteTruncated: String\n    },\n    data: function data() {\n      return {\n        discussions: CommentsStore.state,\n        loading: false,\n        note: {}\n      };\n    },\n    watch: {\n      'discussions': {\n        handler: 'updateTooltip',\n        deep: true\n      }\n    },\n    computed: {\n      discussion: function discussion() {\n        return this.discussions[this.discussionId];\n      },\n      buttonText: function buttonText() {\n        if (this.isResolved) {\n          return 'Resolved by ' + this.resolvedByName;\n        } else if (this.canResolve) {\n          return 'Mark as resolved';\n        } else {\n          return 'Unable to resolve';\n        }\n      },\n      isResolved: function isResolved() {\n        if (this.note) {\n          return this.note.resolved;\n        } else {\n          return false;\n        }\n      },\n      resolvedByName: function resolvedByName() {\n        return this.note.resolved_by;\n      }\n    },\n    methods: {\n      updateTooltip: function updateTooltip() {\n        var _this = this;\n\n        this.$nextTick(function () {\n          $(_this.$refs.button).tooltip('hide').tooltip('fixTitle');\n        });\n      },\n      resolve: function resolve() {\n        var _this2 = this;\n\n        if (!this.canResolve) return;\n\n        var promise = void 0;\n        this.loading = true;\n\n        if (this.isResolved) {\n          promise = ResolveService.unresolve(this.noteId);\n        } else {\n          promise = ResolveService.resolve(this.noteId);\n        }\n\n        promise.then(function (response) {\n          _this2.loading = false;\n\n          if (response.status === 200) {\n            var data = response.json();\n            var resolved_by = data ? data.resolved_by : null;\n\n            CommentsStore.update(_this2.discussionId, _this2.noteId, !_this2.isResolved, resolved_by);\n            _this2.discussion.updateHeadline(data);\n          } else {\n            new Flash('An error occurred when trying to resolve a comment. Please try again.', 'alert');\n          }\n\n          _this2.updateTooltip();\n        });\n      }\n    },\n    mounted: function mounted() {\n      $(this.$refs.button).tooltip({\n        container: 'body'\n      });\n    },\n    beforeDestroy: function beforeDestroy() {\n      CommentsStore.delete(this.discussionId, this.noteId);\n    },\n    created: function created() {\n      CommentsStore.create({\n        discussionId: this.discussionId,\n        noteId: this.noteId,\n        canResolve: this.canResolve,\n        resolved: this.resolved,\n        resolvedBy: this.resolvedBy,\n        authorName: this.authorName,\n        authorAvatar: this.authorAvatar,\n        noteTruncated: this.noteTruncated\n      });\n\n      this.note = this.discussion.getNote(this.noteId);\n    }\n  });\n\n  Vue.component('resolve-btn', ResolveBtn);\n})();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"SVCF\":\n/***/ (function(module, exports) {\n\n/* eslint-disable object-shorthand, func-names, guard-for-in, no-restricted-syntax, comma-dangle, no-param-reassign, max-len */\n\n(function (w) {\n  w.DiscussionMixins = {\n    computed: {\n      discussionCount: function discussionCount() {\n        return Object.keys(this.discussions).length;\n      },\n      resolvedDiscussionCount: function resolvedDiscussionCount() {\n        var resolvedCount = 0;\n\n        for (var discussionId in this.discussions) {\n          var discussion = this.discussions[discussionId];\n\n          if (discussion.isResolved()) {\n            resolvedCount += 1;\n          }\n        }\n\n        return resolvedCount;\n      },\n      unresolvedDiscussionCount: function unresolvedDiscussionCount() {\n        var unresolvedCount = 0;\n\n        for (var discussionId in this.discussions) {\n          var discussion = this.discussions[discussionId];\n\n          if (!discussion.isResolved()) {\n            unresolvedCount += 1;\n          }\n        }\n\n        return unresolvedCount;\n      }\n    }\n  };\n})(window);\n\n/***/ }),\n\n/***/ \"TP7M\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"Eruj\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__ = __webpack_require__(\"gL/p\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg__);\n/* global CommentsStore Cookies notes */\n\n\n\n(function () {\n  var DiffNoteAvatars = __WEBPACK_IMPORTED_MODULE_0_vue___default.a.extend({\n    props: ['discussionId'],\n    data: function data() {\n      return {\n        isVisible: false,\n        lineType: '',\n        storeState: CommentsStore.state,\n        shownAvatars: 3,\n        collapseIcon: __WEBPACK_IMPORTED_MODULE_1__icons_collapse_icon_svg___default.a\n      };\n    },\n\n    template: '\\n      <div class=\"diff-comment-avatar-holders\"\\n        v-show=\"notesCount !== 0\">\\n        <div v-if=\"!isVisible\">\\n          <img v-for=\"note in notesSubset\"\\n            class=\"avatar diff-comment-avatar has-tooltip js-diff-comment-avatar\"\\n            width=\"19\"\\n            height=\"19\"\\n            role=\"button\"\\n            data-container=\"body\"\\n            data-placement=\"top\"\\n            :data-line-type=\"lineType\"\\n            :title=\"note.authorName + \\': \\' + note.noteTruncated\"\\n            :src=\"note.authorAvatar\"\\n            @click=\"clickedAvatar($event)\" />\\n          <span v-if=\"notesCount > shownAvatars\"\\n            class=\"diff-comments-more-count has-tooltip js-diff-comment-avatar\"\\n            data-container=\"body\"\\n            data-placement=\"top\"\\n            ref=\"extraComments\"\\n            role=\"button\"\\n            :data-line-type=\"lineType\"\\n            :title=\"extraNotesTitle\"\\n            @click=\"clickedAvatar($event)\">{{ moreText }}</span>\\n        </div>\\n        <button class=\"diff-notes-collapse js-diff-comment-avatar\"\\n          type=\"button\"\\n          aria-label=\"Show comments\"\\n          :data-line-type=\"lineType\"\\n          @click=\"clickedAvatar($event)\"\\n          v-if=\"isVisible\"\\n          v-html=\"collapseIcon\">\\n        </button>\\n      </div>\\n    ',\n    mounted: function mounted() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.addNoCommentClass();\n        _this.setDiscussionVisible();\n\n        _this.lineType = $(_this.$el).closest('.diff-line-num').hasClass('old_line') ? 'old' : 'new';\n      });\n\n      $(document).on('toggle.comments', function () {\n        _this.$nextTick(function () {\n          _this.setDiscussionVisible();\n        });\n      });\n    },\n    destroyed: function destroyed() {\n      $(document).off('toggle.comments');\n    },\n\n    watch: {\n      storeState: {\n        handler: function handler() {\n          var _this2 = this;\n\n          this.$nextTick(function () {\n            $('.has-tooltip', _this2.$el).tooltip('fixTitle');\n\n            // We need to add/remove a class to an element that is outside the Vue instance\n            _this2.addNoCommentClass();\n          });\n        },\n\n        deep: true\n      }\n    },\n    computed: {\n      notesSubset: function notesSubset() {\n        var _this3 = this;\n\n        var notes = [];\n\n        if (this.discussion) {\n          notes = Object.keys(this.discussion.notes).slice(0, this.shownAvatars).map(function (noteId) {\n            return _this3.discussion.notes[noteId];\n          });\n        }\n\n        return notes;\n      },\n      extraNotesTitle: function extraNotesTitle() {\n        if (this.discussion) {\n          var extra = this.discussion.notesCount() - this.shownAvatars;\n\n          return extra + ' more comment' + (extra > 1 ? 's' : '');\n        }\n\n        return '';\n      },\n      discussion: function discussion() {\n        return this.storeState[this.discussionId];\n      },\n      notesCount: function notesCount() {\n        if (this.discussion) {\n          return this.discussion.notesCount();\n        }\n\n        return 0;\n      },\n      moreText: function moreText() {\n        var plusSign = this.notesCount < 100 ? '+' : '';\n\n        return '' + plusSign + (this.notesCount - this.shownAvatars);\n      }\n    },\n    methods: {\n      clickedAvatar: function clickedAvatar(e) {\n        var _this4 = this;\n\n        notes.addDiffNote(e);\n\n        // Toggle the active state of the toggle all button\n        this.toggleDiscussionsToggleState();\n\n        this.$nextTick(function () {\n          _this4.setDiscussionVisible();\n\n          $('.has-tooltip', _this4.$el).tooltip('fixTitle');\n          $('.has-tooltip', _this4.$el).tooltip('hide');\n        });\n      },\n      addNoCommentClass: function addNoCommentClass() {\n        var notesCount = this.notesCount;\n\n        $(this.$el).closest('.js-avatar-container').toggleClass('js-no-comment-btn', notesCount > 0).nextUntil('.js-avatar-container').toggleClass('js-no-comment-btn', notesCount > 0);\n      },\n      toggleDiscussionsToggleState: function toggleDiscussionsToggleState() {\n        var $notesHolders = $(this.$el).closest('.code').find('.notes_holder');\n        var $visibleNotesHolders = $notesHolders.filter(':visible');\n        var $toggleDiffCommentsBtn = $(this.$el).closest('.diff-file').find('.js-toggle-diff-comments');\n\n        $toggleDiffCommentsBtn.toggleClass('active', $notesHolders.length === $visibleNotesHolders.length);\n      },\n      setDiscussionVisible: function setDiscussionVisible() {\n        this.isVisible = $('.diffs .notes[data-discussion-id=\"' + this.discussion.id + '\"]').is(':visible');\n      }\n    }\n  });\n\n  __WEBPACK_IMPORTED_MODULE_0_vue___default.a.component('diff-note-avatars', DiffNoteAvatars);\n})();\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"WYUY\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, guard-for-in, no-restricted-syntax, one-var, space-before-function-paren, no-lonely-if, no-continue, brace-style, max-len, quotes */\n/* global DiscussionMixins */\n/* global CommentsStore */\nvar Vue = __webpack_require__(\"Eruj\");\n\n(function () {\n  var JumpToDiscussion = Vue.extend({\n    mixins: [DiscussionMixins],\n    props: {\n      discussionId: String\n    },\n    data: function data() {\n      return {\n        discussions: CommentsStore.state,\n        discussion: {}\n      };\n    },\n    computed: {\n      allResolved: function allResolved() {\n        return this.unresolvedDiscussionCount === 0;\n      },\n      showButton: function showButton() {\n        if (this.discussionId) {\n          if (this.unresolvedDiscussionCount > 1) {\n            return true;\n          } else {\n            return this.discussionId !== this.lastResolvedId;\n          }\n        } else {\n          return this.unresolvedDiscussionCount >= 1;\n        }\n      },\n      lastResolvedId: function lastResolvedId() {\n        var lastId = void 0;\n        for (var discussionId in this.discussions) {\n          var discussion = this.discussions[discussionId];\n\n          if (!discussion.isResolved()) {\n            lastId = discussion.id;\n          }\n        }\n        return lastId;\n      }\n    },\n    methods: {\n      jumpToNextUnresolvedDiscussion: function jumpToNextUnresolvedDiscussion() {\n        var discussionsSelector = void 0;\n        var discussionIdsInScope = void 0;\n        var firstUnresolvedDiscussionId = void 0;\n        var nextUnresolvedDiscussionId = void 0;\n        var activeTab = window.mrTabs.currentAction;\n        var hasDiscussionsToJumpTo = true;\n        var jumpToFirstDiscussion = !this.discussionId;\n\n        var discussionIdsForElements = function discussionIdsForElements(elements) {\n          return elements.map(function () {\n            return $(this).attr('data-discussion-id');\n          }).toArray();\n        };\n\n        var discussions = this.discussions;\n\n        if (activeTab === 'diffs') {\n          discussionsSelector = '.diffs .notes[data-discussion-id]';\n          discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n\n          var unresolvedDiscussionCount = 0;\n\n          for (var i = 0; i < discussionIdsInScope.length; i += 1) {\n            var discussionId = discussionIdsInScope[i];\n            var discussion = discussions[discussionId];\n            if (discussion && !discussion.isResolved()) {\n              unresolvedDiscussionCount += 1;\n            }\n          }\n\n          if (this.discussionId && !this.discussion.isResolved()) {\n            // If this is the last unresolved discussion on the diffs tab,\n            // there are no discussions to jump to.\n            if (unresolvedDiscussionCount === 1) {\n              hasDiscussionsToJumpTo = false;\n            }\n          } else {\n            // If there are no unresolved discussions on the diffs tab at all,\n            // there are no discussions to jump to.\n            if (unresolvedDiscussionCount === 0) {\n              hasDiscussionsToJumpTo = false;\n            }\n          }\n        } else if (activeTab !== 'notes') {\n          // If we are on the commits or builds tabs,\n          // there are no discussions to jump to.\n          hasDiscussionsToJumpTo = false;\n        }\n\n        if (!hasDiscussionsToJumpTo) {\n          // If there are no discussions to jump to on the current page,\n          // switch to the notes tab and jump to the first disucssion there.\n          window.mrTabs.activateTab('notes');\n          activeTab = 'notes';\n          jumpToFirstDiscussion = true;\n        }\n\n        if (activeTab === 'notes') {\n          discussionsSelector = '.discussion[data-discussion-id]';\n          discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n        }\n\n        var currentDiscussionFound = false;\n        for (var _i = 0; _i < discussionIdsInScope.length; _i += 1) {\n          var _discussionId = discussionIdsInScope[_i];\n          var _discussion = discussions[_discussionId];\n\n          if (!_discussion) {\n            // Discussions for comments on commits in this MR don't have a resolved status.\n            continue;\n          }\n\n          if (!firstUnresolvedDiscussionId && !_discussion.isResolved()) {\n            firstUnresolvedDiscussionId = _discussionId;\n\n            if (jumpToFirstDiscussion) {\n              break;\n            }\n          }\n\n          if (!jumpToFirstDiscussion) {\n            if (currentDiscussionFound) {\n              if (!_discussion.isResolved()) {\n                nextUnresolvedDiscussionId = _discussionId;\n                break;\n              } else {\n                continue;\n              }\n            }\n\n            if (_discussionId === this.discussionId) {\n              currentDiscussionFound = true;\n            }\n          }\n        }\n\n        nextUnresolvedDiscussionId = nextUnresolvedDiscussionId || firstUnresolvedDiscussionId;\n\n        if (!nextUnresolvedDiscussionId) {\n          return;\n        }\n\n        var $target = $(discussionsSelector + '[data-discussion-id=\"' + nextUnresolvedDiscussionId + '\"]');\n\n        if (activeTab === 'notes') {\n          $target = $target.closest('.note-discussion');\n\n          // If the next discussion is closed, toggle it open.\n          if ($target.find('.js-toggle-content').is(':hidden')) {\n            $target.find('.js-toggle-button i').trigger('click');\n          }\n        } else if (activeTab === 'diffs') {\n          // Resolved discussions are hidden in the diffs tab by default.\n          // If they are marked unresolved on the notes tab, they will still be hidden on the diffs tab.\n          // When jumping between unresolved discussions on the diffs tab, we show them.\n          $target.closest(\".content\").show();\n\n          $target = $target.closest(\"tr.notes_holder\");\n          $target.show();\n\n          // If we are on the diffs tab, we don't scroll to the discussion itself, but to\n          // 4 diff lines above it: the line the discussion was in response to + 3 context\n          var prevEl = void 0;\n          for (var _i2 = 0; _i2 < 4; _i2 += 1) {\n            prevEl = $target.prev();\n\n            // If the discussion doesn't have 4 lines above it, we'll have to do with fewer.\n            if (!prevEl.hasClass(\"line_holder\")) {\n              break;\n            }\n\n            $target = prevEl;\n          }\n        }\n\n        $.scrollTo($target, {\n          offset: 0\n        });\n      }\n    },\n    created: function created() {\n      this.discussion = this.discussions[this.discussionId];\n    }\n  });\n\n  Vue.component('jump-to-discussion', JumpToDiscussion);\n})();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"ZZAo\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable space-before-function-paren, camelcase, guard-for-in, no-restricted-syntax, no-unused-vars, max-len */\n/* global Vue */\n/* global NoteModel */\n\nvar DiscussionModel = function () {\n  function DiscussionModel(discussionId) {\n    _classCallCheck(this, DiscussionModel);\n\n    this.id = discussionId;\n    this.notes = {};\n    this.loading = false;\n    this.canResolve = false;\n  }\n\n  _createClass(DiscussionModel, [{\n    key: 'createNote',\n    value: function createNote(noteObj) {\n      Vue.set(this.notes, noteObj.noteId, new NoteModel(this.id, noteObj));\n    }\n  }, {\n    key: 'deleteNote',\n    value: function deleteNote(noteId) {\n      Vue.delete(this.notes, noteId);\n    }\n  }, {\n    key: 'getNote',\n    value: function getNote(noteId) {\n      return this.notes[noteId];\n    }\n  }, {\n    key: 'notesCount',\n    value: function notesCount() {\n      return Object.keys(this.notes).length;\n    }\n  }, {\n    key: 'isResolved',\n    value: function isResolved() {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (!note.resolved) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'resolveAllNotes',\n    value: function resolveAllNotes(resolved_by) {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (!note.resolved) {\n          note.resolved = true;\n          note.resolved_by = resolved_by;\n        }\n      }\n    }\n  }, {\n    key: 'unResolveAllNotes',\n    value: function unResolveAllNotes() {\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (note.resolved) {\n          note.resolved = false;\n          note.resolved_by = null;\n        }\n      }\n    }\n  }, {\n    key: 'updateHeadline',\n    value: function updateHeadline(data) {\n      var discussionSelector = '.discussion[data-discussion-id=\"' + this.id + '\"]';\n      var $discussionHeadline = $(discussionSelector + ' .js-discussion-headline');\n\n      if (data.discussion_headline_html) {\n        if ($discussionHeadline.length) {\n          $discussionHeadline.replaceWith(data.discussion_headline_html);\n        } else {\n          $(discussionSelector + ' .discussion-header').append(data.discussion_headline_html);\n        }\n\n        gl.utils.localTimeAgo($('.js-timeago', '' + discussionSelector));\n      } else {\n        $discussionHeadline.remove();\n      }\n    }\n  }, {\n    key: 'isResolvable',\n    value: function isResolvable() {\n      if (!this.canResolve) {\n        return false;\n      }\n\n      for (var noteId in this.notes) {\n        var note = this.notes[noteId];\n\n        if (note.canResolve) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return DiscussionModel;\n}();\n\nwindow.DiscussionModel = DiscussionModel;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"cRac\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint-disable comma-dangle, object-shorthand, func-names, no-param-reassign */\n/* global DiscussionMixins */\n/* global CommentsStore */\nvar Vue = __webpack_require__(\"Eruj\");\n\n(function (w) {\n  w.ResolveCount = Vue.extend({\n    mixins: [DiscussionMixins],\n    props: {\n      loggedOut: Boolean\n    },\n    data: function data() {\n      return {\n        discussions: CommentsStore.state\n      };\n    },\n    computed: {\n      allResolved: function allResolved() {\n        return this.resolvedDiscussionCount === this.discussionCount;\n      },\n      resolvedCountText: function resolvedCountText() {\n        return this.discussionCount === 1 ? 'discussion' : 'discussions';\n      }\n    }\n  });\n})(window);\n\n/***/ }),\n\n/***/ \"epgj\":\n/***/ (function(module, exports) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable camelcase, no-unused-vars */\n\nvar NoteModel = function NoteModel(discussionId, noteObj) {\n  _classCallCheck(this, NoteModel);\n\n  this.discussionId = discussionId;\n  this.id = noteObj.noteId;\n  this.canResolve = noteObj.canResolve;\n  this.resolved = noteObj.resolved;\n  this.resolved_by = noteObj.resolvedBy;\n  this.authorName = noteObj.authorName;\n  this.authorAvatar = noteObj.authorAvatar;\n  this.noteTruncated = noteObj.noteTruncated;\n};\n\nwindow.NoteModel = NoteModel;\n\n/***/ }),\n\n/***/ \"gL/p\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg width=\\\"11\\\" height=\\\"11\\\" viewBox=\\\"0 0 9 13\\\"><path d=\\\"M2.57568253,6.49866948 C2.50548852,6.57199715 2.44637866,6.59708255 2.39835118,6.57392645 C2.3503237,6.55077034 2.32631032,6.48902165 2.32631032,6.38867852 L2.32631032,-2.13272614 C2.32631032,-2.23306927 2.3503237,-2.29481796 2.39835118,-2.31797406 C2.44637866,-2.34113017 2.50548852,-2.31604477 2.57568253,-2.24271709 L6.51022184,1.86747129 C6.53977721,1.8983461 6.56379059,1.93500939 6.5822627,1.97746225 L6.5822627,2.27849013 C6.56379059,2.31708364 6.53977721,2.35374693 6.51022184,2.38848109 L2.57568253,6.49866948 Z\\\" transform=\\\"translate(4.454287, 2.127976) rotate(90.000000) translate(-4.454287, -2.127976) \\\"></path><path d=\\\"M3.74312342,2.09553332 C3.74312342,1.99519019 3.77821989,1.9083561 3.8484139,1.83502843 C3.91860791,1.76170075 4.00173115,1.72503747 4.09778611,1.72503747 L4.80711151,1.72503747 C4.90316647,1.72503747 4.98628971,1.76170075 5.05648372,1.83502843 C5.12667773,1.9083561 5.16177421,1.99519019 5.16177421,2.09553332 L5.16177421,10.2464421 C5.16177421,10.3467853 5.12667773,10.4336194 5.05648372,10.506947 C4.98628971,10.5802747 4.90316647,10.616938 4.80711151,10.616938 L4.09778611,10.616938 C4.00173115,10.616938 3.91860791,10.5802747 3.8484139,10.506947 C3.77821989,10.4336194 3.74312342,10.3467853 3.74312342,10.2464421 L3.74312342,2.09553332 Z\\\" transform=\\\"translate(4.452449, 6.170988) rotate(-90.000000) translate(-4.452449, -6.170988) \\\"></path><path d=\\\"M2.57568253,14.6236695 C2.50548852,14.6969971 2.44637866,14.7220826 2.39835118,14.6989264 C2.3503237,14.6757703 2.32631032,14.6140216 2.32631032,14.5136785 L2.32631032,5.99227386 C2.32631032,5.89193073 2.3503237,5.83018204 2.39835118,5.80702594 C2.44637866,5.78386983 2.50548852,5.80895523 2.57568253,5.88228291 L6.51022184,9.99247129 C6.53977721,10.0233461 6.56379059,10.0600094 6.5822627,10.1024622 L6.5822627,10.4034901 C6.56379059,10.4420836 6.53977721,10.4787469 6.51022184,10.5134811 L2.57568253,14.6236695 Z\\\" transform=\\\"translate(4.454287, 10.252976) scale(1, -1) rotate(90.000000) translate(-4.454287, -10.252976) \\\"></path></svg>\\n\"\n\n/***/ }),\n\n/***/ \"rK+X\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, quotes, no-lonely-if, max-len */\n/* global CommentsStore */\nvar Vue = __webpack_require__(\"Eruj\");\n\n(function () {\n  var CommentAndResolveBtn = Vue.extend({\n    props: {\n      discussionId: String\n    },\n    data: function data() {\n      return {\n        textareaIsEmpty: true,\n        discussion: {}\n      };\n    },\n\n    computed: {\n      showButton: function showButton() {\n        if (this.discussion) {\n          return this.discussion.isResolvable();\n        } else {\n          return false;\n        }\n      },\n      isDiscussionResolved: function isDiscussionResolved() {\n        return this.discussion.isResolved();\n      },\n      buttonText: function buttonText() {\n        if (this.isDiscussionResolved) {\n          if (this.textareaIsEmpty) {\n            return \"Unresolve discussion\";\n          } else {\n            return \"Comment & unresolve discussion\";\n          }\n        } else {\n          if (this.textareaIsEmpty) {\n            return \"Resolve discussion\";\n          } else {\n            return \"Comment & resolve discussion\";\n          }\n        }\n      }\n    },\n    created: function created() {\n      this.discussion = CommentsStore.state[this.discussionId];\n    },\n\n    mounted: function mounted() {\n      var _this = this;\n\n      var $textarea = $(\"#new-discussion-note-form-\" + this.discussionId + \" .note-textarea\");\n      this.textareaIsEmpty = $textarea.val() === '';\n\n      $textarea.on('input.comment-and-resolve-btn', function () {\n        _this.textareaIsEmpty = $textarea.val() === '';\n      });\n    },\n    destroyed: function destroyed() {\n      $(\"#new-discussion-note-form-\" + this.discussionId + \" .note-textarea\").off('input.comment-and-resolve-btn');\n    }\n  });\n\n  Vue.component('comment-and-resolve-btn', CommentAndResolveBtn);\n})(window);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"tExy\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint-disable object-shorthand, func-names, space-before-function-paren, comma-dangle, no-else-return, quotes, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n\nvar Vue = __webpack_require__(\"Eruj\");\n\n(function () {\n  var ResolveDiscussionBtn = Vue.extend({\n    props: {\n      discussionId: String,\n      mergeRequestId: Number,\n      canResolve: Boolean\n    },\n    data: function data() {\n      return {\n        discussion: {}\n      };\n    },\n    computed: {\n      showButton: function showButton() {\n        if (this.discussion) {\n          return this.discussion.isResolvable();\n        } else {\n          return false;\n        }\n      },\n      isDiscussionResolved: function isDiscussionResolved() {\n        if (this.discussion) {\n          return this.discussion.isResolved();\n        } else {\n          return false;\n        }\n      },\n      buttonText: function buttonText() {\n        if (this.isDiscussionResolved) {\n          return \"Unresolve discussion\";\n        } else {\n          return \"Resolve discussion\";\n        }\n      },\n      loading: function loading() {\n        if (this.discussion) {\n          return this.discussion.loading;\n        } else {\n          return false;\n        }\n      }\n    },\n    methods: {\n      resolve: function resolve() {\n        ResolveService.toggleResolveForDiscussion(this.mergeRequestId, this.discussionId);\n      }\n    },\n    created: function created() {\n      CommentsStore.createDiscussion(this.discussionId, this.canResolve);\n\n      this.discussion = CommentsStore.state[this.discussionId];\n    }\n  });\n\n  Vue.component('resolve-discussion-btn', ResolveDiscussionBtn);\n})();\n\n/***/ }),\n\n/***/ \"zKIA\":\n/***/ (function(module, exports) {\n\n/* eslint-disable object-shorthand, func-names, camelcase, no-restricted-syntax, guard-for-in, comma-dangle, max-len, no-param-reassign */\n/* global Vue */\n/* global DiscussionModel */\n\n(function (w) {\n  w.CommentsStore = {\n    state: {},\n    get: function get(discussionId, noteId) {\n      return this.state[discussionId].getNote(noteId);\n    },\n    createDiscussion: function createDiscussion(discussionId, canResolve) {\n      var discussion = this.state[discussionId];\n      if (!this.state[discussionId]) {\n        discussion = new DiscussionModel(discussionId);\n        Vue.set(this.state, discussionId, discussion);\n      }\n\n      if (canResolve !== undefined) {\n        discussion.canResolve = canResolve;\n      }\n\n      return discussion;\n    },\n    create: function create(noteObj) {\n      var discussion = this.createDiscussion(noteObj.discussionId);\n\n      discussion.createNote(noteObj);\n    },\n    update: function update(discussionId, noteId, resolved, resolved_by) {\n      var discussion = this.state[discussionId];\n      var note = discussion.getNote(noteId);\n      note.resolved = resolved;\n      note.resolved_by = resolved_by;\n    },\n    delete: function _delete(discussionId, noteId) {\n      var discussion = this.state[discussionId];\n      discussion.deleteNote(noteId);\n\n      if (discussion.notesCount() === 0) {\n        Vue.delete(this.state, discussionId);\n      }\n    },\n    unresolvedDiscussionIds: function unresolvedDiscussionIds() {\n      var ids = [];\n\n      for (var discussionId in this.state) {\n        var discussion = this.state[discussionId];\n\n        if (!discussion.isResolved()) {\n          ids.push(discussion.id);\n        }\n      }\n\n      return ids;\n    }\n  };\n})(window);\n\n/***/ })\n\n},[\"EuiY\"]);\n\n\n// WEBPACK FOOTER //\n// diff_notes.425060dfc50cf4e23f55.bundle.js","/* eslint-disable func-names, comma-dangle, new-cap, no-new, max-len */\n/* global Vue */\n/* global ResolveCount */\n\nconst Vue = require('vue');\nrequire('./models/discussion');\nrequire('./models/note');\nrequire('./stores/comments');\nrequire('./services/resolve');\nrequire('./mixins/discussion');\nrequire('./components/comment_resolve_btn');\nrequire('./components/jump_to_discussion');\nrequire('./components/resolve_btn');\nrequire('./components/resolve_count');\nrequire('./components/resolve_discussion_btn');\nrequire('./components/diff_note_avatars');\n\n$(() => {\n  const projectPath = document.querySelector('.merge-request').dataset.projectPath;\n  const COMPONENT_SELECTOR = 'resolve-btn, resolve-discussion-btn, jump-to-discussion, comment-and-resolve-btn';\n\n  window.gl = window.gl || {};\n  window.gl.diffNoteApps = {};\n\n  window.ResolveService = new gl.DiffNotesResolveServiceClass(projectPath);\n\n  gl.diffNotesCompileComponents = () => {\n    $('diff-note-avatars').each(function () {\n      const tmp = Vue.extend({\n        template: $(this).get(0).outerHTML\n      });\n      const tmpApp = new tmp().$mount();\n\n      $(this).replaceWith(tmpApp.$el);\n    });\n\n    const $components = $(COMPONENT_SELECTOR).filter(function () {\n      return $(this).closest('resolve-count').length !== 1;\n    });\n\n    if ($components) {\n      $components.each(function () {\n        const $this = $(this);\n        const noteId = $this.attr(':note-id');\n        const tmp = Vue.extend({\n          template: $this.get(0).outerHTML\n        });\n        const tmpApp = new tmp().$mount();\n\n        if (noteId) {\n          gl.diffNoteApps[`note_${noteId}`] = tmpApp;\n        }\n\n        $this.replaceWith(tmpApp.$el);\n      });\n    }\n  };\n\n  gl.diffNotesCompileComponents();\n\n  new Vue({\n    el: '#resolve-count-app',\n    components: {\n      'resolve-count': ResolveCount\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/diff_notes_bundle.js","/* eslint-disable class-methods-use-this, one-var, camelcase, no-new, comma-dangle, no-param-reassign, max-len */\n/* global Flash */\n/* global CommentsStore */\n\nconst Vue = window.Vue = require('vue');\nwindow.Vue.use(require('vue-resource'));\nrequire('../../vue_shared/vue_resource_interceptor');\n\n(() => {\n  window.gl = window.gl || {};\n\n  class ResolveServiceClass {\n    constructor(root) {\n      this.noteResource = Vue.resource(`${root}/notes{/noteId}/resolve`);\n      this.discussionResource = Vue.resource(`${root}/merge_requests{/mergeRequestId}/discussions{/discussionId}/resolve`);\n    }\n\n    resolve(noteId) {\n      return this.noteResource.save({ noteId }, {});\n    }\n\n    unresolve(noteId) {\n      return this.noteResource.delete({ noteId }, {});\n    }\n\n    toggleResolveForDiscussion(mergeRequestId, discussionId) {\n      const discussion = CommentsStore.state[discussionId];\n      const isResolved = discussion.isResolved();\n      let promise;\n\n      if (isResolved) {\n        promise = this.unResolveAll(mergeRequestId, discussionId);\n      } else {\n        promise = this.resolveAll(mergeRequestId, discussionId);\n      }\n\n      promise.then((response) => {\n        discussion.loading = false;\n\n        if (response.status === 200) {\n          const data = response.json();\n          const resolved_by = data ? data.resolved_by : null;\n\n          if (isResolved) {\n            discussion.unResolveAllNotes();\n          } else {\n            discussion.resolveAllNotes(resolved_by);\n          }\n\n          discussion.updateHeadline(data);\n        } else {\n          new Flash('An error occurred when trying to resolve a discussion. Please try again.', 'alert');\n        }\n      });\n    }\n\n    resolveAll(mergeRequestId, discussionId) {\n      const discussion = CommentsStore.state[discussionId];\n\n      discussion.loading = true;\n\n      return this.discussionResource.save({\n        mergeRequestId,\n        discussionId\n      }, {});\n    }\n\n    unResolveAll(mergeRequestId, discussionId) {\n      const discussion = CommentsStore.state[discussionId];\n\n      discussion.loading = true;\n\n      return this.discussionResource.delete({\n        mergeRequestId,\n        discussionId\n      }, {});\n    }\n  }\n\n  gl.DiffNotesResolveServiceClass = ResolveServiceClass;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/services/resolve.js","/* eslint-disable comma-dangle, object-shorthand, func-names, quote-props, no-else-return, camelcase, no-new, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n/* global Flash */\nconst Vue = require('vue');\n\n(() => {\n  const ResolveBtn = Vue.extend({\n    props: {\n      noteId: Number,\n      discussionId: String,\n      resolved: Boolean,\n      canResolve: Boolean,\n      resolvedBy: String,\n      authorName: String,\n      authorAvatar: String,\n      noteTruncated: String,\n    },\n    data: function () {\n      return {\n        discussions: CommentsStore.state,\n        loading: false,\n        note: {},\n      };\n    },\n    watch: {\n      'discussions': {\n        handler: 'updateTooltip',\n        deep: true\n      }\n    },\n    computed: {\n      discussion: function () {\n        return this.discussions[this.discussionId];\n      },\n      buttonText: function () {\n        if (this.isResolved) {\n          return `Resolved by ${this.resolvedByName}`;\n        } else if (this.canResolve) {\n          return 'Mark as resolved';\n        } else {\n          return 'Unable to resolve';\n        }\n      },\n      isResolved: function () {\n        if (this.note) {\n          return this.note.resolved;\n        } else {\n          return false;\n        }\n      },\n      resolvedByName: function () {\n        return this.note.resolved_by;\n      },\n    },\n    methods: {\n      updateTooltip: function () {\n        this.$nextTick(() => {\n          $(this.$refs.button)\n            .tooltip('hide')\n            .tooltip('fixTitle');\n        });\n      },\n      resolve: function () {\n        if (!this.canResolve) return;\n\n        let promise;\n        this.loading = true;\n\n        if (this.isResolved) {\n          promise = ResolveService\n            .unresolve(this.noteId);\n        } else {\n          promise = ResolveService\n            .resolve(this.noteId);\n        }\n\n        promise.then((response) => {\n          this.loading = false;\n\n          if (response.status === 200) {\n            const data = response.json();\n            const resolved_by = data ? data.resolved_by : null;\n\n            CommentsStore.update(this.discussionId, this.noteId, !this.isResolved, resolved_by);\n            this.discussion.updateHeadline(data);\n          } else {\n            new Flash('An error occurred when trying to resolve a comment. Please try again.', 'alert');\n          }\n\n          this.updateTooltip();\n        });\n      }\n    },\n    mounted: function () {\n      $(this.$refs.button).tooltip({\n        container: 'body'\n      });\n    },\n    beforeDestroy: function () {\n      CommentsStore.delete(this.discussionId, this.noteId);\n    },\n    created: function () {\n      CommentsStore.create({\n        discussionId: this.discussionId,\n        noteId: this.noteId,\n        canResolve: this.canResolve,\n        resolved: this.resolved,\n        resolvedBy: this.resolvedBy,\n        authorName: this.authorName,\n        authorAvatar: this.authorAvatar,\n        noteTruncated: this.noteTruncated,\n      });\n\n      this.note = this.discussion.getNote(this.noteId);\n    }\n  });\n\n  Vue.component('resolve-btn', ResolveBtn);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_btn.js","/* eslint-disable object-shorthand, func-names, guard-for-in, no-restricted-syntax, comma-dangle, no-param-reassign, max-len */\n\n((w) => {\n  w.DiscussionMixins = {\n    computed: {\n      discussionCount: function () {\n        return Object.keys(this.discussions).length;\n      },\n      resolvedDiscussionCount: function () {\n        let resolvedCount = 0;\n\n        for (const discussionId in this.discussions) {\n          const discussion = this.discussions[discussionId];\n\n          if (discussion.isResolved()) {\n            resolvedCount += 1;\n          }\n        }\n\n        return resolvedCount;\n      },\n      unresolvedDiscussionCount: function () {\n        let unresolvedCount = 0;\n\n        for (const discussionId in this.discussions) {\n          const discussion = this.discussions[discussionId];\n\n          if (!discussion.isResolved()) {\n            unresolvedCount += 1;\n          }\n        }\n\n        return unresolvedCount;\n      }\n    }\n  };\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/mixins/discussion.js","/* global CommentsStore Cookies notes */\nimport Vue from 'vue';\nimport collapseIcon from '../icons/collapse_icon.svg';\n\n(() => {\n  const DiffNoteAvatars = Vue.extend({\n    props: ['discussionId'],\n    data() {\n      return {\n        isVisible: false,\n        lineType: '',\n        storeState: CommentsStore.state,\n        shownAvatars: 3,\n        collapseIcon,\n      };\n    },\n    template: `\n      <div class=\"diff-comment-avatar-holders\"\n        v-show=\"notesCount !== 0\">\n        <div v-if=\"!isVisible\">\n          <img v-for=\"note in notesSubset\"\n            class=\"avatar diff-comment-avatar has-tooltip js-diff-comment-avatar\"\n            width=\"19\"\n            height=\"19\"\n            role=\"button\"\n            data-container=\"body\"\n            data-placement=\"top\"\n            :data-line-type=\"lineType\"\n            :title=\"note.authorName + ': ' + note.noteTruncated\"\n            :src=\"note.authorAvatar\"\n            @click=\"clickedAvatar($event)\" />\n          <span v-if=\"notesCount > shownAvatars\"\n            class=\"diff-comments-more-count has-tooltip js-diff-comment-avatar\"\n            data-container=\"body\"\n            data-placement=\"top\"\n            ref=\"extraComments\"\n            role=\"button\"\n            :data-line-type=\"lineType\"\n            :title=\"extraNotesTitle\"\n            @click=\"clickedAvatar($event)\">{{ moreText }}</span>\n        </div>\n        <button class=\"diff-notes-collapse js-diff-comment-avatar\"\n          type=\"button\"\n          aria-label=\"Show comments\"\n          :data-line-type=\"lineType\"\n          @click=\"clickedAvatar($event)\"\n          v-if=\"isVisible\"\n          v-html=\"collapseIcon\">\n        </button>\n      </div>\n    `,\n    mounted() {\n      this.$nextTick(() => {\n        this.addNoCommentClass();\n        this.setDiscussionVisible();\n\n        this.lineType = $(this.$el).closest('.diff-line-num').hasClass('old_line') ? 'old' : 'new';\n      });\n\n      $(document).on('toggle.comments', () => {\n        this.$nextTick(() => {\n          this.setDiscussionVisible();\n        });\n      });\n    },\n    destroyed() {\n      $(document).off('toggle.comments');\n    },\n    watch: {\n      storeState: {\n        handler() {\n          this.$nextTick(() => {\n            $('.has-tooltip', this.$el).tooltip('fixTitle');\n\n            // We need to add/remove a class to an element that is outside the Vue instance\n            this.addNoCommentClass();\n          });\n        },\n        deep: true,\n      },\n    },\n    computed: {\n      notesSubset() {\n        let notes = [];\n\n        if (this.discussion) {\n          notes = Object.keys(this.discussion.notes)\n            .slice(0, this.shownAvatars)\n            .map(noteId => this.discussion.notes[noteId]);\n        }\n\n        return notes;\n      },\n      extraNotesTitle() {\n        if (this.discussion) {\n          const extra = this.discussion.notesCount() - this.shownAvatars;\n\n          return `${extra} more comment${extra > 1 ? 's' : ''}`;\n        }\n\n        return '';\n      },\n      discussion() {\n        return this.storeState[this.discussionId];\n      },\n      notesCount() {\n        if (this.discussion) {\n          return this.discussion.notesCount();\n        }\n\n        return 0;\n      },\n      moreText() {\n        const plusSign = this.notesCount < 100 ? '+' : '';\n\n        return `${plusSign}${this.notesCount - this.shownAvatars}`;\n      },\n    },\n    methods: {\n      clickedAvatar(e) {\n        notes.addDiffNote(e);\n\n        // Toggle the active state of the toggle all button\n        this.toggleDiscussionsToggleState();\n\n        this.$nextTick(() => {\n          this.setDiscussionVisible();\n\n          $('.has-tooltip', this.$el).tooltip('fixTitle');\n          $('.has-tooltip', this.$el).tooltip('hide');\n        });\n      },\n      addNoCommentClass() {\n        const notesCount = this.notesCount;\n\n        $(this.$el).closest('.js-avatar-container')\n          .toggleClass('js-no-comment-btn', notesCount > 0)\n          .nextUntil('.js-avatar-container')\n          .toggleClass('js-no-comment-btn', notesCount > 0);\n      },\n      toggleDiscussionsToggleState() {\n        const $notesHolders = $(this.$el).closest('.code').find('.notes_holder');\n        const $visibleNotesHolders = $notesHolders.filter(':visible');\n        const $toggleDiffCommentsBtn = $(this.$el).closest('.diff-file').find('.js-toggle-diff-comments');\n\n        $toggleDiffCommentsBtn.toggleClass('active', $notesHolders.length === $visibleNotesHolders.length);\n      },\n      setDiscussionVisible() {\n        this.isVisible = $(`.diffs .notes[data-discussion-id=\"${this.discussion.id}\"]`).is(':visible');\n      },\n    },\n  });\n\n  Vue.component('diff-note-avatars', DiffNoteAvatars);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/diff_note_avatars.js","/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, guard-for-in, no-restricted-syntax, one-var, space-before-function-paren, no-lonely-if, no-continue, brace-style, max-len, quotes */\n/* global DiscussionMixins */\n/* global CommentsStore */\nconst Vue = require('vue');\n\n(() => {\n  const JumpToDiscussion = Vue.extend({\n    mixins: [DiscussionMixins],\n    props: {\n      discussionId: String\n    },\n    data: function () {\n      return {\n        discussions: CommentsStore.state,\n        discussion: {},\n      };\n    },\n    computed: {\n      allResolved: function () {\n        return this.unresolvedDiscussionCount === 0;\n      },\n      showButton: function () {\n        if (this.discussionId) {\n          if (this.unresolvedDiscussionCount > 1) {\n            return true;\n          } else {\n            return this.discussionId !== this.lastResolvedId;\n          }\n        } else {\n          return this.unresolvedDiscussionCount >= 1;\n        }\n      },\n      lastResolvedId: function () {\n        let lastId;\n        for (const discussionId in this.discussions) {\n          const discussion = this.discussions[discussionId];\n\n          if (!discussion.isResolved()) {\n            lastId = discussion.id;\n          }\n        }\n        return lastId;\n      }\n    },\n    methods: {\n      jumpToNextUnresolvedDiscussion: function () {\n        let discussionsSelector;\n        let discussionIdsInScope;\n        let firstUnresolvedDiscussionId;\n        let nextUnresolvedDiscussionId;\n        let activeTab = window.mrTabs.currentAction;\n        let hasDiscussionsToJumpTo = true;\n        let jumpToFirstDiscussion = !this.discussionId;\n\n        const discussionIdsForElements = function(elements) {\n          return elements.map(function() {\n            return $(this).attr('data-discussion-id');\n          }).toArray();\n        };\n\n        const discussions = this.discussions;\n\n        if (activeTab === 'diffs') {\n          discussionsSelector = '.diffs .notes[data-discussion-id]';\n          discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n\n          let unresolvedDiscussionCount = 0;\n\n          for (let i = 0; i < discussionIdsInScope.length; i += 1) {\n            const discussionId = discussionIdsInScope[i];\n            const discussion = discussions[discussionId];\n            if (discussion && !discussion.isResolved()) {\n              unresolvedDiscussionCount += 1;\n            }\n          }\n\n          if (this.discussionId && !this.discussion.isResolved()) {\n            // If this is the last unresolved discussion on the diffs tab,\n            // there are no discussions to jump to.\n            if (unresolvedDiscussionCount === 1) {\n              hasDiscussionsToJumpTo = false;\n            }\n          } else {\n            // If there are no unresolved discussions on the diffs tab at all,\n            // there are no discussions to jump to.\n            if (unresolvedDiscussionCount === 0) {\n              hasDiscussionsToJumpTo = false;\n            }\n          }\n        } else if (activeTab !== 'notes') {\n          // If we are on the commits or builds tabs,\n          // there are no discussions to jump to.\n          hasDiscussionsToJumpTo = false;\n        }\n\n        if (!hasDiscussionsToJumpTo) {\n          // If there are no discussions to jump to on the current page,\n          // switch to the notes tab and jump to the first disucssion there.\n          window.mrTabs.activateTab('notes');\n          activeTab = 'notes';\n          jumpToFirstDiscussion = true;\n        }\n\n        if (activeTab === 'notes') {\n          discussionsSelector = '.discussion[data-discussion-id]';\n          discussionIdsInScope = discussionIdsForElements($(discussionsSelector));\n        }\n\n        let currentDiscussionFound = false;\n        for (let i = 0; i < discussionIdsInScope.length; i += 1) {\n          const discussionId = discussionIdsInScope[i];\n          const discussion = discussions[discussionId];\n\n          if (!discussion) {\n            // Discussions for comments on commits in this MR don't have a resolved status.\n            continue;\n          }\n\n          if (!firstUnresolvedDiscussionId && !discussion.isResolved()) {\n            firstUnresolvedDiscussionId = discussionId;\n\n            if (jumpToFirstDiscussion) {\n              break;\n            }\n          }\n\n          if (!jumpToFirstDiscussion) {\n            if (currentDiscussionFound) {\n              if (!discussion.isResolved()) {\n                nextUnresolvedDiscussionId = discussionId;\n                break;\n              }\n              else {\n                continue;\n              }\n            }\n\n            if (discussionId === this.discussionId) {\n              currentDiscussionFound = true;\n            }\n          }\n        }\n\n        nextUnresolvedDiscussionId = nextUnresolvedDiscussionId || firstUnresolvedDiscussionId;\n\n        if (!nextUnresolvedDiscussionId) {\n          return;\n        }\n\n        let $target = $(`${discussionsSelector}[data-discussion-id=\"${nextUnresolvedDiscussionId}\"]`);\n\n        if (activeTab === 'notes') {\n          $target = $target.closest('.note-discussion');\n\n          // If the next discussion is closed, toggle it open.\n          if ($target.find('.js-toggle-content').is(':hidden')) {\n            $target.find('.js-toggle-button i').trigger('click');\n          }\n        } else if (activeTab === 'diffs') {\n          // Resolved discussions are hidden in the diffs tab by default.\n          // If they are marked unresolved on the notes tab, they will still be hidden on the diffs tab.\n          // When jumping between unresolved discussions on the diffs tab, we show them.\n          $target.closest(\".content\").show();\n\n          $target = $target.closest(\"tr.notes_holder\");\n          $target.show();\n\n          // If we are on the diffs tab, we don't scroll to the discussion itself, but to\n          // 4 diff lines above it: the line the discussion was in response to + 3 context\n          let prevEl;\n          for (let i = 0; i < 4; i += 1) {\n            prevEl = $target.prev();\n\n            // If the discussion doesn't have 4 lines above it, we'll have to do with fewer.\n            if (!prevEl.hasClass(\"line_holder\")) {\n              break;\n            }\n\n            $target = prevEl;\n          }\n        }\n\n        $.scrollTo($target, {\n          offset: 0\n        });\n      }\n    },\n    created() {\n      this.discussion = this.discussions[this.discussionId];\n    },\n  });\n\n  Vue.component('jump-to-discussion', JumpToDiscussion);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/jump_to_discussion.js","/* eslint-disable space-before-function-paren, camelcase, guard-for-in, no-restricted-syntax, no-unused-vars, max-len */\n/* global Vue */\n/* global NoteModel */\n\nclass DiscussionModel {\n  constructor (discussionId) {\n    this.id = discussionId;\n    this.notes = {};\n    this.loading = false;\n    this.canResolve = false;\n  }\n\n  createNote (noteObj) {\n    Vue.set(this.notes, noteObj.noteId, new NoteModel(this.id, noteObj));\n  }\n\n  deleteNote (noteId) {\n    Vue.delete(this.notes, noteId);\n  }\n\n  getNote (noteId) {\n    return this.notes[noteId];\n  }\n\n  notesCount() {\n    return Object.keys(this.notes).length;\n  }\n\n  isResolved () {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (!note.resolved) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  resolveAllNotes (resolved_by) {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (!note.resolved) {\n        note.resolved = true;\n        note.resolved_by = resolved_by;\n      }\n    }\n  }\n\n  unResolveAllNotes () {\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (note.resolved) {\n        note.resolved = false;\n        note.resolved_by = null;\n      }\n    }\n  }\n\n  updateHeadline (data) {\n    const discussionSelector = `.discussion[data-discussion-id=\"${this.id}\"]`;\n    const $discussionHeadline = $(`${discussionSelector} .js-discussion-headline`);\n\n    if (data.discussion_headline_html) {\n      if ($discussionHeadline.length) {\n        $discussionHeadline.replaceWith(data.discussion_headline_html);\n      } else {\n        $(`${discussionSelector} .discussion-header`).append(data.discussion_headline_html);\n      }\n\n      gl.utils.localTimeAgo($('.js-timeago', `${discussionSelector}`));\n    } else {\n      $discussionHeadline.remove();\n    }\n  }\n\n  isResolvable () {\n    if (!this.canResolve) {\n      return false;\n    }\n\n    for (const noteId in this.notes) {\n      const note = this.notes[noteId];\n\n      if (note.canResolve) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\nwindow.DiscussionModel = DiscussionModel;\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/models/discussion.js","/* eslint-disable comma-dangle, object-shorthand, func-names, no-param-reassign */\n/* global DiscussionMixins */\n/* global CommentsStore */\nconst Vue = require('vue');\n\n((w) => {\n  w.ResolveCount = Vue.extend({\n    mixins: [DiscussionMixins],\n    props: {\n      loggedOut: Boolean\n    },\n    data: function () {\n      return {\n        discussions: CommentsStore.state\n      };\n    },\n    computed: {\n      allResolved: function () {\n        return this.resolvedDiscussionCount === this.discussionCount;\n      },\n      resolvedCountText() {\n        return this.discussionCount === 1 ? 'discussion' : 'discussions';\n      }\n    }\n  });\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_count.js","/* eslint-disable camelcase, no-unused-vars */\n\nclass NoteModel {\n  constructor(discussionId, noteObj) {\n    this.discussionId = discussionId;\n    this.id = noteObj.noteId;\n    this.canResolve = noteObj.canResolve;\n    this.resolved = noteObj.resolved;\n    this.resolved_by = noteObj.resolvedBy;\n    this.authorName = noteObj.authorName;\n    this.authorAvatar = noteObj.authorAvatar;\n    this.noteTruncated = noteObj.noteTruncated;\n  }\n}\n\nwindow.NoteModel = NoteModel;\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/models/note.js","module.exports = \"<svg width=\\\"11\\\" height=\\\"11\\\" viewBox=\\\"0 0 9 13\\\"><path d=\\\"M2.57568253,6.49866948 C2.50548852,6.57199715 2.44637866,6.59708255 2.39835118,6.57392645 C2.3503237,6.55077034 2.32631032,6.48902165 2.32631032,6.38867852 L2.32631032,-2.13272614 C2.32631032,-2.23306927 2.3503237,-2.29481796 2.39835118,-2.31797406 C2.44637866,-2.34113017 2.50548852,-2.31604477 2.57568253,-2.24271709 L6.51022184,1.86747129 C6.53977721,1.8983461 6.56379059,1.93500939 6.5822627,1.97746225 L6.5822627,2.27849013 C6.56379059,2.31708364 6.53977721,2.35374693 6.51022184,2.38848109 L2.57568253,6.49866948 Z\\\" transform=\\\"translate(4.454287, 2.127976) rotate(90.000000) translate(-4.454287, -2.127976) \\\"></path><path d=\\\"M3.74312342,2.09553332 C3.74312342,1.99519019 3.77821989,1.9083561 3.8484139,1.83502843 C3.91860791,1.76170075 4.00173115,1.72503747 4.09778611,1.72503747 L4.80711151,1.72503747 C4.90316647,1.72503747 4.98628971,1.76170075 5.05648372,1.83502843 C5.12667773,1.9083561 5.16177421,1.99519019 5.16177421,2.09553332 L5.16177421,10.2464421 C5.16177421,10.3467853 5.12667773,10.4336194 5.05648372,10.506947 C4.98628971,10.5802747 4.90316647,10.616938 4.80711151,10.616938 L4.09778611,10.616938 C4.00173115,10.616938 3.91860791,10.5802747 3.8484139,10.506947 C3.77821989,10.4336194 3.74312342,10.3467853 3.74312342,10.2464421 L3.74312342,2.09553332 Z\\\" transform=\\\"translate(4.452449, 6.170988) rotate(-90.000000) translate(-4.452449, -6.170988) \\\"></path><path d=\\\"M2.57568253,14.6236695 C2.50548852,14.6969971 2.44637866,14.7220826 2.39835118,14.6989264 C2.3503237,14.6757703 2.32631032,14.6140216 2.32631032,14.5136785 L2.32631032,5.99227386 C2.32631032,5.89193073 2.3503237,5.83018204 2.39835118,5.80702594 C2.44637866,5.78386983 2.50548852,5.80895523 2.57568253,5.88228291 L6.51022184,9.99247129 C6.53977721,10.0233461 6.56379059,10.0600094 6.5822627,10.1024622 L6.5822627,10.4034901 C6.56379059,10.4420836 6.53977721,10.4787469 6.51022184,10.5134811 L2.57568253,14.6236695 Z\\\" transform=\\\"translate(4.454287, 10.252976) scale(1, -1) rotate(90.000000) translate(-4.454287, -10.252976) \\\"></path></svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./diff_notes/icons/collapse_icon.svg\n// module id = gL/p\n// module chunks = 4","/* eslint-disable comma-dangle, object-shorthand, func-names, no-else-return, quotes, no-lonely-if, max-len */\n/* global CommentsStore */\nconst Vue = require('vue');\n\n(() => {\n  const CommentAndResolveBtn = Vue.extend({\n    props: {\n      discussionId: String,\n    },\n    data() {\n      return {\n        textareaIsEmpty: true,\n        discussion: {},\n      };\n    },\n    computed: {\n      showButton: function () {\n        if (this.discussion) {\n          return this.discussion.isResolvable();\n        } else {\n          return false;\n        }\n      },\n      isDiscussionResolved: function () {\n        return this.discussion.isResolved();\n      },\n      buttonText: function () {\n        if (this.isDiscussionResolved) {\n          if (this.textareaIsEmpty) {\n            return \"Unresolve discussion\";\n          } else {\n            return \"Comment & unresolve discussion\";\n          }\n        } else {\n          if (this.textareaIsEmpty) {\n            return \"Resolve discussion\";\n          } else {\n            return \"Comment & resolve discussion\";\n          }\n        }\n      }\n    },\n    created() {\n      this.discussion = CommentsStore.state[this.discussionId];\n    },\n    mounted: function () {\n      const $textarea = $(`#new-discussion-note-form-${this.discussionId} .note-textarea`);\n      this.textareaIsEmpty = $textarea.val() === '';\n\n      $textarea.on('input.comment-and-resolve-btn', () => {\n        this.textareaIsEmpty = $textarea.val() === '';\n      });\n    },\n    destroyed: function () {\n      $(`#new-discussion-note-form-${this.discussionId} .note-textarea`).off('input.comment-and-resolve-btn');\n    }\n  });\n\n  Vue.component('comment-and-resolve-btn', CommentAndResolveBtn);\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/comment_resolve_btn.js","/* eslint-disable object-shorthand, func-names, space-before-function-paren, comma-dangle, no-else-return, quotes, max-len */\n/* global CommentsStore */\n/* global ResolveService */\n\nconst Vue = require('vue');\n\n(() => {\n  const ResolveDiscussionBtn = Vue.extend({\n    props: {\n      discussionId: String,\n      mergeRequestId: Number,\n      canResolve: Boolean,\n    },\n    data: function() {\n      return {\n        discussion: {},\n      };\n    },\n    computed: {\n      showButton: function () {\n        if (this.discussion) {\n          return this.discussion.isResolvable();\n        } else {\n          return false;\n        }\n      },\n      isDiscussionResolved: function () {\n        if (this.discussion) {\n          return this.discussion.isResolved();\n        } else {\n          return false;\n        }\n      },\n      buttonText: function () {\n        if (this.isDiscussionResolved) {\n          return \"Unresolve discussion\";\n        } else {\n          return \"Resolve discussion\";\n        }\n      },\n      loading: function () {\n        if (this.discussion) {\n          return this.discussion.loading;\n        } else {\n          return false;\n        }\n      }\n    },\n    methods: {\n      resolve: function () {\n        ResolveService.toggleResolveForDiscussion(this.mergeRequestId, this.discussionId);\n      }\n    },\n    created: function () {\n      CommentsStore.createDiscussion(this.discussionId, this.canResolve);\n\n      this.discussion = CommentsStore.state[this.discussionId];\n    }\n  });\n\n  Vue.component('resolve-discussion-btn', ResolveDiscussionBtn);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/components/resolve_discussion_btn.js","/* eslint-disable object-shorthand, func-names, camelcase, no-restricted-syntax, guard-for-in, comma-dangle, max-len, no-param-reassign */\n/* global Vue */\n/* global DiscussionModel */\n\n((w) => {\n  w.CommentsStore = {\n    state: {},\n    get: function (discussionId, noteId) {\n      return this.state[discussionId].getNote(noteId);\n    },\n    createDiscussion: function (discussionId, canResolve) {\n      let discussion = this.state[discussionId];\n      if (!this.state[discussionId]) {\n        discussion = new DiscussionModel(discussionId);\n        Vue.set(this.state, discussionId, discussion);\n      }\n\n      if (canResolve !== undefined) {\n        discussion.canResolve = canResolve;\n      }\n\n      return discussion;\n    },\n    create: function (noteObj) {\n      const discussion = this.createDiscussion(noteObj.discussionId);\n\n      discussion.createNote(noteObj);\n    },\n    update: function (discussionId, noteId, resolved, resolved_by) {\n      const discussion = this.state[discussionId];\n      const note = discussion.getNote(noteId);\n      note.resolved = resolved;\n      note.resolved_by = resolved_by;\n    },\n    delete: function (discussionId, noteId) {\n      const discussion = this.state[discussionId];\n      discussion.deleteNote(noteId);\n\n      if (discussion.notesCount() === 0) {\n        Vue.delete(this.state, discussionId);\n      }\n    },\n    unresolvedDiscussionIds: function () {\n      const ids = [];\n\n      for (const discussionId in this.state) {\n        const discussion = this.state[discussionId];\n\n        if (!discussion.isResolved()) {\n          ids.push(discussion.id);\n        }\n      }\n\n      return ids;\n    }\n  };\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./diff_notes/stores/comments.js"],"sourceRoot":""}