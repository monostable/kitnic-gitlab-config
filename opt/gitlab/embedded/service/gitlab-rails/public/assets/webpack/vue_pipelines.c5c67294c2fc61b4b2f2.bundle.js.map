{"version":3,"sources":["webpack:///vue_pipelines.c5c67294c2fc61b4b2f2.bundle.js","webpack:///./vue_pipelines_index/pipelines.js","webpack:///./vue_pipelines_index/index.js","webpack:///./vue_pipelines_index/store.js"],"names":["webpackJsonp","3UJI","module","exports","__webpack_require__","window","Vue","CommitPipelinesStoreWithTimeAgo","PipelinesTableComponent","gl","VuePipelines","extend","components","gl-pagination","VueGlPagination","pipelines-table-component","data","pipelines","timeLoopInterval","intervalId","apiScope","pageInfo","pagenum","count","pageRequest","props","created","utils","getParameterByName","scope","this","store","fetchDataLoop","call","beforeUpdate","length","$children","startTimeAgoLoops","methods","change","pageNumber","param","setParamInURL","visitUrl","template","jsyL","$","use","el","document","querySelector","project","dataset","url","PipelineStore","vue-pipelines","kmbW","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","pageValues","headers","normalized","normalizeHeaders","paginationInfo","parseIntPagination","_class","value","pageNum","_this","$http","get","then","response","assign","res","JSON","parse","body","Flash"],"mappings":"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","file":"vue_pipelines.c5c67294c2fc61b4b2f2.bundle.js","sourcesContent":["webpackJsonp([15,25,26],{\n\n/***/ \"3UJI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* global Vue, gl */\n/* eslint-disable no-param-reassign */\n\nwindow.Vue = __webpack_require__(\"Eruj\");\n\n__webpack_require__(\"03o2\");\n__webpack_require__(\"kmbW\");\nvar CommitPipelinesStoreWithTimeAgo = __webpack_require__(\"DFB/\");\nvar PipelinesTableComponent = __webpack_require__(\"ANrC\");\n\n(function (gl) {\n  gl.VuePipelines = Vue.extend({\n\n    components: {\n      'gl-pagination': gl.VueGlPagination,\n      'pipelines-table-component': PipelinesTableComponent\n    },\n\n    data: function data() {\n      return {\n        pipelines: [],\n        timeLoopInterval: '',\n        intervalId: '',\n        apiScope: 'all',\n        pageInfo: {},\n        pagenum: 1,\n        count: {},\n        pageRequest: false\n      };\n    },\n\n    props: ['scope', 'store'],\n    created: function created() {\n      var pagenum = gl.utils.getParameterByName('page');\n      var scope = gl.utils.getParameterByName('scope');\n      if (pagenum) this.pagenum = pagenum;\n      if (scope) this.apiScope = scope;\n\n      this.store.fetchDataLoop.call(this, Vue, this.pagenum, this.scope, this.apiScope);\n    },\n    beforeUpdate: function beforeUpdate() {\n      if (this.pipelines.length && this.$children) {\n        CommitPipelinesStoreWithTimeAgo.startTimeAgoLoops.call(this, Vue);\n      }\n    },\n\n\n    methods: {\n      /**\n       * Will change the page number and update the URL.\n       *\n       * @param  {Number} pageNumber desired page to go to.\n       */\n      change: function change(pageNumber) {\n        var param = gl.utils.setParamInURL('page', pageNumber);\n\n        gl.utils.visitUrl(param);\n        return param;\n      }\n    },\n    template: '\\n      <div>\\n        <div class=\"pipelines realtime-loading\" v-if=\\'pageRequest\\'>\\n          <i class=\"fa fa-spinner fa-spin\"></i>\\n        </div>\\n\\n        <div class=\"blank-state blank-state-no-icon\"\\n          v-if=\"!pageRequest && pipelines.length === 0\">\\n          <h2 class=\"blank-state-title js-blank-state-title\">\\n            No pipelines to show\\n          </h2>\\n        </div>\\n\\n        <div class=\"table-holder\" v-if=\\'!pageRequest && pipelines.length\\'>\\n          <pipelines-table-component :pipelines=\\'pipelines\\'/>\\n        </div>\\n\\n        <gl-pagination\\n          v-if=\\'!pageRequest && pipelines.length && pageInfo.total > pageInfo.perPage\\'\\n          :pagenum=\\'pagenum\\'\\n          :change=\\'change\\'\\n          :count=\\'count.all\\'\\n          :pageInfo=\\'pageInfo\\'\\n        >\\n        </gl-pagination>\\n      </div>\\n    '\n  });\n})(window.gl || (window.gl = {}));\n\n/***/ }),\n\n/***/ \"jsyL\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/* eslint-disable no-param-reassign */\n/* global Vue, VueResource, gl */\nwindow.Vue = __webpack_require__(\"Eruj\");\nwindow.Vue.use(__webpack_require__(\"7UJR\"));\n__webpack_require__(\"RsTm\");\n__webpack_require__(\"wFzz\");\n__webpack_require__(\"3UJI\");\n\n$(function () {\n  return new Vue({\n    el: document.querySelector('.vue-pipelines-index'),\n\n    data: function data() {\n      var project = document.querySelector('.pipelines');\n\n      return {\n        scope: project.dataset.url,\n        store: new gl.PipelineStore()\n      };\n    },\n\n    components: {\n      'vue-pipelines': gl.VuePipelines\n    },\n    template: '\\n    <vue-pipelines\\n      :scope=\"scope\"\\n      :store=\"store\">\\n    </vue-pipelines>\\n  '\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"lwLq\")))\n\n/***/ }),\n\n/***/ \"kmbW\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global gl, Flash */\n/* eslint-disable no-param-reassign */\n\n(function (gl) {\n  var pageValues = function pageValues(headers) {\n    var normalized = gl.utils.normalizeHeaders(headers);\n    var paginationInfo = gl.utils.parseIntPagination(normalized);\n    return paginationInfo;\n  };\n\n  gl.PipelineStore = function () {\n    function _class() {\n      _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n      key: 'fetchDataLoop',\n      value: function fetchDataLoop(Vue, pageNum, url, apiScope) {\n        var _this = this;\n\n        this.pageRequest = true;\n\n        return this.$http.get(url + '?scope=' + apiScope + '&page=' + pageNum).then(function (response) {\n          var pageInfo = pageValues(response.headers);\n          _this.pageInfo = Object.assign({}, _this.pageInfo, pageInfo);\n\n          var res = JSON.parse(response.body);\n          _this.count = Object.assign({}, _this.count, res.count);\n          _this.pipelines = Object.assign([], _this.pipelines, res.pipelines);\n\n          _this.pageRequest = false;\n        }, function () {\n          _this.pageRequest = false;\n          return new Flash('An error occurred while fetching the pipelines, please reload the page again.');\n        });\n      }\n    }]);\n\n    return _class;\n  }();\n})(window.gl || (window.gl = {}));\n\n/***/ })\n\n},[\"jsyL\"]);\n\n\n// WEBPACK FOOTER //\n// vue_pipelines.c5c67294c2fc61b4b2f2.bundle.js","/* global Vue, gl */\n/* eslint-disable no-param-reassign */\n\nwindow.Vue = require('vue');\n\nrequire('../vue_shared/components/table_pagination');\nrequire('./store');\nconst CommitPipelinesStoreWithTimeAgo = require('../commit/pipelines/pipelines_store');\nconst PipelinesTableComponent = require('../vue_shared/components/pipelines_table');\n\n((gl) => {\n  gl.VuePipelines = Vue.extend({\n\n    components: {\n      'gl-pagination': gl.VueGlPagination,\n      'pipelines-table-component': PipelinesTableComponent,\n    },\n\n    data() {\n      return {\n        pipelines: [],\n        timeLoopInterval: '',\n        intervalId: '',\n        apiScope: 'all',\n        pageInfo: {},\n        pagenum: 1,\n        count: {},\n        pageRequest: false,\n      };\n    },\n    props: ['scope', 'store'],\n    created() {\n      const pagenum = gl.utils.getParameterByName('page');\n      const scope = gl.utils.getParameterByName('scope');\n      if (pagenum) this.pagenum = pagenum;\n      if (scope) this.apiScope = scope;\n\n      this.store.fetchDataLoop.call(this, Vue, this.pagenum, this.scope, this.apiScope);\n    },\n\n    beforeUpdate() {\n      if (this.pipelines.length && this.$children) {\n        CommitPipelinesStoreWithTimeAgo.startTimeAgoLoops.call(this, Vue);\n      }\n    },\n\n    methods: {\n      /**\n       * Will change the page number and update the URL.\n       *\n       * @param  {Number} pageNumber desired page to go to.\n       */\n      change(pageNumber) {\n        const param = gl.utils.setParamInURL('page', pageNumber);\n\n        gl.utils.visitUrl(param);\n        return param;\n      },\n    },\n    template: `\n      <div>\n        <div class=\"pipelines realtime-loading\" v-if='pageRequest'>\n          <i class=\"fa fa-spinner fa-spin\"></i>\n        </div>\n\n        <div class=\"blank-state blank-state-no-icon\"\n          v-if=\"!pageRequest && pipelines.length === 0\">\n          <h2 class=\"blank-state-title js-blank-state-title\">\n            No pipelines to show\n          </h2>\n        </div>\n\n        <div class=\"table-holder\" v-if='!pageRequest && pipelines.length'>\n          <pipelines-table-component :pipelines='pipelines'/>\n        </div>\n\n        <gl-pagination\n          v-if='!pageRequest && pipelines.length && pageInfo.total > pageInfo.perPage'\n          :pagenum='pagenum'\n          :change='change'\n          :count='count.all'\n          :pageInfo='pageInfo'\n        >\n        </gl-pagination>\n      </div>\n    `,\n  });\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./vue_pipelines_index/pipelines.js","/* eslint-disable no-param-reassign */\n/* global Vue, VueResource, gl */\nwindow.Vue = require('vue');\nwindow.Vue.use(require('vue-resource'));\nrequire('../lib/utils/common_utils');\nrequire('../vue_shared/vue_resource_interceptor');\nrequire('./pipelines');\n\n$(() => new Vue({\n  el: document.querySelector('.vue-pipelines-index'),\n\n  data() {\n    const project = document.querySelector('.pipelines');\n\n    return {\n      scope: project.dataset.url,\n      store: new gl.PipelineStore(),\n    };\n  },\n  components: {\n    'vue-pipelines': gl.VuePipelines,\n  },\n  template: `\n    <vue-pipelines\n      :scope=\"scope\"\n      :store=\"store\">\n    </vue-pipelines>\n  `,\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./vue_pipelines_index/index.js","/* global gl, Flash */\n/* eslint-disable no-param-reassign */\n\n((gl) => {\n  const pageValues = (headers) => {\n    const normalized = gl.utils.normalizeHeaders(headers);\n    const paginationInfo = gl.utils.parseIntPagination(normalized);\n    return paginationInfo;\n  };\n\n  gl.PipelineStore = class {\n    fetchDataLoop(Vue, pageNum, url, apiScope) {\n      this.pageRequest = true;\n\n      return this.$http.get(`${url}?scope=${apiScope}&page=${pageNum}`)\n      .then((response) => {\n        const pageInfo = pageValues(response.headers);\n        this.pageInfo = Object.assign({}, this.pageInfo, pageInfo);\n\n        const res = JSON.parse(response.body);\n        this.count = Object.assign({}, this.count, res.count);\n        this.pipelines = Object.assign([], this.pipelines, res.pipelines);\n\n        this.pageRequest = false;\n      }, () => {\n        this.pageRequest = false;\n        return new Flash('An error occurred while fetching the pipelines, please reload the page again.');\n      });\n    }\n  };\n})(window.gl || (window.gl = {}));\n\n\n\n// WEBPACK FOOTER //\n// ./vue_pipelines_index/store.js"],"sourceRoot":""}