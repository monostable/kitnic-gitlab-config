{"version":3,"sources":["webpack:///filtered_search.749a7c5ab2493583449c.bundle.js","webpack:///./filtered_search/dropdown_non_user.js","webpack:///./filtered_search/filtered_search_visual_tokens.js","webpack:///./filtered_search/filtered_search_tokenizer.js","webpack:///./filtered_search/dropdown_hint.js","webpack:///./filtered_search/dropdown_utils.js","webpack:///./filtered_search/filtered_search_bundle.js","webpack:///./filtered_search/dropdown_user.js","webpack:///./filtered_search/filtered_search_dropdown.js","webpack:///./filtered_search/filtered_search_manager.js","webpack:///./filtered_search/filtered_search_dropdown_manager.js","webpack:///./filtered_search/filtered_search_token_keys.js"],"names":["webpackJsonp","6Dwg","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","DropdownNonUser","_gl$FilteredSearchDro","droplab","dropdown","input","filter","endpoint","symbol","this","_this","config","droplabAjax","method","loadingTemplate","droplabFilter","filterFunction","gl","DropdownUtils","filterWithSymbol","bind","e","_this2","selected","title","querySelector","innerText","trim","getEscapedText","forceShowList","arguments","changeHookList","hookId","addHook","init","FilteredSearchDropdown","window","G85/","FilteredSearchVisualTokens","inputLi","document","lastVisualToken","previousElementSibling","isLastVisualTokenValid","className","indexOf","otherTokens","querySelectorAll","forEach","t","classList","remove","tokenButton","contains","unselectTokens","add","li","closest","parentElement","removeChild","name","isSearchTerm","createElement","innerHTML","createVisualTokenElementHTML","tokensContainer","insertBefore","_FilteredSearchVisual","getLastVisualTokenBeforeInput","getLastTokenPartial","tokenName","tokenValue","_FilteredSearchVisual2","addVisualTokenElement","previousTokenName","searchTerm","_FilteredSearchVisual3","_FilteredSearchVisual4","valueText","nameText","_FilteredSearchVisual5","button","_gl$FilteredSearchVis","addSearchVisualToken","addValueToPreviousVisualTokenElement","token","tokenizeInput","tokenContainer","replaceChild","addFilterVisualToken","inputEvent","Event","dispatchEvent","focus","lastElementChild","isEqualNode","_gl$FilteredSearchVis2","lastPartial","removeLastTokenPartial","appendChild","LrW2","FilteredSearchTokenizer","allowedKeys","FilteredSearchTokenKeys","map","tokenRegex","RegExp","join","tokens","lastToken","searchToken","replace","match","v1","v2","v3","tokenSymbol","push","last","lastString","lastIndexOf","MxQn","DropdownHint","template","filterHint","detail","tagName","hasAttribute","dismissDropdown","getAttribute","dispatchFormSubmitEvent","tag","previousInputValues","split","searchTerms","index","toLowerCase","pop","FilteredSearchDropdownManager","addWordToInput","dispatchInputEvent","dropdownData","dropdownMenu","_dropdownMenu$dataset","dataset","icon","hint","setData","Z/Bu","text","escapedText","hasSpace","hasDoubleQuote","filterSymbol","item","updatedItem","searchInput","getSearchInput","slice","matchWithoutSymbol","droplab_hidden","_gl$FilteredSearchTok","processTokens","dataValue","untilInput","values","inputIndex","_","findIndex","splice","inputValue","previous","filteredSearchInput","_gl$DropdownUtils$get","getInputSelectionPosition","right","selectionStart","str","search","left","ZbqE","jVBp","DropdownUser","droplabAjaxFilter","gon","relative_url_root","searchKey","params","per_page","active","project_id","getProjectId","current_user","searchValueFunction","query","noYj","DATA_DROPDOWN_TRIGGER","bindEvents","itemClickedWrapper","itemClicked","addEventListener","removeEventListener","hooks","h","id","getValueFunction","dataValueSet","setDataValueIfSelected","resetFilters","setAttribute","offset","innerWidth","style","currentHook","getCurrentHook","list","hidden","show","forceRenderContent","setAsDropdown","firstTimeInitialized","renderContent","CustomEvent","bubbles","cancelable","form","hide","hook","data","results","o","updated","render","nyRt","FilteredSearchManager","page","clearSearchButton","filteredSearchTokenKeys","tokenizer","dropdownManager","loadSearchParamsFromURL","setDropdown","cleanupWrapper","cleanup","unbindEvents","handleFormSubmit","setDropdownWrapper","toggleClearSearchButtonWrapper","toggleClearSearchButton","handleInputPlaceholderWrapper","handleInputPlaceholder","handleInputVisualTokenWrapper","handleInputVisualToken","checkForEnterWrapper","checkForEnter","clearSearchWrapper","clearSearch","checkForBackspaceWrapper","checkForBackspace","removeSelectedTokenWrapper","removeSelectedToken","unselectEditTokensWrapper","unselectEditTokens","editTokenWrapper","editToken","tokenChange","addInputContainerFocusWrapper","addInputContainerFocus","removeInputContainerFocusWrapper","removeInputContainerFocus","selectToken","keyCode","updateCurrentDropdownOffset","preventDefault","setSelectionRange","mapping","currentDropdown","dropdownEl","element","activeElements","destroyDroplab","inputContainer","isElementInFilteredSearch","isElementInDynamicFilterDropdown","isElementInStaticFilterDropdown","isElementInFilterDropdown","isElementTokensContainer","moveInputToTheRight","resetDropdowns","getSearchQuery","hasHidden","placeholder","currentPlaceholder","removeElements","children","el","fragments","inputValues","tokenKey","valueCompletedRegex","utils","getUrlParamsArray","usernameParams","getUsernameParams","hasFilteredSearch","p","keyParam","decodeURIComponent","condition","searchByConditionUrl","sanitizedValue","searchByKeyParam","sanitizedKey","quotationsToUse","parseInt","paths","_tokenizer$processTok","currentState","getParameterByName","searchByConditionKeyValue","_ref","searchByKey","param","tokenPath","url","encodeURIComponent","sanitized","parameterizedUrl","visitUrl","usernamesById","attribute","JSON","parse","user","username","currentDropdownRef","reference","stopPropagation","tI+A","baseEndpoint","setupMapping","destroy","author","assignee","milestone","extraArguments","label","updateDropdownOffset","getBoundingClientRect","maxInputWidth","currentDropdownWidth","clientWidth","offsetMaxWidth","setOffset","firstLoad","mappingKey","glClass","dl","defaultArguments","glArguments","concat","apply","dropdownName","DropLab","shouldOpenFilterDropdown","shouldOpenHintDropdown","load","loadDropdown","hideDropdown","clicked","zrWn","tokenKeys","type","alternativeTokenKeys","tokenKeysWithAlternative","conditions","find","tokenKeyParam"],"mappings":"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","file":"filtered_search.749a7c5ab2493583449c.bundle.js","sourcesContent":["webpackJsonp([7,25,26],{\n\n/***/ \"6Dwg\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(\"noYj\");\n\n/* global droplabAjax */\n/* global droplabFilter */\n\n(function () {\n  var DropdownNonUser = function (_gl$FilteredSearchDro) {\n    _inherits(DropdownNonUser, _gl$FilteredSearchDro);\n\n    function DropdownNonUser(droplab, dropdown, input, filter, endpoint, symbol) {\n      _classCallCheck(this, DropdownNonUser);\n\n      var _this = _possibleConstructorReturn(this, (DropdownNonUser.__proto__ || Object.getPrototypeOf(DropdownNonUser)).call(this, droplab, dropdown, input, filter));\n\n      _this.symbol = symbol;\n      _this.config = {\n        droplabAjax: {\n          endpoint: endpoint,\n          method: 'setData',\n          loadingTemplate: _this.loadingTemplate\n        },\n        droplabFilter: {\n          filterFunction: gl.DropdownUtils.filterWithSymbol.bind(null, _this.symbol, input)\n        }\n      };\n      return _this;\n    }\n\n    _createClass(DropdownNonUser, [{\n      key: 'itemClicked',\n      value: function itemClicked(e) {\n        var _this2 = this;\n\n        _get(DropdownNonUser.prototype.__proto__ || Object.getPrototypeOf(DropdownNonUser.prototype), 'itemClicked', this).call(this, e, function (selected) {\n          var title = selected.querySelector('.js-data-value').innerText.trim();\n          return '' + _this2.symbol + gl.DropdownUtils.getEscapedText(title);\n        });\n      }\n    }, {\n      key: 'renderContent',\n      value: function renderContent() {\n        var forceShowList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        this.droplab.changeHookList(this.hookId, this.dropdown, [droplabAjax, droplabFilter], this.config);\n        _get(DropdownNonUser.prototype.__proto__ || Object.getPrototypeOf(DropdownNonUser.prototype), 'renderContent', this).call(this, forceShowList);\n      }\n    }, {\n      key: 'init',\n      value: function init() {\n        this.droplab.addHook(this.input, this.dropdown, [droplabAjax, droplabFilter], this.config).init();\n      }\n    }]);\n\n    return DropdownNonUser;\n  }(gl.FilteredSearchDropdown);\n\n  window.gl = window.gl || {};\n  gl.DropdownNonUser = DropdownNonUser;\n})();\n\n/***/ }),\n\n/***/ \"G85/\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FilteredSearchVisualTokens = function () {\n  function FilteredSearchVisualTokens() {\n    _classCallCheck(this, FilteredSearchVisualTokens);\n  }\n\n  _createClass(FilteredSearchVisualTokens, null, [{\n    key: 'getLastVisualTokenBeforeInput',\n    value: function getLastVisualTokenBeforeInput() {\n      var inputLi = document.querySelector('.input-token');\n      var lastVisualToken = inputLi && inputLi.previousElementSibling;\n\n      return {\n        lastVisualToken: lastVisualToken,\n        isLastVisualTokenValid: lastVisualToken === null || lastVisualToken.className.indexOf('filtered-search-term') !== -1 || lastVisualToken && lastVisualToken.querySelector('.value') !== null\n      };\n    }\n  }, {\n    key: 'unselectTokens',\n    value: function unselectTokens() {\n      var otherTokens = document.querySelectorAll('.js-visual-token .selectable.selected');\n      [].forEach.call(otherTokens, function (t) {\n        return t.classList.remove('selected');\n      });\n    }\n  }, {\n    key: 'selectToken',\n    value: function selectToken(tokenButton) {\n      var selected = tokenButton.classList.contains('selected');\n      FilteredSearchVisualTokens.unselectTokens();\n\n      if (!selected) {\n        tokenButton.classList.add('selected');\n      }\n    }\n  }, {\n    key: 'removeSelectedToken',\n    value: function removeSelectedToken() {\n      var selected = document.querySelector('.js-visual-token .selected');\n\n      if (selected) {\n        var li = selected.closest('.js-visual-token');\n        li.parentElement.removeChild(li);\n      }\n    }\n  }, {\n    key: 'createVisualTokenElementHTML',\n    value: function createVisualTokenElementHTML() {\n      return '\\n      <div class=\"selectable\" role=\"button\">\\n        <div class=\"name\"></div>\\n        <div class=\"value\"></div>\\n      </div>\\n    ';\n    }\n  }, {\n    key: 'addVisualTokenElement',\n    value: function addVisualTokenElement(name, value, isSearchTerm) {\n      var li = document.createElement('li');\n      li.classList.add('js-visual-token');\n      li.classList.add(isSearchTerm ? 'filtered-search-term' : 'filtered-search-token');\n\n      if (value) {\n        li.innerHTML = FilteredSearchVisualTokens.createVisualTokenElementHTML();\n        li.querySelector('.value').innerText = value;\n      } else {\n        li.innerHTML = '<div class=\"name\"></div>';\n      }\n      li.querySelector('.name').innerText = name;\n\n      var tokensContainer = document.querySelector('.tokens-container');\n      var input = document.querySelector('.filtered-search');\n      tokensContainer.insertBefore(li, input.parentElement);\n    }\n  }, {\n    key: 'addValueToPreviousVisualTokenElement',\n    value: function addValueToPreviousVisualTokenElement(value) {\n      var _FilteredSearchVisual = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          lastVisualToken = _FilteredSearchVisual.lastVisualToken,\n          isLastVisualTokenValid = _FilteredSearchVisual.isLastVisualTokenValid;\n\n      if (!isLastVisualTokenValid && lastVisualToken.classList.contains('filtered-search-token')) {\n        var name = FilteredSearchVisualTokens.getLastTokenPartial();\n        lastVisualToken.innerHTML = FilteredSearchVisualTokens.createVisualTokenElementHTML();\n        lastVisualToken.querySelector('.name').innerText = name;\n        lastVisualToken.querySelector('.value').innerText = value;\n      }\n    }\n  }, {\n    key: 'addFilterVisualToken',\n    value: function addFilterVisualToken(tokenName, tokenValue) {\n      var _FilteredSearchVisual2 = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          lastVisualToken = _FilteredSearchVisual2.lastVisualToken,\n          isLastVisualTokenValid = _FilteredSearchVisual2.isLastVisualTokenValid;\n\n      var addVisualTokenElement = FilteredSearchVisualTokens.addVisualTokenElement;\n\n      if (isLastVisualTokenValid) {\n        addVisualTokenElement(tokenName, tokenValue);\n      } else {\n        var previousTokenName = lastVisualToken.querySelector('.name').innerText;\n        var tokensContainer = document.querySelector('.tokens-container');\n        tokensContainer.removeChild(lastVisualToken);\n\n        var value = tokenValue || tokenName;\n        addVisualTokenElement(previousTokenName, value);\n      }\n    }\n  }, {\n    key: 'addSearchVisualToken',\n    value: function addSearchVisualToken(searchTerm) {\n      var _FilteredSearchVisual3 = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          lastVisualToken = _FilteredSearchVisual3.lastVisualToken;\n\n      if (lastVisualToken && lastVisualToken.classList.contains('filtered-search-term')) {\n        lastVisualToken.querySelector('.name').innerText += ' ' + searchTerm;\n      } else {\n        FilteredSearchVisualTokens.addVisualTokenElement(searchTerm, null, true);\n      }\n    }\n  }, {\n    key: 'getLastTokenPartial',\n    value: function getLastTokenPartial() {\n      var _FilteredSearchVisual4 = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          lastVisualToken = _FilteredSearchVisual4.lastVisualToken;\n\n      if (!lastVisualToken) return '';\n\n      var value = lastVisualToken.querySelector('.value');\n      var name = lastVisualToken.querySelector('.name');\n\n      var valueText = value ? value.innerText : '';\n      var nameText = name ? name.innerText : '';\n\n      return valueText || nameText;\n    }\n  }, {\n    key: 'removeLastTokenPartial',\n    value: function removeLastTokenPartial() {\n      var _FilteredSearchVisual5 = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          lastVisualToken = _FilteredSearchVisual5.lastVisualToken;\n\n      if (lastVisualToken) {\n        var value = lastVisualToken.querySelector('.value');\n\n        if (value) {\n          var button = lastVisualToken.querySelector('.selectable');\n          button.removeChild(value);\n          lastVisualToken.innerHTML = button.innerHTML;\n        } else {\n          lastVisualToken.closest('.tokens-container').removeChild(lastVisualToken);\n        }\n      }\n    }\n  }, {\n    key: 'tokenizeInput',\n    value: function tokenizeInput() {\n      var input = document.querySelector('.filtered-search');\n\n      var _gl$FilteredSearchVis = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n          isLastVisualTokenValid = _gl$FilteredSearchVis.isLastVisualTokenValid;\n\n      if (input.value) {\n        if (isLastVisualTokenValid) {\n          gl.FilteredSearchVisualTokens.addSearchVisualToken(input.value);\n        } else {\n          FilteredSearchVisualTokens.addValueToPreviousVisualTokenElement(input.value);\n        }\n\n        input.value = '';\n      }\n    }\n  }, {\n    key: 'editToken',\n    value: function editToken(token) {\n      var input = document.querySelector('.filtered-search');\n\n      FilteredSearchVisualTokens.tokenizeInput();\n\n      // Replace token with input field\n      var tokenContainer = token.parentElement;\n      var inputLi = input.parentElement;\n      tokenContainer.replaceChild(inputLi, token);\n\n      var name = token.querySelector('.name');\n      var value = token.querySelector('.value');\n\n      if (token.classList.contains('filtered-search-token') && value) {\n        FilteredSearchVisualTokens.addFilterVisualToken(name.innerText);\n        input.value = value.innerText;\n      } else {\n        // token is a search term\n        input.value = name.innerText;\n      }\n\n      // Opens dropdown\n      var inputEvent = new Event('input');\n      input.dispatchEvent(inputEvent);\n\n      // Adds cursor to input\n      input.focus();\n    }\n  }, {\n    key: 'moveInputToTheRight',\n    value: function moveInputToTheRight() {\n      var input = document.querySelector('.filtered-search');\n      var inputLi = input.parentElement;\n      var tokenContainer = document.querySelector('.tokens-container');\n\n      FilteredSearchVisualTokens.tokenizeInput();\n\n      if (!tokenContainer.lastElementChild.isEqualNode(inputLi)) {\n        var _gl$FilteredSearchVis2 = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n            isLastVisualTokenValid = _gl$FilteredSearchVis2.isLastVisualTokenValid;\n\n        if (!isLastVisualTokenValid) {\n          var lastPartial = gl.FilteredSearchVisualTokens.getLastTokenPartial();\n          gl.FilteredSearchVisualTokens.removeLastTokenPartial();\n          gl.FilteredSearchVisualTokens.addSearchVisualToken(lastPartial);\n        }\n\n        tokenContainer.removeChild(inputLi);\n        tokenContainer.appendChild(inputLi);\n      }\n    }\n  }]);\n\n  return FilteredSearchVisualTokens;\n}();\n\nwindow.gl = window.gl || {};\ngl.FilteredSearchVisualTokens = FilteredSearchVisualTokens;\n\n/***/ }),\n\n/***/ \"LrW2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n__webpack_require__(\"zrWn\");\n\n(function () {\n  var FilteredSearchTokenizer = function () {\n    function FilteredSearchTokenizer() {\n      _classCallCheck(this, FilteredSearchTokenizer);\n    }\n\n    _createClass(FilteredSearchTokenizer, null, [{\n      key: 'processTokens',\n      value: function processTokens(input) {\n        var allowedKeys = gl.FilteredSearchTokenKeys.get().map(function (i) {\n          return i.key;\n        });\n        // Regex extracts `(token):(symbol)(value)`\n        // Values that start with a double quote must end in a double quote (same for single)\n        var tokenRegex = new RegExp('(' + allowedKeys.join('|') + '):([~%@]?)(?:(\\'[^\\']*\\'{0,1})|(\"[^\"]*\"{0,1})|(\\\\S+))', 'g');\n        var tokens = [];\n        var lastToken = null;\n        var searchToken = input.replace(tokenRegex, function (match, key, symbol, v1, v2, v3) {\n          var tokenValue = v1 || v2 || v3;\n          var tokenSymbol = symbol;\n\n          if (tokenValue === '~' || tokenValue === '%' || tokenValue === '@') {\n            tokenSymbol = tokenValue;\n            tokenValue = '';\n          }\n\n          tokens.push({\n            key: key,\n            value: tokenValue || '',\n            symbol: tokenSymbol || ''\n          });\n          return '';\n        }).replace(/\\s{2,}/g, ' ').trim() || '';\n\n        if (tokens.length > 0) {\n          var last = tokens[tokens.length - 1];\n          var lastString = last.key + ':' + last.symbol + last.value;\n          lastToken = input.lastIndexOf(lastString) === input.length - lastString.length ? last : searchToken;\n        } else {\n          lastToken = searchToken;\n        }\n\n        return {\n          tokens: tokens,\n          lastToken: lastToken,\n          searchToken: searchToken\n        };\n      }\n    }]);\n\n    return FilteredSearchTokenizer;\n  }();\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchTokenizer = FilteredSearchTokenizer;\n})();\n\n/***/ }),\n\n/***/ \"MxQn\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(\"noYj\");\n\n/* global droplabFilter */\n\n(function () {\n  var DropdownHint = function (_gl$FilteredSearchDro) {\n    _inherits(DropdownHint, _gl$FilteredSearchDro);\n\n    function DropdownHint(droplab, dropdown, input, filter) {\n      _classCallCheck(this, DropdownHint);\n\n      var _this = _possibleConstructorReturn(this, (DropdownHint.__proto__ || Object.getPrototypeOf(DropdownHint)).call(this, droplab, dropdown, input, filter));\n\n      _this.config = {\n        droplabFilter: {\n          template: 'hint',\n          filterFunction: gl.DropdownUtils.filterHint.bind(null, input)\n        }\n      };\n      return _this;\n    }\n\n    _createClass(DropdownHint, [{\n      key: 'itemClicked',\n      value: function itemClicked(e) {\n        var selected = e.detail.selected;\n\n\n        if (selected.tagName === 'LI') {\n          if (selected.hasAttribute('data-value')) {\n            this.dismissDropdown();\n          } else if (selected.getAttribute('data-action') === 'submit') {\n            this.dismissDropdown();\n            this.dispatchFormSubmitEvent();\n          } else {\n            var token = selected.querySelector('.js-filter-hint').innerText.trim();\n            var tag = selected.querySelector('.js-filter-tag').innerText.trim();\n\n            if (tag.length) {\n              // Get previous input values in the input field and convert them into visual tokens\n              var previousInputValues = this.input.value.split(' ');\n              var searchTerms = [];\n\n              previousInputValues.forEach(function (value, index) {\n                searchTerms.push(value);\n\n                if (index === previousInputValues.length - 1 && token.indexOf(value.toLowerCase()) !== -1) {\n                  searchTerms.pop();\n                }\n              });\n\n              if (searchTerms.length > 0) {\n                gl.FilteredSearchVisualTokens.addSearchVisualToken(searchTerms.join(' '));\n              }\n\n              gl.FilteredSearchDropdownManager.addWordToInput(token.replace(':', ''));\n            }\n            this.dismissDropdown();\n            this.dispatchInputEvent();\n          }\n        }\n      }\n    }, {\n      key: 'renderContent',\n      value: function renderContent() {\n        var dropdownData = [];\n\n        [].forEach.call(this.input.closest('.filtered-search-input-container').querySelectorAll('.dropdown-menu'), function (dropdownMenu) {\n          var _dropdownMenu$dataset = dropdownMenu.dataset,\n              icon = _dropdownMenu$dataset.icon,\n              hint = _dropdownMenu$dataset.hint,\n              tag = _dropdownMenu$dataset.tag;\n\n          if (icon && hint && tag) {\n            dropdownData.push({\n              icon: 'fa-' + icon,\n              hint: hint,\n              tag: '&lt;' + tag + '&gt;'\n            });\n          }\n        });\n\n        this.droplab.changeHookList(this.hookId, this.dropdown, [droplabFilter], this.config);\n        this.droplab.setData(this.hookId, dropdownData);\n      }\n    }, {\n      key: 'init',\n      value: function init() {\n        this.droplab.addHook(this.input, this.dropdown, [droplabFilter], this.config).init();\n      }\n    }]);\n\n    return DropdownHint;\n  }(gl.FilteredSearchDropdown);\n\n  window.gl = window.gl || {};\n  gl.DropdownHint = DropdownHint;\n})();\n\n/***/ }),\n\n/***/ \"Z/Bu\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  var DropdownUtils = function () {\n    function DropdownUtils() {\n      _classCallCheck(this, DropdownUtils);\n    }\n\n    _createClass(DropdownUtils, null, [{\n      key: 'getEscapedText',\n      value: function getEscapedText(text) {\n        var escapedText = text;\n        var hasSpace = text.indexOf(' ') !== -1;\n        var hasDoubleQuote = text.indexOf('\"') !== -1;\n\n        // Encapsulate value with quotes if it has spaces\n        // Known side effect: values's with both single and double quotes\n        // won't escape properly\n        if (hasSpace) {\n          if (hasDoubleQuote) {\n            escapedText = '\\'' + text + '\\'';\n          } else {\n            // Encapsulate singleQuotes or if it hasSpace\n            escapedText = '\"' + text + '\"';\n          }\n        }\n\n        return escapedText;\n      }\n    }, {\n      key: 'filterWithSymbol',\n      value: function filterWithSymbol(filterSymbol, input, item) {\n        var updatedItem = item;\n        var searchInput = gl.DropdownUtils.getSearchInput(input);\n\n        var title = updatedItem.title.toLowerCase();\n        var value = searchInput.toLowerCase();\n        var symbol = '';\n\n        // Remove the symbol for filter\n        if (value[0] === filterSymbol) {\n          symbol = value[0];\n          value = value.slice(1);\n        }\n\n        // Removes the first character if it is a quotation so that we can search\n        // with multiple words\n        if ((value[0] === '\"' || value[0] === '\\'') && title.indexOf(' ') !== -1) {\n          value = value.slice(1);\n        }\n\n        // Eg. filterSymbol = ~ for labels\n        var matchWithoutSymbol = symbol === filterSymbol && title.indexOf(value) !== -1;\n        var match = title.indexOf('' + symbol + value) !== -1;\n\n        updatedItem.droplab_hidden = !match && !matchWithoutSymbol;\n\n        return updatedItem;\n      }\n    }, {\n      key: 'filterHint',\n      value: function filterHint(input, item) {\n        var updatedItem = item;\n        var searchInput = gl.DropdownUtils.getSearchInput(input);\n\n        var _gl$FilteredSearchTok = gl.FilteredSearchTokenizer.processTokens(searchInput),\n            lastToken = _gl$FilteredSearchTok.lastToken;\n\n        lastToken = lastToken.key || lastToken || '';\n\n        if (!lastToken || searchInput.split('').last() === ' ') {\n          updatedItem.droplab_hidden = false;\n        } else if (lastToken) {\n          var split = lastToken.split(':');\n          var tokenName = split[0].split(' ').last();\n\n          var match = updatedItem.hint.indexOf(tokenName.toLowerCase()) === -1;\n          updatedItem.droplab_hidden = tokenName ? match : false;\n        }\n\n        return updatedItem;\n      }\n    }, {\n      key: 'setDataValueIfSelected',\n      value: function setDataValueIfSelected(filter, selected) {\n        var dataValue = selected.getAttribute('data-value');\n\n        if (dataValue) {\n          gl.FilteredSearchDropdownManager.addWordToInput(filter, dataValue, true);\n        }\n\n        // Return boolean based on whether it was set\n        return dataValue !== null;\n      }\n\n      // Determines the full search query (visual tokens + input)\n\n    }, {\n      key: 'getSearchQuery',\n      value: function getSearchQuery() {\n        var untilInput = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        var tokens = [].slice.call(document.querySelectorAll('.tokens-container li'));\n        var values = [];\n\n        if (untilInput) {\n          var inputIndex = _.findIndex(tokens, function (t) {\n            return t.classList.contains('input-token');\n          });\n          // Add one to include input-token to the tokens array\n          tokens.splice(inputIndex + 1);\n        }\n\n        tokens.forEach(function (token) {\n          if (token.classList.contains('js-visual-token')) {\n            var name = token.querySelector('.name');\n            var value = token.querySelector('.value');\n            var symbol = value && value.dataset.symbol ? value.dataset.symbol : '';\n            var valueText = '';\n\n            if (value && value.innerText) {\n              valueText = value.innerText;\n            }\n\n            if (token.className.indexOf('filtered-search-token') !== -1) {\n              values.push(name.innerText.toLowerCase() + ':' + symbol + valueText);\n            } else {\n              values.push(name.innerText);\n            }\n          } else if (token.classList.contains('input-token')) {\n            var _gl$FilteredSearchVis = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n                isLastVisualTokenValid = _gl$FilteredSearchVis.isLastVisualTokenValid;\n\n            var input = document.querySelector('.filtered-search');\n            var inputValue = input && input.value;\n\n            if (isLastVisualTokenValid) {\n              values.push(inputValue);\n            } else {\n              var previous = values.pop();\n              values.push('' + previous + inputValue);\n            }\n          }\n        });\n\n        return values.join(' ');\n      }\n    }, {\n      key: 'getSearchInput',\n      value: function getSearchInput(filteredSearchInput) {\n        var inputValue = filteredSearchInput.value;\n\n        var _gl$DropdownUtils$get = gl.DropdownUtils.getInputSelectionPosition(filteredSearchInput),\n            right = _gl$DropdownUtils$get.right;\n\n        return inputValue.slice(0, right);\n      }\n    }, {\n      key: 'getInputSelectionPosition',\n      value: function getInputSelectionPosition(input) {\n        var selectionStart = input.selectionStart;\n        var inputValue = input.value;\n        // Replace all spaces inside quote marks with underscores\n        // (will continue to match entire string until an end quote is found if any)\n        // This helps with matching the beginning & end of a token:key\n        inputValue = inputValue.replace(/(('[^']*'{0,1})|(\"[^\"]*\"{0,1})|:\\s+)/g, function (str) {\n          return str.replace(/\\s/g, '_');\n        });\n\n        // Get the right position for the word selected\n        // Regex matches first space\n        var right = inputValue.slice(selectionStart).search(/\\s/);\n\n        if (right >= 0) {\n          right += selectionStart;\n        } else if (right < 0) {\n          right = inputValue.length;\n        }\n\n        // Get the left position for the word selected\n        // Regex matches last non-whitespace character\n        var left = inputValue.slice(0, right).search(/\\S+$/);\n\n        if (selectionStart === 0) {\n          left = 0;\n        } else if (selectionStart === inputValue.length && left < 0) {\n          left = inputValue.length;\n        } else if (left < 0) {\n          left = selectionStart;\n        }\n\n        return {\n          left: left,\n          right: right\n        };\n      }\n    }]);\n\n    return DropdownUtils;\n  }();\n\n  window.gl = window.gl || {};\n  gl.DropdownUtils = DropdownUtils;\n})();\n\n/***/ }),\n\n/***/ \"ZbqE\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"MxQn\");\n__webpack_require__(\"6Dwg\");\n__webpack_require__(\"jVBp\");\n__webpack_require__(\"Z/Bu\");\n__webpack_require__(\"tI+A\");\n__webpack_require__(\"noYj\");\n__webpack_require__(\"nyRt\");\n__webpack_require__(\"zrWn\");\n__webpack_require__(\"LrW2\");\n__webpack_require__(\"G85/\");\n\n/***/ }),\n\n/***/ \"jVBp\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(\"noYj\");\n\n/* global droplabAjaxFilter */\n\n(function () {\n  var DropdownUser = function (_gl$FilteredSearchDro) {\n    _inherits(DropdownUser, _gl$FilteredSearchDro);\n\n    function DropdownUser(droplab, dropdown, input, filter) {\n      _classCallCheck(this, DropdownUser);\n\n      var _this = _possibleConstructorReturn(this, (DropdownUser.__proto__ || Object.getPrototypeOf(DropdownUser)).call(this, droplab, dropdown, input, filter));\n\n      _this.config = {\n        droplabAjaxFilter: {\n          endpoint: (gon.relative_url_root || '') + '/autocomplete/users.json',\n          searchKey: 'search',\n          params: {\n            per_page: 20,\n            active: true,\n            project_id: _this.getProjectId(),\n            current_user: true\n          },\n          searchValueFunction: _this.getSearchInput.bind(_this),\n          loadingTemplate: _this.loadingTemplate\n        }\n      };\n      return _this;\n    }\n\n    _createClass(DropdownUser, [{\n      key: 'itemClicked',\n      value: function itemClicked(e) {\n        _get(DropdownUser.prototype.__proto__ || Object.getPrototypeOf(DropdownUser.prototype), 'itemClicked', this).call(this, e, function (selected) {\n          return selected.querySelector('.dropdown-light-content').innerText.trim();\n        });\n      }\n    }, {\n      key: 'renderContent',\n      value: function renderContent() {\n        var forceShowList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        this.droplab.changeHookList(this.hookId, this.dropdown, [droplabAjaxFilter], this.config);\n        _get(DropdownUser.prototype.__proto__ || Object.getPrototypeOf(DropdownUser.prototype), 'renderContent', this).call(this, forceShowList);\n      }\n    }, {\n      key: 'getProjectId',\n      value: function getProjectId() {\n        return this.input.getAttribute('data-project-id');\n      }\n    }, {\n      key: 'getSearchInput',\n      value: function getSearchInput() {\n        var query = gl.DropdownUtils.getSearchInput(this.input);\n\n        var _gl$FilteredSearchTok = gl.FilteredSearchTokenizer.processTokens(query),\n            lastToken = _gl$FilteredSearchTok.lastToken;\n\n        var value = lastToken || '';\n\n        if (value[0] === '@') {\n          value = value.slice(1);\n        }\n\n        // Removes the first character if it is a quotation so that we can search\n        // with multiple words\n        if (value[0] === '\"' || value[0] === '\\'') {\n          value = value.slice(1);\n        }\n\n        return value;\n      }\n    }, {\n      key: 'init',\n      value: function init() {\n        this.droplab.addHook(this.input, this.dropdown, [droplabAjaxFilter], this.config).init();\n      }\n    }]);\n\n    return DropdownUser;\n  }(gl.FilteredSearchDropdown);\n\n  window.gl = window.gl || {};\n  gl.DropdownUser = DropdownUser;\n})();\n\n/***/ }),\n\n/***/ \"noYj\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  var DATA_DROPDOWN_TRIGGER = 'data-dropdown-trigger';\n\n  var FilteredSearchDropdown = function () {\n    function FilteredSearchDropdown(droplab, dropdown, input, filter) {\n      _classCallCheck(this, FilteredSearchDropdown);\n\n      this.droplab = droplab;\n      this.hookId = input && input.getAttribute('data-id');\n      this.input = input;\n      this.filter = filter;\n      this.dropdown = dropdown;\n      this.loadingTemplate = '<div class=\"filter-dropdown-loading\">\\n        <i class=\"fa fa-spinner fa-spin\"></i>\\n      </div>';\n      this.bindEvents();\n    }\n\n    _createClass(FilteredSearchDropdown, [{\n      key: 'bindEvents',\n      value: function bindEvents() {\n        this.itemClickedWrapper = this.itemClicked.bind(this);\n        this.dropdown.addEventListener('click.dl', this.itemClickedWrapper);\n      }\n    }, {\n      key: 'unbindEvents',\n      value: function unbindEvents() {\n        this.dropdown.removeEventListener('click.dl', this.itemClickedWrapper);\n      }\n    }, {\n      key: 'getCurrentHook',\n      value: function getCurrentHook() {\n        var _this = this;\n\n        return this.droplab.hooks.filter(function (h) {\n          return h.id === _this.hookId;\n        })[0] || null;\n      }\n    }, {\n      key: 'itemClicked',\n      value: function itemClicked(e, getValueFunction) {\n        var selected = e.detail.selected;\n\n\n        if (selected.tagName === 'LI' && selected.innerHTML) {\n          var dataValueSet = gl.DropdownUtils.setDataValueIfSelected(this.filter, selected);\n\n          if (!dataValueSet) {\n            var value = getValueFunction(selected);\n            gl.FilteredSearchDropdownManager.addWordToInput(this.filter, value, true);\n          }\n\n          this.resetFilters();\n          this.dismissDropdown();\n          this.dispatchInputEvent();\n        }\n      }\n    }, {\n      key: 'setAsDropdown',\n      value: function setAsDropdown() {\n        this.input.setAttribute(DATA_DROPDOWN_TRIGGER, '#' + this.dropdown.id);\n      }\n    }, {\n      key: 'setOffset',\n      value: function setOffset() {\n        var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n        if (window.innerWidth > 480) {\n          this.dropdown.style.left = offset + 'px';\n        } else {\n          this.dropdown.style.left = '0px';\n        }\n      }\n    }, {\n      key: 'renderContent',\n      value: function renderContent() {\n        var forceShowList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        var currentHook = this.getCurrentHook();\n        if (forceShowList && currentHook && currentHook.list.hidden) {\n          currentHook.list.show();\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var forceRenderContent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var forceShowList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        this.setAsDropdown();\n\n        var currentHook = this.getCurrentHook();\n        var firstTimeInitialized = currentHook === null;\n\n        if (firstTimeInitialized || forceRenderContent) {\n          this.renderContent(forceShowList);\n        } else if (currentHook.list.list.id !== this.dropdown.id) {\n          this.renderContent(forceShowList);\n        }\n      }\n    }, {\n      key: 'dismissDropdown',\n      value: function dismissDropdown() {\n        // Focusing on the input will dismiss dropdown\n        // (default droplab functionality)\n        this.input.focus();\n      }\n    }, {\n      key: 'dispatchInputEvent',\n      value: function dispatchInputEvent() {\n        // Propogate input change to FilteredSearchDropdownManager\n        // so that it can determine which dropdowns to open\n        this.input.dispatchEvent(new CustomEvent('input', {\n          bubbles: true,\n          cancelable: true\n        }));\n      }\n    }, {\n      key: 'dispatchFormSubmitEvent',\n      value: function dispatchFormSubmitEvent() {\n        // dispatchEvent() is necessary as form.submit() does not\n        // trigger event handlers\n        this.input.form.dispatchEvent(new Event('submit'));\n      }\n    }, {\n      key: 'hideDropdown',\n      value: function hideDropdown() {\n        var currentHook = this.getCurrentHook();\n        if (currentHook) {\n          currentHook.list.hide();\n        }\n      }\n    }, {\n      key: 'resetFilters',\n      value: function resetFilters() {\n        var hook = this.getCurrentHook();\n\n        if (hook) {\n          var data = hook.list.data || [];\n          var results = data.map(function (o) {\n            var updated = o;\n            updated.droplab_hidden = false;\n            return updated;\n          });\n          hook.list.render(results);\n        }\n      }\n    }]);\n\n    return FilteredSearchDropdown;\n  }();\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchDropdown = FilteredSearchDropdown;\n})();\n\n/***/ }),\n\n/***/ \"nyRt\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  var FilteredSearchManager = function () {\n    function FilteredSearchManager(page) {\n      _classCallCheck(this, FilteredSearchManager);\n\n      this.filteredSearchInput = document.querySelector('.filtered-search');\n      this.clearSearchButton = document.querySelector('.clear-search');\n      this.tokensContainer = document.querySelector('.tokens-container');\n      this.filteredSearchTokenKeys = gl.FilteredSearchTokenKeys;\n\n      if (this.filteredSearchInput) {\n        this.tokenizer = gl.FilteredSearchTokenizer;\n        this.dropdownManager = new gl.FilteredSearchDropdownManager(this.filteredSearchInput.getAttribute('data-base-endpoint') || '', page);\n\n        this.bindEvents();\n        this.loadSearchParamsFromURL();\n        this.dropdownManager.setDropdown();\n\n        this.cleanupWrapper = this.cleanup.bind(this);\n        document.addEventListener('beforeunload', this.cleanupWrapper);\n      }\n    }\n\n    _createClass(FilteredSearchManager, [{\n      key: 'cleanup',\n      value: function cleanup() {\n        this.unbindEvents();\n        document.removeEventListener('beforeunload', this.cleanupWrapper);\n      }\n    }, {\n      key: 'bindEvents',\n      value: function bindEvents() {\n        this.handleFormSubmit = this.handleFormSubmit.bind(this);\n        this.setDropdownWrapper = this.dropdownManager.setDropdown.bind(this.dropdownManager);\n        this.toggleClearSearchButtonWrapper = this.toggleClearSearchButton.bind(this);\n        this.handleInputPlaceholderWrapper = this.handleInputPlaceholder.bind(this);\n        this.handleInputVisualTokenWrapper = this.handleInputVisualToken.bind(this);\n        this.checkForEnterWrapper = this.checkForEnter.bind(this);\n        this.clearSearchWrapper = this.clearSearch.bind(this);\n        this.checkForBackspaceWrapper = this.checkForBackspace.bind(this);\n        this.removeSelectedTokenWrapper = this.removeSelectedToken.bind(this);\n        this.unselectEditTokensWrapper = this.unselectEditTokens.bind(this);\n        this.editTokenWrapper = this.editToken.bind(this);\n        this.tokenChange = this.tokenChange.bind(this);\n        this.addInputContainerFocusWrapper = this.addInputContainerFocus.bind(this);\n        this.removeInputContainerFocusWrapper = this.removeInputContainerFocus.bind(this);\n\n        this.filteredSearchInput.form.addEventListener('submit', this.handleFormSubmit);\n        this.filteredSearchInput.addEventListener('input', this.setDropdownWrapper);\n        this.filteredSearchInput.addEventListener('input', this.toggleClearSearchButtonWrapper);\n        this.filteredSearchInput.addEventListener('input', this.handleInputPlaceholderWrapper);\n        this.filteredSearchInput.addEventListener('input', this.handleInputVisualTokenWrapper);\n        this.filteredSearchInput.addEventListener('keydown', this.checkForEnterWrapper);\n        this.filteredSearchInput.addEventListener('keyup', this.checkForBackspaceWrapper);\n        this.filteredSearchInput.addEventListener('click', this.tokenChange);\n        this.filteredSearchInput.addEventListener('keyup', this.tokenChange);\n        this.filteredSearchInput.addEventListener('focus', this.addInputContainerFocusWrapper);\n        this.tokensContainer.addEventListener('click', FilteredSearchManager.selectToken);\n        this.tokensContainer.addEventListener('dblclick', this.editTokenWrapper);\n        this.clearSearchButton.addEventListener('click', this.clearSearchWrapper);\n        document.addEventListener('click', gl.FilteredSearchVisualTokens.unselectTokens);\n        document.addEventListener('click', this.unselectEditTokensWrapper);\n        document.addEventListener('click', this.removeInputContainerFocusWrapper);\n        document.addEventListener('keydown', this.removeSelectedTokenWrapper);\n      }\n    }, {\n      key: 'unbindEvents',\n      value: function unbindEvents() {\n        this.filteredSearchInput.form.removeEventListener('submit', this.handleFormSubmit);\n        this.filteredSearchInput.removeEventListener('input', this.setDropdownWrapper);\n        this.filteredSearchInput.removeEventListener('input', this.toggleClearSearchButtonWrapper);\n        this.filteredSearchInput.removeEventListener('input', this.handleInputPlaceholderWrapper);\n        this.filteredSearchInput.removeEventListener('input', this.handleInputVisualTokenWrapper);\n        this.filteredSearchInput.removeEventListener('keydown', this.checkForEnterWrapper);\n        this.filteredSearchInput.removeEventListener('keyup', this.checkForBackspaceWrapper);\n        this.filteredSearchInput.removeEventListener('click', this.tokenChange);\n        this.filteredSearchInput.removeEventListener('keyup', this.tokenChange);\n        this.filteredSearchInput.removeEventListener('focus', this.addInputContainerFocusWrapper);\n        this.tokensContainer.removeEventListener('click', FilteredSearchManager.selectToken);\n        this.tokensContainer.removeEventListener('dblclick', this.editTokenWrapper);\n        this.clearSearchButton.removeEventListener('click', this.clearSearchWrapper);\n        document.removeEventListener('click', gl.FilteredSearchVisualTokens.unselectTokens);\n        document.removeEventListener('click', this.unselectEditTokensWrapper);\n        document.removeEventListener('click', this.removeInputContainerFocusWrapper);\n        document.removeEventListener('keydown', this.removeSelectedTokenWrapper);\n      }\n    }, {\n      key: 'checkForBackspace',\n      value: function checkForBackspace(e) {\n        // 8 = Backspace Key\n        // 46 = Delete Key\n        if (e.keyCode === 8 || e.keyCode === 46) {\n          var _gl$FilteredSearchVis = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n              lastVisualToken = _gl$FilteredSearchVis.lastVisualToken;\n\n          if (this.filteredSearchInput.value === '' && lastVisualToken) {\n            this.filteredSearchInput.value = gl.FilteredSearchVisualTokens.getLastTokenPartial();\n            gl.FilteredSearchVisualTokens.removeLastTokenPartial();\n          }\n\n          // Reposition dropdown so that it is aligned with cursor\n          this.dropdownManager.updateCurrentDropdownOffset();\n        }\n      }\n    }, {\n      key: 'checkForEnter',\n      value: function checkForEnter(e) {\n        if (e.keyCode === 38 || e.keyCode === 40) {\n          var selectionStart = this.filteredSearchInput.selectionStart;\n\n          e.preventDefault();\n          this.filteredSearchInput.setSelectionRange(selectionStart, selectionStart);\n        }\n\n        if (e.keyCode === 13) {\n          var dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n          var dropdownEl = dropdown.element;\n          var activeElements = dropdownEl.querySelectorAll('.dropdown-active');\n\n          e.preventDefault();\n\n          if (!activeElements.length) {\n            // Prevent droplab from opening dropdown\n            this.dropdownManager.destroyDroplab();\n\n            this.search();\n          }\n        }\n      }\n    }, {\n      key: 'addInputContainerFocus',\n      value: function addInputContainerFocus() {\n        var inputContainer = this.filteredSearchInput.closest('.filtered-search-input-container');\n\n        if (inputContainer) {\n          inputContainer.classList.add('focus');\n        }\n      }\n    }, {\n      key: 'removeInputContainerFocus',\n      value: function removeInputContainerFocus(e) {\n        var inputContainer = this.filteredSearchInput.closest('.filtered-search-input-container');\n        var isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n        var isElementInDynamicFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n        var isElementInStaticFilterDropdown = e.target.closest('ul[data-dropdown]') !== null;\n\n        if (!isElementInFilteredSearch && !isElementInDynamicFilterDropdown && !isElementInStaticFilterDropdown && inputContainer) {\n          inputContainer.classList.remove('focus');\n        }\n      }\n    }, {\n      key: 'unselectEditTokens',\n      value: function unselectEditTokens(e) {\n        var inputContainer = document.querySelector('.filtered-search-input-container');\n        var isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n        var isElementInFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n        var isElementTokensContainer = e.target.classList.contains('tokens-container');\n\n        if (!isElementInFilteredSearch && !isElementInFilterDropdown || isElementTokensContainer) {\n          gl.FilteredSearchVisualTokens.moveInputToTheRight();\n          this.dropdownManager.resetDropdowns();\n        }\n      }\n    }, {\n      key: 'editToken',\n      value: function editToken(e) {\n        var token = e.target.closest('.js-visual-token');\n\n        if (token) {\n          gl.FilteredSearchVisualTokens.editToken(token);\n          this.tokenChange();\n        }\n      }\n    }, {\n      key: 'toggleClearSearchButton',\n      value: function toggleClearSearchButton() {\n        var query = gl.DropdownUtils.getSearchQuery();\n        var hidden = 'hidden';\n        var hasHidden = this.clearSearchButton.classList.contains(hidden);\n\n        if (query.length === 0 && !hasHidden) {\n          this.clearSearchButton.classList.add(hidden);\n        } else if (query.length && hasHidden) {\n          this.clearSearchButton.classList.remove(hidden);\n        }\n      }\n    }, {\n      key: 'handleInputPlaceholder',\n      value: function handleInputPlaceholder() {\n        var query = gl.DropdownUtils.getSearchQuery();\n        var placeholder = 'Search or filter results...';\n        var currentPlaceholder = this.filteredSearchInput.placeholder;\n\n        if (query.length === 0 && currentPlaceholder !== placeholder) {\n          this.filteredSearchInput.placeholder = placeholder;\n        } else if (query.length > 0 && currentPlaceholder !== '') {\n          this.filteredSearchInput.placeholder = '';\n        }\n      }\n    }, {\n      key: 'removeSelectedToken',\n      value: function removeSelectedToken(e) {\n        // 8 = Backspace Key\n        // 46 = Delete Key\n        if (e.keyCode === 8 || e.keyCode === 46) {\n          gl.FilteredSearchVisualTokens.removeSelectedToken();\n          this.handleInputPlaceholder();\n          this.toggleClearSearchButton();\n        }\n      }\n    }, {\n      key: 'clearSearch',\n      value: function clearSearch(e) {\n        e.preventDefault();\n\n        this.filteredSearchInput.value = '';\n\n        var removeElements = [];\n\n        [].forEach.call(this.tokensContainer.children, function (t) {\n          if (t.classList.contains('js-visual-token')) {\n            removeElements.push(t);\n          }\n        });\n\n        removeElements.forEach(function (el) {\n          el.parentElement.removeChild(el);\n        });\n\n        this.clearSearchButton.classList.add('hidden');\n        this.handleInputPlaceholder();\n\n        this.dropdownManager.resetDropdowns();\n      }\n    }, {\n      key: 'handleInputVisualToken',\n      value: function handleInputVisualToken() {\n        var input = this.filteredSearchInput;\n\n        var _gl$FilteredSearchTok = gl.FilteredSearchTokenizer.processTokens(input.value),\n            tokens = _gl$FilteredSearchTok.tokens,\n            searchToken = _gl$FilteredSearchTok.searchToken;\n\n        var _gl$FilteredSearchVis2 = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput(),\n            isLastVisualTokenValid = _gl$FilteredSearchVis2.isLastVisualTokenValid;\n\n        if (isLastVisualTokenValid) {\n          tokens.forEach(function (t) {\n            input.value = input.value.replace(t.key + ':' + t.symbol + t.value, '');\n            gl.FilteredSearchVisualTokens.addFilterVisualToken(t.key, '' + t.symbol + t.value);\n          });\n\n          var fragments = searchToken.split(':');\n          if (fragments.length > 1) {\n            var inputValues = fragments[0].split(' ');\n            var tokenKey = inputValues.last();\n\n            if (inputValues.length > 1) {\n              inputValues.pop();\n              var searchTerms = inputValues.join(' ');\n\n              input.value = input.value.replace(searchTerms, '');\n              gl.FilteredSearchVisualTokens.addSearchVisualToken(searchTerms);\n            }\n\n            gl.FilteredSearchVisualTokens.addFilterVisualToken(tokenKey);\n            input.value = input.value.replace(tokenKey + ':', '');\n          }\n        } else {\n          // Keep listening to token until we determine that the user is done typing the token value\n          var valueCompletedRegex = /([~%@]{0,1}\".+\")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]\")(?!')(?!\")).*/g;\n\n          if (searchToken.match(valueCompletedRegex) && input.value[input.value.length - 1] === ' ') {\n            gl.FilteredSearchVisualTokens.addFilterVisualToken(searchToken);\n\n            // Trim the last space as seen in the if statement above\n            input.value = input.value.replace(searchToken, '').trim();\n          }\n        }\n      }\n    }, {\n      key: 'handleFormSubmit',\n      value: function handleFormSubmit(e) {\n        e.preventDefault();\n        this.search();\n      }\n    }, {\n      key: 'loadSearchParamsFromURL',\n      value: function loadSearchParamsFromURL() {\n        var _this = this;\n\n        var params = gl.utils.getUrlParamsArray();\n        var usernameParams = this.getUsernameParams();\n        var hasFilteredSearch = false;\n\n        params.forEach(function (p) {\n          var split = p.split('=');\n          var keyParam = decodeURIComponent(split[0]);\n          var value = split[1];\n\n          // Check if it matches edge conditions listed in this.filteredSearchTokenKeys\n          var condition = _this.filteredSearchTokenKeys.searchByConditionUrl(p);\n\n          if (condition) {\n            hasFilteredSearch = true;\n            gl.FilteredSearchVisualTokens.addFilterVisualToken(condition.tokenKey, condition.value);\n          } else {\n            // Sanitize value since URL converts spaces into +\n            // Replace before decode so that we know what was originally + versus the encoded +\n            var sanitizedValue = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : value;\n            var match = _this.filteredSearchTokenKeys.searchByKeyParam(keyParam);\n\n            if (match) {\n              var indexOf = keyParam.indexOf('_');\n              var sanitizedKey = indexOf !== -1 ? keyParam.slice(0, keyParam.indexOf('_')) : keyParam;\n              var symbol = match.symbol;\n              var quotationsToUse = '';\n\n              if (sanitizedValue.indexOf(' ') !== -1) {\n                // Prefer \", but use ' if required\n                quotationsToUse = sanitizedValue.indexOf('\"') === -1 ? '\"' : '\\'';\n              }\n\n              hasFilteredSearch = true;\n              gl.FilteredSearchVisualTokens.addFilterVisualToken(sanitizedKey, '' + symbol + quotationsToUse + sanitizedValue + quotationsToUse);\n            } else if (!match && keyParam === 'assignee_id') {\n              var id = parseInt(value, 10);\n              if (usernameParams[id]) {\n                hasFilteredSearch = true;\n                gl.FilteredSearchVisualTokens.addFilterVisualToken('assignee', '@' + usernameParams[id]);\n              }\n            } else if (!match && keyParam === 'author_id') {\n              var _id = parseInt(value, 10);\n              if (usernameParams[_id]) {\n                hasFilteredSearch = true;\n                gl.FilteredSearchVisualTokens.addFilterVisualToken('author', '@' + usernameParams[_id]);\n              }\n            } else if (!match && keyParam === 'search') {\n              hasFilteredSearch = true;\n              _this.filteredSearchInput.value = sanitizedValue;\n            }\n          }\n        });\n\n        if (hasFilteredSearch) {\n          this.clearSearchButton.classList.remove('hidden');\n          this.handleInputPlaceholder();\n        }\n      }\n    }, {\n      key: 'search',\n      value: function search() {\n        var _this2 = this;\n\n        var paths = [];\n\n        var _tokenizer$processTok = this.tokenizer.processTokens(gl.DropdownUtils.getSearchQuery()),\n            tokens = _tokenizer$processTok.tokens,\n            searchToken = _tokenizer$processTok.searchToken;\n\n        var currentState = gl.utils.getParameterByName('state') || 'opened';\n        paths.push('state=' + currentState);\n\n        tokens.forEach(function (token) {\n          var condition = _this2.filteredSearchTokenKeys.searchByConditionKeyValue(token.key, token.value.toLowerCase());\n\n          var _ref = _this2.filteredSearchTokenKeys.searchByKey(token.key) || {},\n              param = _ref.param;\n\n          var keyParam = param ? token.key + '_' + param : token.key;\n          var tokenPath = '';\n\n          if (condition) {\n            tokenPath = condition.url;\n          } else {\n            var tokenValue = token.value;\n\n            if (tokenValue[0] === '\\'' && tokenValue[tokenValue.length - 1] === '\\'' || tokenValue[0] === '\"' && tokenValue[tokenValue.length - 1] === '\"') {\n              tokenValue = tokenValue.slice(1, tokenValue.length - 1);\n            }\n\n            tokenPath = keyParam + '=' + encodeURIComponent(tokenValue);\n          }\n\n          paths.push(tokenPath);\n        });\n\n        if (searchToken) {\n          var sanitized = searchToken.split(' ').map(function (t) {\n            return encodeURIComponent(t);\n          }).join('+');\n          paths.push('search=' + sanitized);\n        }\n\n        var parameterizedUrl = '?scope=all&utf8=%E2%9C%93&' + paths.join('&');\n\n        gl.utils.visitUrl(parameterizedUrl);\n      }\n    }, {\n      key: 'getUsernameParams',\n      value: function getUsernameParams() {\n        var usernamesById = {};\n        try {\n          var attribute = this.filteredSearchInput.getAttribute('data-username-params');\n          JSON.parse(attribute).forEach(function (user) {\n            usernamesById[user.id] = user.username;\n          });\n        } catch (e) {\n          // do nothing\n        }\n        return usernamesById;\n      }\n    }, {\n      key: 'tokenChange',\n      value: function tokenChange() {\n        var dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n\n        if (dropdown) {\n          var currentDropdownRef = dropdown.reference;\n\n          this.setDropdownWrapper();\n          currentDropdownRef.dispatchInputEvent();\n        }\n      }\n    }], [{\n      key: 'selectToken',\n      value: function selectToken(e) {\n        var button = e.target.closest('.selectable');\n\n        if (button) {\n          e.preventDefault();\n          e.stopPropagation();\n          gl.FilteredSearchVisualTokens.selectToken(button);\n        }\n      }\n    }]);\n\n    return FilteredSearchManager;\n  }();\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchManager = FilteredSearchManager;\n})();\n\n/***/ }),\n\n/***/ \"tI+A\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global DropLab */\n\n(function () {\n  var FilteredSearchDropdownManager = function () {\n    function FilteredSearchDropdownManager() {\n      var baseEndpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var page = arguments[1];\n\n      _classCallCheck(this, FilteredSearchDropdownManager);\n\n      this.baseEndpoint = baseEndpoint.replace(/\\/$/, '');\n      this.tokenizer = gl.FilteredSearchTokenizer;\n      this.filteredSearchTokenKeys = gl.FilteredSearchTokenKeys;\n      this.filteredSearchInput = document.querySelector('.filtered-search');\n      this.page = page;\n\n      this.setupMapping();\n\n      this.cleanupWrapper = this.cleanup.bind(this);\n      document.addEventListener('beforeunload', this.cleanupWrapper);\n    }\n\n    _createClass(FilteredSearchDropdownManager, [{\n      key: 'cleanup',\n      value: function cleanup() {\n        if (this.droplab) {\n          this.droplab.destroy();\n          this.droplab = null;\n        }\n\n        this.setupMapping();\n\n        document.removeEventListener('beforeunload', this.cleanupWrapper);\n      }\n    }, {\n      key: 'setupMapping',\n      value: function setupMapping() {\n        this.mapping = {\n          author: {\n            reference: null,\n            gl: 'DropdownUser',\n            element: document.querySelector('#js-dropdown-author')\n          },\n          assignee: {\n            reference: null,\n            gl: 'DropdownUser',\n            element: document.querySelector('#js-dropdown-assignee')\n          },\n          milestone: {\n            reference: null,\n            gl: 'DropdownNonUser',\n            extraArguments: [this.baseEndpoint + '/milestones.json', '%'],\n            element: document.querySelector('#js-dropdown-milestone')\n          },\n          label: {\n            reference: null,\n            gl: 'DropdownNonUser',\n            extraArguments: [this.baseEndpoint + '/labels.json', '~'],\n            element: document.querySelector('#js-dropdown-label')\n          },\n          hint: {\n            reference: null,\n            gl: 'DropdownHint',\n            element: document.querySelector('#js-dropdown-hint')\n          }\n        };\n      }\n    }, {\n      key: 'updateCurrentDropdownOffset',\n      value: function updateCurrentDropdownOffset() {\n        this.updateDropdownOffset(this.currentDropdown);\n      }\n    }, {\n      key: 'updateDropdownOffset',\n      value: function updateDropdownOffset(key) {\n        // Always align dropdown with the input field\n        var offset = this.filteredSearchInput.getBoundingClientRect().left - document.querySelector('.scroll-container').getBoundingClientRect().left;\n\n        var maxInputWidth = 240;\n        var currentDropdownWidth = this.mapping[key].element.clientWidth || maxInputWidth;\n\n        // Make sure offset never exceeds the input container\n        var offsetMaxWidth = document.querySelector('.scroll-container').clientWidth - currentDropdownWidth;\n        if (offsetMaxWidth < offset) {\n          offset = offsetMaxWidth;\n        }\n\n        this.mapping[key].reference.setOffset(offset);\n      }\n    }, {\n      key: 'load',\n      value: function load(key) {\n        var firstLoad = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        var mappingKey = this.mapping[key];\n        var glClass = mappingKey.gl;\n        var element = mappingKey.element;\n        var forceShowList = false;\n\n        if (!mappingKey.reference) {\n          var dl = this.droplab;\n          var defaultArguments = [null, dl, element, this.filteredSearchInput, key];\n          var glArguments = defaultArguments.concat(mappingKey.extraArguments || []);\n\n          // Passing glArguments to `new gl[glClass](<arguments>)`\n          mappingKey.reference = new (Function.prototype.bind.apply(gl[glClass], glArguments))();\n        }\n\n        if (firstLoad) {\n          mappingKey.reference.init();\n        }\n\n        if (this.currentDropdown === 'hint') {\n          // Force the dropdown to show if it was clicked from the hint dropdown\n          forceShowList = true;\n        }\n\n        this.updateDropdownOffset(key);\n        mappingKey.reference.render(firstLoad, forceShowList);\n\n        this.currentDropdown = key;\n      }\n    }, {\n      key: 'loadDropdown',\n      value: function loadDropdown() {\n        var dropdownName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n        var firstLoad = false;\n\n        if (!this.droplab) {\n          firstLoad = true;\n          this.droplab = new DropLab();\n        }\n\n        var match = this.filteredSearchTokenKeys.searchByKey(dropdownName.toLowerCase());\n        var shouldOpenFilterDropdown = match && this.currentDropdown !== match.key && this.mapping[match.key];\n        var shouldOpenHintDropdown = !match && this.currentDropdown !== 'hint';\n\n        if (shouldOpenFilterDropdown || shouldOpenHintDropdown) {\n          var key = match && match.key ? match.key : 'hint';\n          this.load(key, firstLoad);\n        }\n      }\n    }, {\n      key: 'setDropdown',\n      value: function setDropdown() {\n        var query = gl.DropdownUtils.getSearchQuery(true);\n\n        var _tokenizer$processTok = this.tokenizer.processTokens(query),\n            lastToken = _tokenizer$processTok.lastToken,\n            searchToken = _tokenizer$processTok.searchToken;\n\n        if (this.currentDropdown) {\n          this.updateCurrentDropdownOffset();\n        }\n\n        if (lastToken === searchToken && lastToken !== null) {\n          // Token is not fully initialized yet because it has no value\n          // Eg. token = 'label:'\n\n          var split = lastToken.split(':');\n          var dropdownName = split[0].split(' ').last();\n          this.loadDropdown(split.length > 1 ? dropdownName : '');\n        } else if (lastToken) {\n          // Token has been initialized into an object because it has a value\n          this.loadDropdown(lastToken.key);\n        } else {\n          this.loadDropdown('hint');\n        }\n      }\n    }, {\n      key: 'resetDropdowns',\n      value: function resetDropdowns() {\n        // Force current dropdown to hide\n        this.mapping[this.currentDropdown].reference.hideDropdown();\n\n        // Re-Load dropdown\n        this.setDropdown();\n\n        // Reset filters for current dropdown\n        this.mapping[this.currentDropdown].reference.resetFilters();\n\n        // Reposition dropdown so that it is aligned with cursor\n        this.updateDropdownOffset(this.currentDropdown);\n      }\n    }, {\n      key: 'destroyDroplab',\n      value: function destroyDroplab() {\n        this.droplab.destroy();\n      }\n    }], [{\n      key: 'addWordToInput',\n      value: function addWordToInput(tokenName) {\n        var tokenValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        var clicked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        var input = document.querySelector('.filtered-search');\n\n        gl.FilteredSearchVisualTokens.addFilterVisualToken(tokenName, tokenValue);\n        input.value = '';\n\n        if (clicked) {\n          gl.FilteredSearchVisualTokens.moveInputToTheRight();\n        }\n      }\n    }]);\n\n    return FilteredSearchDropdownManager;\n  }();\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchDropdownManager = FilteredSearchDropdownManager;\n})();\n\n/***/ }),\n\n/***/ \"zrWn\":\n/***/ (function(module, exports) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  var tokenKeys = [{\n    key: 'author',\n    type: 'string',\n    param: 'username',\n    symbol: '@'\n  }, {\n    key: 'assignee',\n    type: 'string',\n    param: 'username',\n    symbol: '@'\n  }, {\n    key: 'milestone',\n    type: 'string',\n    param: 'title',\n    symbol: '%'\n  }, {\n    key: 'label',\n    type: 'array',\n    param: 'name[]',\n    symbol: '~'\n  }];\n\n  var alternativeTokenKeys = [{\n    key: 'label',\n    type: 'string',\n    param: 'name',\n    symbol: '~'\n  }];\n\n  var tokenKeysWithAlternative = tokenKeys.concat(alternativeTokenKeys);\n\n  var conditions = [{\n    url: 'assignee_id=0',\n    tokenKey: 'assignee',\n    value: 'none'\n  }, {\n    url: 'milestone_title=No+Milestone',\n    tokenKey: 'milestone',\n    value: 'none'\n  }, {\n    url: 'milestone_title=%23upcoming',\n    tokenKey: 'milestone',\n    value: 'upcoming'\n  }, {\n    url: 'milestone_title=%23started',\n    tokenKey: 'milestone',\n    value: 'started'\n  }, {\n    url: 'label_name[]=No+Label',\n    tokenKey: 'label',\n    value: 'none'\n  }];\n\n  var FilteredSearchTokenKeys = function () {\n    function FilteredSearchTokenKeys() {\n      _classCallCheck(this, FilteredSearchTokenKeys);\n    }\n\n    _createClass(FilteredSearchTokenKeys, null, [{\n      key: 'get',\n      value: function get() {\n        return tokenKeys;\n      }\n    }, {\n      key: 'getAlternatives',\n      value: function getAlternatives() {\n        return alternativeTokenKeys;\n      }\n    }, {\n      key: 'getConditions',\n      value: function getConditions() {\n        return conditions;\n      }\n    }, {\n      key: 'searchByKey',\n      value: function searchByKey(key) {\n        return tokenKeys.find(function (tokenKey) {\n          return tokenKey.key === key;\n        }) || null;\n      }\n    }, {\n      key: 'searchBySymbol',\n      value: function searchBySymbol(symbol) {\n        return tokenKeys.find(function (tokenKey) {\n          return tokenKey.symbol === symbol;\n        }) || null;\n      }\n    }, {\n      key: 'searchByKeyParam',\n      value: function searchByKeyParam(keyParam) {\n        return tokenKeysWithAlternative.find(function (tokenKey) {\n          var tokenKeyParam = tokenKey.key;\n\n          if (tokenKey.param) {\n            tokenKeyParam += '_' + tokenKey.param;\n          }\n\n          return keyParam === tokenKeyParam;\n        }) || null;\n      }\n    }, {\n      key: 'searchByConditionUrl',\n      value: function searchByConditionUrl(url) {\n        return conditions.find(function (condition) {\n          return condition.url === url;\n        }) || null;\n      }\n    }, {\n      key: 'searchByConditionKeyValue',\n      value: function searchByConditionKeyValue(key, value) {\n        return conditions.find(function (condition) {\n          return condition.tokenKey === key && condition.value === value;\n        }) || null;\n      }\n    }]);\n\n    return FilteredSearchTokenKeys;\n  }();\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchTokenKeys = FilteredSearchTokenKeys;\n})();\n\n/***/ })\n\n},[\"ZbqE\"]);\n\n\n// WEBPACK FOOTER //\n// filtered_search.749a7c5ab2493583449c.bundle.js","require('./filtered_search_dropdown');\n\n/* global droplabAjax */\n/* global droplabFilter */\n\n(() => {\n  class DropdownNonUser extends gl.FilteredSearchDropdown {\n    constructor(droplab, dropdown, input, filter, endpoint, symbol) {\n      super(droplab, dropdown, input, filter);\n      this.symbol = symbol;\n      this.config = {\n        droplabAjax: {\n          endpoint,\n          method: 'setData',\n          loadingTemplate: this.loadingTemplate,\n        },\n        droplabFilter: {\n          filterFunction: gl.DropdownUtils.filterWithSymbol.bind(null, this.symbol, input),\n        },\n      };\n    }\n\n    itemClicked(e) {\n      super.itemClicked(e, (selected) => {\n        const title = selected.querySelector('.js-data-value').innerText.trim();\n        return `${this.symbol}${gl.DropdownUtils.getEscapedText(title)}`;\n      });\n    }\n\n    renderContent(forceShowList = false) {\n      this.droplab\n        .changeHookList(this.hookId, this.dropdown, [droplabAjax, droplabFilter], this.config);\n      super.renderContent(forceShowList);\n    }\n\n    init() {\n      this.droplab\n        .addHook(this.input, this.dropdown, [droplabAjax, droplabFilter], this.config).init();\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.DropdownNonUser = DropdownNonUser;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/dropdown_non_user.js","class FilteredSearchVisualTokens {\n  static getLastVisualTokenBeforeInput() {\n    const inputLi = document.querySelector('.input-token');\n    const lastVisualToken = inputLi && inputLi.previousElementSibling;\n\n    return {\n      lastVisualToken,\n      isLastVisualTokenValid: lastVisualToken === null || lastVisualToken.className.indexOf('filtered-search-term') !== -1 || (lastVisualToken && lastVisualToken.querySelector('.value') !== null),\n    };\n  }\n\n  static unselectTokens() {\n    const otherTokens = document.querySelectorAll('.js-visual-token .selectable.selected');\n    [].forEach.call(otherTokens, t => t.classList.remove('selected'));\n  }\n\n  static selectToken(tokenButton) {\n    const selected = tokenButton.classList.contains('selected');\n    FilteredSearchVisualTokens.unselectTokens();\n\n    if (!selected) {\n      tokenButton.classList.add('selected');\n    }\n  }\n\n  static removeSelectedToken() {\n    const selected = document.querySelector('.js-visual-token .selected');\n\n    if (selected) {\n      const li = selected.closest('.js-visual-token');\n      li.parentElement.removeChild(li);\n    }\n  }\n\n  static createVisualTokenElementHTML() {\n    return `\n      <div class=\"selectable\" role=\"button\">\n        <div class=\"name\"></div>\n        <div class=\"value\"></div>\n      </div>\n    `;\n  }\n\n  static addVisualTokenElement(name, value, isSearchTerm) {\n    const li = document.createElement('li');\n    li.classList.add('js-visual-token');\n    li.classList.add(isSearchTerm ? 'filtered-search-term' : 'filtered-search-token');\n\n    if (value) {\n      li.innerHTML = FilteredSearchVisualTokens.createVisualTokenElementHTML();\n      li.querySelector('.value').innerText = value;\n    } else {\n      li.innerHTML = '<div class=\"name\"></div>';\n    }\n    li.querySelector('.name').innerText = name;\n\n    const tokensContainer = document.querySelector('.tokens-container');\n    const input = document.querySelector('.filtered-search');\n    tokensContainer.insertBefore(li, input.parentElement);\n  }\n\n  static addValueToPreviousVisualTokenElement(value) {\n    const { lastVisualToken, isLastVisualTokenValid } =\n      FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (!isLastVisualTokenValid && lastVisualToken.classList.contains('filtered-search-token')) {\n      const name = FilteredSearchVisualTokens.getLastTokenPartial();\n      lastVisualToken.innerHTML = FilteredSearchVisualTokens.createVisualTokenElementHTML();\n      lastVisualToken.querySelector('.name').innerText = name;\n      lastVisualToken.querySelector('.value').innerText = value;\n    }\n  }\n\n  static addFilterVisualToken(tokenName, tokenValue) {\n    const { lastVisualToken, isLastVisualTokenValid }\n      = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n    const addVisualTokenElement = FilteredSearchVisualTokens.addVisualTokenElement;\n\n    if (isLastVisualTokenValid) {\n      addVisualTokenElement(tokenName, tokenValue);\n    } else {\n      const previousTokenName = lastVisualToken.querySelector('.name').innerText;\n      const tokensContainer = document.querySelector('.tokens-container');\n      tokensContainer.removeChild(lastVisualToken);\n\n      const value = tokenValue || tokenName;\n      addVisualTokenElement(previousTokenName, value);\n    }\n  }\n\n  static addSearchVisualToken(searchTerm) {\n    const { lastVisualToken } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (lastVisualToken && lastVisualToken.classList.contains('filtered-search-term')) {\n      lastVisualToken.querySelector('.name').innerText += ` ${searchTerm}`;\n    } else {\n      FilteredSearchVisualTokens.addVisualTokenElement(searchTerm, null, true);\n    }\n  }\n\n  static getLastTokenPartial() {\n    const { lastVisualToken } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (!lastVisualToken) return '';\n\n    const value = lastVisualToken.querySelector('.value');\n    const name = lastVisualToken.querySelector('.name');\n\n    const valueText = value ? value.innerText : '';\n    const nameText = name ? name.innerText : '';\n\n    return valueText || nameText;\n  }\n\n  static removeLastTokenPartial() {\n    const { lastVisualToken } = FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (lastVisualToken) {\n      const value = lastVisualToken.querySelector('.value');\n\n      if (value) {\n        const button = lastVisualToken.querySelector('.selectable');\n        button.removeChild(value);\n        lastVisualToken.innerHTML = button.innerHTML;\n      } else {\n        lastVisualToken.closest('.tokens-container').removeChild(lastVisualToken);\n      }\n    }\n  }\n\n  static tokenizeInput() {\n    const input = document.querySelector('.filtered-search');\n    const { isLastVisualTokenValid } =\n      gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n    if (input.value) {\n      if (isLastVisualTokenValid) {\n        gl.FilteredSearchVisualTokens.addSearchVisualToken(input.value);\n      } else {\n        FilteredSearchVisualTokens.addValueToPreviousVisualTokenElement(input.value);\n      }\n\n      input.value = '';\n    }\n  }\n\n  static editToken(token) {\n    const input = document.querySelector('.filtered-search');\n\n    FilteredSearchVisualTokens.tokenizeInput();\n\n    // Replace token with input field\n    const tokenContainer = token.parentElement;\n    const inputLi = input.parentElement;\n    tokenContainer.replaceChild(inputLi, token);\n\n    const name = token.querySelector('.name');\n    const value = token.querySelector('.value');\n\n    if (token.classList.contains('filtered-search-token') && value) {\n      FilteredSearchVisualTokens.addFilterVisualToken(name.innerText);\n      input.value = value.innerText;\n    } else {\n      // token is a search term\n      input.value = name.innerText;\n    }\n\n    // Opens dropdown\n    const inputEvent = new Event('input');\n    input.dispatchEvent(inputEvent);\n\n    // Adds cursor to input\n    input.focus();\n  }\n\n  static moveInputToTheRight() {\n    const input = document.querySelector('.filtered-search');\n    const inputLi = input.parentElement;\n    const tokenContainer = document.querySelector('.tokens-container');\n\n    FilteredSearchVisualTokens.tokenizeInput();\n\n    if (!tokenContainer.lastElementChild.isEqualNode(inputLi)) {\n      const { isLastVisualTokenValid } =\n        gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n      if (!isLastVisualTokenValid) {\n        const lastPartial = gl.FilteredSearchVisualTokens.getLastTokenPartial();\n        gl.FilteredSearchVisualTokens.removeLastTokenPartial();\n        gl.FilteredSearchVisualTokens.addSearchVisualToken(lastPartial);\n      }\n\n      tokenContainer.removeChild(inputLi);\n      tokenContainer.appendChild(inputLi);\n    }\n  }\n}\n\nwindow.gl = window.gl || {};\ngl.FilteredSearchVisualTokens = FilteredSearchVisualTokens;\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_visual_tokens.js","require('./filtered_search_token_keys');\n\n(() => {\n  class FilteredSearchTokenizer {\n    static processTokens(input) {\n      const allowedKeys = gl.FilteredSearchTokenKeys.get().map(i => i.key);\n      // Regex extracts `(token):(symbol)(value)`\n      // Values that start with a double quote must end in a double quote (same for single)\n      const tokenRegex = new RegExp(`(${allowedKeys.join('|')}):([~%@]?)(?:('[^']*'{0,1})|(\"[^\"]*\"{0,1})|(\\\\S+))`, 'g');\n      const tokens = [];\n      let lastToken = null;\n      const searchToken = input.replace(tokenRegex, (match, key, symbol, v1, v2, v3) => {\n        let tokenValue = v1 || v2 || v3;\n        let tokenSymbol = symbol;\n\n        if (tokenValue === '~' || tokenValue === '%' || tokenValue === '@') {\n          tokenSymbol = tokenValue;\n          tokenValue = '';\n        }\n\n        tokens.push({\n          key,\n          value: tokenValue || '',\n          symbol: tokenSymbol || '',\n        });\n        return '';\n      }).replace(/\\s{2,}/g, ' ').trim() || '';\n\n      if (tokens.length > 0) {\n        const last = tokens[tokens.length - 1];\n        const lastString = `${last.key}:${last.symbol}${last.value}`;\n        lastToken = input.lastIndexOf(lastString) ===\n          input.length - lastString.length ? last : searchToken;\n      } else {\n        lastToken = searchToken;\n      }\n\n      return {\n        tokens,\n        lastToken,\n        searchToken,\n      };\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchTokenizer = FilteredSearchTokenizer;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_tokenizer.js","require('./filtered_search_dropdown');\n\n/* global droplabFilter */\n\n(() => {\n  class DropdownHint extends gl.FilteredSearchDropdown {\n    constructor(droplab, dropdown, input, filter) {\n      super(droplab, dropdown, input, filter);\n      this.config = {\n        droplabFilter: {\n          template: 'hint',\n          filterFunction: gl.DropdownUtils.filterHint.bind(null, input),\n        },\n      };\n    }\n\n    itemClicked(e) {\n      const { selected } = e.detail;\n\n      if (selected.tagName === 'LI') {\n        if (selected.hasAttribute('data-value')) {\n          this.dismissDropdown();\n        } else if (selected.getAttribute('data-action') === 'submit') {\n          this.dismissDropdown();\n          this.dispatchFormSubmitEvent();\n        } else {\n          const token = selected.querySelector('.js-filter-hint').innerText.trim();\n          const tag = selected.querySelector('.js-filter-tag').innerText.trim();\n\n          if (tag.length) {\n            // Get previous input values in the input field and convert them into visual tokens\n            const previousInputValues = this.input.value.split(' ');\n            const searchTerms = [];\n\n            previousInputValues.forEach((value, index) => {\n              searchTerms.push(value);\n\n              if (index === previousInputValues.length - 1\n                && token.indexOf(value.toLowerCase()) !== -1) {\n                searchTerms.pop();\n              }\n            });\n\n            if (searchTerms.length > 0) {\n              gl.FilteredSearchVisualTokens.addSearchVisualToken(searchTerms.join(' '));\n            }\n\n            gl.FilteredSearchDropdownManager.addWordToInput(token.replace(':', ''));\n          }\n          this.dismissDropdown();\n          this.dispatchInputEvent();\n        }\n      }\n    }\n\n    renderContent() {\n      const dropdownData = [];\n\n      [].forEach.call(this.input.closest('.filtered-search-input-container').querySelectorAll('.dropdown-menu'), (dropdownMenu) => {\n        const { icon, hint, tag } = dropdownMenu.dataset;\n        if (icon && hint && tag) {\n          dropdownData.push({\n            icon: `fa-${icon}`,\n            hint,\n            tag: `&lt;${tag}&gt;`,\n          });\n        }\n      });\n\n      this.droplab.changeHookList(this.hookId, this.dropdown, [droplabFilter], this.config);\n      this.droplab.setData(this.hookId, dropdownData);\n    }\n\n    init() {\n      this.droplab.addHook(this.input, this.dropdown, [droplabFilter], this.config).init();\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.DropdownHint = DropdownHint;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/dropdown_hint.js","(() => {\n  class DropdownUtils {\n    static getEscapedText(text) {\n      let escapedText = text;\n      const hasSpace = text.indexOf(' ') !== -1;\n      const hasDoubleQuote = text.indexOf('\"') !== -1;\n\n      // Encapsulate value with quotes if it has spaces\n      // Known side effect: values's with both single and double quotes\n      // won't escape properly\n      if (hasSpace) {\n        if (hasDoubleQuote) {\n          escapedText = `'${text}'`;\n        } else {\n          // Encapsulate singleQuotes or if it hasSpace\n          escapedText = `\"${text}\"`;\n        }\n      }\n\n      return escapedText;\n    }\n\n    static filterWithSymbol(filterSymbol, input, item) {\n      const updatedItem = item;\n      const searchInput = gl.DropdownUtils.getSearchInput(input);\n\n      const title = updatedItem.title.toLowerCase();\n      let value = searchInput.toLowerCase();\n      let symbol = '';\n\n      // Remove the symbol for filter\n      if (value[0] === filterSymbol) {\n        symbol = value[0];\n        value = value.slice(1);\n      }\n\n      // Removes the first character if it is a quotation so that we can search\n      // with multiple words\n      if ((value[0] === '\"' || value[0] === '\\'') && title.indexOf(' ') !== -1) {\n        value = value.slice(1);\n      }\n\n      // Eg. filterSymbol = ~ for labels\n      const matchWithoutSymbol = symbol === filterSymbol && title.indexOf(value) !== -1;\n      const match = title.indexOf(`${symbol}${value}`) !== -1;\n\n      updatedItem.droplab_hidden = !match && !matchWithoutSymbol;\n\n      return updatedItem;\n    }\n\n    static filterHint(input, item) {\n      const updatedItem = item;\n      const searchInput = gl.DropdownUtils.getSearchInput(input);\n      let { lastToken } = gl.FilteredSearchTokenizer.processTokens(searchInput);\n      lastToken = lastToken.key || lastToken || '';\n\n      if (!lastToken || searchInput.split('').last() === ' ') {\n        updatedItem.droplab_hidden = false;\n      } else if (lastToken) {\n        const split = lastToken.split(':');\n        const tokenName = split[0].split(' ').last();\n\n        const match = updatedItem.hint.indexOf(tokenName.toLowerCase()) === -1;\n        updatedItem.droplab_hidden = tokenName ? match : false;\n      }\n\n      return updatedItem;\n    }\n\n    static setDataValueIfSelected(filter, selected) {\n      const dataValue = selected.getAttribute('data-value');\n\n      if (dataValue) {\n        gl.FilteredSearchDropdownManager.addWordToInput(filter, dataValue, true);\n      }\n\n      // Return boolean based on whether it was set\n      return dataValue !== null;\n    }\n\n    // Determines the full search query (visual tokens + input)\n    static getSearchQuery(untilInput = false) {\n      const tokens = [].slice.call(document.querySelectorAll('.tokens-container li'));\n      const values = [];\n\n      if (untilInput) {\n        const inputIndex = _.findIndex(tokens, t => t.classList.contains('input-token'));\n        // Add one to include input-token to the tokens array\n        tokens.splice(inputIndex + 1);\n      }\n\n      tokens.forEach((token) => {\n        if (token.classList.contains('js-visual-token')) {\n          const name = token.querySelector('.name');\n          const value = token.querySelector('.value');\n          const symbol = value && value.dataset.symbol ? value.dataset.symbol : '';\n          let valueText = '';\n\n          if (value && value.innerText) {\n            valueText = value.innerText;\n          }\n\n          if (token.className.indexOf('filtered-search-token') !== -1) {\n            values.push(`${name.innerText.toLowerCase()}:${symbol}${valueText}`);\n          } else {\n            values.push(name.innerText);\n          }\n        } else if (token.classList.contains('input-token')) {\n          const { isLastVisualTokenValid } =\n            gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n          const input = document.querySelector('.filtered-search');\n          const inputValue = input && input.value;\n\n          if (isLastVisualTokenValid) {\n            values.push(inputValue);\n          } else {\n            const previous = values.pop();\n            values.push(`${previous}${inputValue}`);\n          }\n        }\n      });\n\n      return values.join(' ');\n    }\n\n    static getSearchInput(filteredSearchInput) {\n      const inputValue = filteredSearchInput.value;\n      const { right } = gl.DropdownUtils.getInputSelectionPosition(filteredSearchInput);\n\n      return inputValue.slice(0, right);\n    }\n\n    static getInputSelectionPosition(input) {\n      const selectionStart = input.selectionStart;\n      let inputValue = input.value;\n      // Replace all spaces inside quote marks with underscores\n      // (will continue to match entire string until an end quote is found if any)\n      // This helps with matching the beginning & end of a token:key\n      inputValue = inputValue.replace(/(('[^']*'{0,1})|(\"[^\"]*\"{0,1})|:\\s+)/g, str => str.replace(/\\s/g, '_'));\n\n      // Get the right position for the word selected\n      // Regex matches first space\n      let right = inputValue.slice(selectionStart).search(/\\s/);\n\n      if (right >= 0) {\n        right += selectionStart;\n      } else if (right < 0) {\n        right = inputValue.length;\n      }\n\n      // Get the left position for the word selected\n      // Regex matches last non-whitespace character\n      let left = inputValue.slice(0, right).search(/\\S+$/);\n\n      if (selectionStart === 0) {\n        left = 0;\n      } else if (selectionStart === inputValue.length && left < 0) {\n        left = inputValue.length;\n      } else if (left < 0) {\n        left = selectionStart;\n      }\n\n      return {\n        left,\n        right,\n      };\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.DropdownUtils = DropdownUtils;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/dropdown_utils.js","require('./dropdown_hint');\nrequire('./dropdown_non_user');\nrequire('./dropdown_user');\nrequire('./dropdown_utils');\nrequire('./filtered_search_dropdown_manager');\nrequire('./filtered_search_dropdown');\nrequire('./filtered_search_manager');\nrequire('./filtered_search_token_keys');\nrequire('./filtered_search_tokenizer');\nrequire('./filtered_search_visual_tokens');\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_bundle.js","require('./filtered_search_dropdown');\n\n/* global droplabAjaxFilter */\n\n(() => {\n  class DropdownUser extends gl.FilteredSearchDropdown {\n    constructor(droplab, dropdown, input, filter) {\n      super(droplab, dropdown, input, filter);\n      this.config = {\n        droplabAjaxFilter: {\n          endpoint: `${gon.relative_url_root || ''}/autocomplete/users.json`,\n          searchKey: 'search',\n          params: {\n            per_page: 20,\n            active: true,\n            project_id: this.getProjectId(),\n            current_user: true,\n          },\n          searchValueFunction: this.getSearchInput.bind(this),\n          loadingTemplate: this.loadingTemplate,\n        },\n      };\n    }\n\n    itemClicked(e) {\n      super.itemClicked(e,\n        selected => selected.querySelector('.dropdown-light-content').innerText.trim());\n    }\n\n    renderContent(forceShowList = false) {\n      this.droplab.changeHookList(this.hookId, this.dropdown, [droplabAjaxFilter], this.config);\n      super.renderContent(forceShowList);\n    }\n\n    getProjectId() {\n      return this.input.getAttribute('data-project-id');\n    }\n\n    getSearchInput() {\n      const query = gl.DropdownUtils.getSearchInput(this.input);\n      const { lastToken } = gl.FilteredSearchTokenizer.processTokens(query);\n\n      let value = lastToken || '';\n\n      if (value[0] === '@') {\n        value = value.slice(1);\n      }\n\n      // Removes the first character if it is a quotation so that we can search\n      // with multiple words\n      if (value[0] === '\"' || value[0] === '\\'') {\n        value = value.slice(1);\n      }\n\n      return value;\n    }\n\n    init() {\n      this.droplab.addHook(this.input, this.dropdown, [droplabAjaxFilter], this.config).init();\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.DropdownUser = DropdownUser;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/dropdown_user.js","(() => {\n  const DATA_DROPDOWN_TRIGGER = 'data-dropdown-trigger';\n\n  class FilteredSearchDropdown {\n    constructor(droplab, dropdown, input, filter) {\n      this.droplab = droplab;\n      this.hookId = input && input.getAttribute('data-id');\n      this.input = input;\n      this.filter = filter;\n      this.dropdown = dropdown;\n      this.loadingTemplate = `<div class=\"filter-dropdown-loading\">\n        <i class=\"fa fa-spinner fa-spin\"></i>\n      </div>`;\n      this.bindEvents();\n    }\n\n    bindEvents() {\n      this.itemClickedWrapper = this.itemClicked.bind(this);\n      this.dropdown.addEventListener('click.dl', this.itemClickedWrapper);\n    }\n\n    unbindEvents() {\n      this.dropdown.removeEventListener('click.dl', this.itemClickedWrapper);\n    }\n\n    getCurrentHook() {\n      return this.droplab.hooks.filter(h => h.id === this.hookId)[0] || null;\n    }\n\n    itemClicked(e, getValueFunction) {\n      const { selected } = e.detail;\n\n      if (selected.tagName === 'LI' && selected.innerHTML) {\n        const dataValueSet = gl.DropdownUtils.setDataValueIfSelected(this.filter, selected);\n\n        if (!dataValueSet) {\n          const value = getValueFunction(selected);\n          gl.FilteredSearchDropdownManager.addWordToInput(this.filter, value, true);\n        }\n\n        this.resetFilters();\n        this.dismissDropdown();\n        this.dispatchInputEvent();\n      }\n    }\n\n    setAsDropdown() {\n      this.input.setAttribute(DATA_DROPDOWN_TRIGGER, `#${this.dropdown.id}`);\n    }\n\n    setOffset(offset = 0) {\n      if (window.innerWidth > 480) {\n        this.dropdown.style.left = `${offset}px`;\n      } else {\n        this.dropdown.style.left = '0px';\n      }\n    }\n\n    renderContent(forceShowList = false) {\n      const currentHook = this.getCurrentHook();\n      if (forceShowList && currentHook && currentHook.list.hidden) {\n        currentHook.list.show();\n      }\n    }\n\n    render(forceRenderContent = false, forceShowList = false) {\n      this.setAsDropdown();\n\n      const currentHook = this.getCurrentHook();\n      const firstTimeInitialized = currentHook === null;\n\n      if (firstTimeInitialized || forceRenderContent) {\n        this.renderContent(forceShowList);\n      } else if (currentHook.list.list.id !== this.dropdown.id) {\n        this.renderContent(forceShowList);\n      }\n    }\n\n    dismissDropdown() {\n      // Focusing on the input will dismiss dropdown\n      // (default droplab functionality)\n      this.input.focus();\n    }\n\n    dispatchInputEvent() {\n      // Propogate input change to FilteredSearchDropdownManager\n      // so that it can determine which dropdowns to open\n      this.input.dispatchEvent(new CustomEvent('input', {\n        bubbles: true,\n        cancelable: true,\n      }));\n    }\n\n    dispatchFormSubmitEvent() {\n      // dispatchEvent() is necessary as form.submit() does not\n      // trigger event handlers\n      this.input.form.dispatchEvent(new Event('submit'));\n    }\n\n    hideDropdown() {\n      const currentHook = this.getCurrentHook();\n      if (currentHook) {\n        currentHook.list.hide();\n      }\n    }\n\n    resetFilters() {\n      const hook = this.getCurrentHook();\n\n      if (hook) {\n        const data = hook.list.data || [];\n        const results = data.map((o) => {\n          const updated = o;\n          updated.droplab_hidden = false;\n          return updated;\n        });\n        hook.list.render(results);\n      }\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchDropdown = FilteredSearchDropdown;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_dropdown.js","(() => {\n  class FilteredSearchManager {\n    constructor(page) {\n      this.filteredSearchInput = document.querySelector('.filtered-search');\n      this.clearSearchButton = document.querySelector('.clear-search');\n      this.tokensContainer = document.querySelector('.tokens-container');\n      this.filteredSearchTokenKeys = gl.FilteredSearchTokenKeys;\n\n      if (this.filteredSearchInput) {\n        this.tokenizer = gl.FilteredSearchTokenizer;\n        this.dropdownManager = new gl.FilteredSearchDropdownManager(this.filteredSearchInput.getAttribute('data-base-endpoint') || '', page);\n\n        this.bindEvents();\n        this.loadSearchParamsFromURL();\n        this.dropdownManager.setDropdown();\n\n        this.cleanupWrapper = this.cleanup.bind(this);\n        document.addEventListener('beforeunload', this.cleanupWrapper);\n      }\n    }\n\n    cleanup() {\n      this.unbindEvents();\n      document.removeEventListener('beforeunload', this.cleanupWrapper);\n    }\n\n    bindEvents() {\n      this.handleFormSubmit = this.handleFormSubmit.bind(this);\n      this.setDropdownWrapper = this.dropdownManager.setDropdown.bind(this.dropdownManager);\n      this.toggleClearSearchButtonWrapper = this.toggleClearSearchButton.bind(this);\n      this.handleInputPlaceholderWrapper = this.handleInputPlaceholder.bind(this);\n      this.handleInputVisualTokenWrapper = this.handleInputVisualToken.bind(this);\n      this.checkForEnterWrapper = this.checkForEnter.bind(this);\n      this.clearSearchWrapper = this.clearSearch.bind(this);\n      this.checkForBackspaceWrapper = this.checkForBackspace.bind(this);\n      this.removeSelectedTokenWrapper = this.removeSelectedToken.bind(this);\n      this.unselectEditTokensWrapper = this.unselectEditTokens.bind(this);\n      this.editTokenWrapper = this.editToken.bind(this);\n      this.tokenChange = this.tokenChange.bind(this);\n      this.addInputContainerFocusWrapper = this.addInputContainerFocus.bind(this);\n      this.removeInputContainerFocusWrapper = this.removeInputContainerFocus.bind(this);\n\n      this.filteredSearchInput.form.addEventListener('submit', this.handleFormSubmit);\n      this.filteredSearchInput.addEventListener('input', this.setDropdownWrapper);\n      this.filteredSearchInput.addEventListener('input', this.toggleClearSearchButtonWrapper);\n      this.filteredSearchInput.addEventListener('input', this.handleInputPlaceholderWrapper);\n      this.filteredSearchInput.addEventListener('input', this.handleInputVisualTokenWrapper);\n      this.filteredSearchInput.addEventListener('keydown', this.checkForEnterWrapper);\n      this.filteredSearchInput.addEventListener('keyup', this.checkForBackspaceWrapper);\n      this.filteredSearchInput.addEventListener('click', this.tokenChange);\n      this.filteredSearchInput.addEventListener('keyup', this.tokenChange);\n      this.filteredSearchInput.addEventListener('focus', this.addInputContainerFocusWrapper);\n      this.tokensContainer.addEventListener('click', FilteredSearchManager.selectToken);\n      this.tokensContainer.addEventListener('dblclick', this.editTokenWrapper);\n      this.clearSearchButton.addEventListener('click', this.clearSearchWrapper);\n      document.addEventListener('click', gl.FilteredSearchVisualTokens.unselectTokens);\n      document.addEventListener('click', this.unselectEditTokensWrapper);\n      document.addEventListener('click', this.removeInputContainerFocusWrapper);\n      document.addEventListener('keydown', this.removeSelectedTokenWrapper);\n    }\n\n    unbindEvents() {\n      this.filteredSearchInput.form.removeEventListener('submit', this.handleFormSubmit);\n      this.filteredSearchInput.removeEventListener('input', this.setDropdownWrapper);\n      this.filteredSearchInput.removeEventListener('input', this.toggleClearSearchButtonWrapper);\n      this.filteredSearchInput.removeEventListener('input', this.handleInputPlaceholderWrapper);\n      this.filteredSearchInput.removeEventListener('input', this.handleInputVisualTokenWrapper);\n      this.filteredSearchInput.removeEventListener('keydown', this.checkForEnterWrapper);\n      this.filteredSearchInput.removeEventListener('keyup', this.checkForBackspaceWrapper);\n      this.filteredSearchInput.removeEventListener('click', this.tokenChange);\n      this.filteredSearchInput.removeEventListener('keyup', this.tokenChange);\n      this.filteredSearchInput.removeEventListener('focus', this.addInputContainerFocusWrapper);\n      this.tokensContainer.removeEventListener('click', FilteredSearchManager.selectToken);\n      this.tokensContainer.removeEventListener('dblclick', this.editTokenWrapper);\n      this.clearSearchButton.removeEventListener('click', this.clearSearchWrapper);\n      document.removeEventListener('click', gl.FilteredSearchVisualTokens.unselectTokens);\n      document.removeEventListener('click', this.unselectEditTokensWrapper);\n      document.removeEventListener('click', this.removeInputContainerFocusWrapper);\n      document.removeEventListener('keydown', this.removeSelectedTokenWrapper);\n    }\n\n    checkForBackspace(e) {\n      // 8 = Backspace Key\n      // 46 = Delete Key\n      if (e.keyCode === 8 || e.keyCode === 46) {\n        const { lastVisualToken } = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n        if (this.filteredSearchInput.value === '' && lastVisualToken) {\n          this.filteredSearchInput.value = gl.FilteredSearchVisualTokens.getLastTokenPartial();\n          gl.FilteredSearchVisualTokens.removeLastTokenPartial();\n        }\n\n        // Reposition dropdown so that it is aligned with cursor\n        this.dropdownManager.updateCurrentDropdownOffset();\n      }\n    }\n\n    checkForEnter(e) {\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        const selectionStart = this.filteredSearchInput.selectionStart;\n\n        e.preventDefault();\n        this.filteredSearchInput.setSelectionRange(selectionStart, selectionStart);\n      }\n\n      if (e.keyCode === 13) {\n        const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n        const dropdownEl = dropdown.element;\n        const activeElements = dropdownEl.querySelectorAll('.dropdown-active');\n\n        e.preventDefault();\n\n        if (!activeElements.length) {\n          // Prevent droplab from opening dropdown\n          this.dropdownManager.destroyDroplab();\n\n          this.search();\n        }\n      }\n    }\n\n    addInputContainerFocus() {\n      const inputContainer = this.filteredSearchInput.closest('.filtered-search-input-container');\n\n      if (inputContainer) {\n        inputContainer.classList.add('focus');\n      }\n    }\n\n    removeInputContainerFocus(e) {\n      const inputContainer = this.filteredSearchInput.closest('.filtered-search-input-container');\n      const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n      const isElementInDynamicFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n      const isElementInStaticFilterDropdown = e.target.closest('ul[data-dropdown]') !== null;\n\n      if (!isElementInFilteredSearch && !isElementInDynamicFilterDropdown &&\n        !isElementInStaticFilterDropdown && inputContainer) {\n        inputContainer.classList.remove('focus');\n      }\n    }\n\n    static selectToken(e) {\n      const button = e.target.closest('.selectable');\n\n      if (button) {\n        e.preventDefault();\n        e.stopPropagation();\n        gl.FilteredSearchVisualTokens.selectToken(button);\n      }\n    }\n\n    unselectEditTokens(e) {\n      const inputContainer = document.querySelector('.filtered-search-input-container');\n      const isElementInFilteredSearch = inputContainer && inputContainer.contains(e.target);\n      const isElementInFilterDropdown = e.target.closest('.filter-dropdown') !== null;\n      const isElementTokensContainer = e.target.classList.contains('tokens-container');\n\n      if ((!isElementInFilteredSearch && !isElementInFilterDropdown) || isElementTokensContainer) {\n        gl.FilteredSearchVisualTokens.moveInputToTheRight();\n        this.dropdownManager.resetDropdowns();\n      }\n    }\n\n    editToken(e) {\n      const token = e.target.closest('.js-visual-token');\n\n      if (token) {\n        gl.FilteredSearchVisualTokens.editToken(token);\n        this.tokenChange();\n      }\n    }\n\n    toggleClearSearchButton() {\n      const query = gl.DropdownUtils.getSearchQuery();\n      const hidden = 'hidden';\n      const hasHidden = this.clearSearchButton.classList.contains(hidden);\n\n      if (query.length === 0 && !hasHidden) {\n        this.clearSearchButton.classList.add(hidden);\n      } else if (query.length && hasHidden) {\n        this.clearSearchButton.classList.remove(hidden);\n      }\n    }\n\n    handleInputPlaceholder() {\n      const query = gl.DropdownUtils.getSearchQuery();\n      const placeholder = 'Search or filter results...';\n      const currentPlaceholder = this.filteredSearchInput.placeholder;\n\n      if (query.length === 0 && currentPlaceholder !== placeholder) {\n        this.filteredSearchInput.placeholder = placeholder;\n      } else if (query.length > 0 && currentPlaceholder !== '') {\n        this.filteredSearchInput.placeholder = '';\n      }\n    }\n\n    removeSelectedToken(e) {\n      // 8 = Backspace Key\n      // 46 = Delete Key\n      if (e.keyCode === 8 || e.keyCode === 46) {\n        gl.FilteredSearchVisualTokens.removeSelectedToken();\n        this.handleInputPlaceholder();\n        this.toggleClearSearchButton();\n      }\n    }\n\n    clearSearch(e) {\n      e.preventDefault();\n\n      this.filteredSearchInput.value = '';\n\n      const removeElements = [];\n\n      [].forEach.call(this.tokensContainer.children, (t) => {\n        if (t.classList.contains('js-visual-token')) {\n          removeElements.push(t);\n        }\n      });\n\n      removeElements.forEach((el) => {\n        el.parentElement.removeChild(el);\n      });\n\n      this.clearSearchButton.classList.add('hidden');\n      this.handleInputPlaceholder();\n\n      this.dropdownManager.resetDropdowns();\n    }\n\n    handleInputVisualToken() {\n      const input = this.filteredSearchInput;\n      const { tokens, searchToken }\n        = gl.FilteredSearchTokenizer.processTokens(input.value);\n      const { isLastVisualTokenValid }\n        = gl.FilteredSearchVisualTokens.getLastVisualTokenBeforeInput();\n\n      if (isLastVisualTokenValid) {\n        tokens.forEach((t) => {\n          input.value = input.value.replace(`${t.key}:${t.symbol}${t.value}`, '');\n          gl.FilteredSearchVisualTokens.addFilterVisualToken(t.key, `${t.symbol}${t.value}`);\n        });\n\n        const fragments = searchToken.split(':');\n        if (fragments.length > 1) {\n          const inputValues = fragments[0].split(' ');\n          const tokenKey = inputValues.last();\n\n          if (inputValues.length > 1) {\n            inputValues.pop();\n            const searchTerms = inputValues.join(' ');\n\n            input.value = input.value.replace(searchTerms, '');\n            gl.FilteredSearchVisualTokens.addSearchVisualToken(searchTerms);\n          }\n\n          gl.FilteredSearchVisualTokens.addFilterVisualToken(tokenKey);\n          input.value = input.value.replace(`${tokenKey}:`, '');\n        }\n      } else {\n        // Keep listening to token until we determine that the user is done typing the token value\n        const valueCompletedRegex = /([~%@]{0,1}\".+\")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]\")(?!')(?!\")).*/g;\n\n        if (searchToken.match(valueCompletedRegex) && input.value[input.value.length - 1] === ' ') {\n          gl.FilteredSearchVisualTokens.addFilterVisualToken(searchToken);\n\n          // Trim the last space as seen in the if statement above\n          input.value = input.value.replace(searchToken, '').trim();\n        }\n      }\n    }\n\n    handleFormSubmit(e) {\n      e.preventDefault();\n      this.search();\n    }\n\n    loadSearchParamsFromURL() {\n      const params = gl.utils.getUrlParamsArray();\n      const usernameParams = this.getUsernameParams();\n      let hasFilteredSearch = false;\n\n      params.forEach((p) => {\n        const split = p.split('=');\n        const keyParam = decodeURIComponent(split[0]);\n        const value = split[1];\n\n        // Check if it matches edge conditions listed in this.filteredSearchTokenKeys\n        const condition = this.filteredSearchTokenKeys.searchByConditionUrl(p);\n\n        if (condition) {\n          hasFilteredSearch = true;\n          gl.FilteredSearchVisualTokens.addFilterVisualToken(condition.tokenKey, condition.value);\n        } else {\n          // Sanitize value since URL converts spaces into +\n          // Replace before decode so that we know what was originally + versus the encoded +\n          const sanitizedValue = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : value;\n          const match = this.filteredSearchTokenKeys.searchByKeyParam(keyParam);\n\n          if (match) {\n            const indexOf = keyParam.indexOf('_');\n            const sanitizedKey = indexOf !== -1 ? keyParam.slice(0, keyParam.indexOf('_')) : keyParam;\n            const symbol = match.symbol;\n            let quotationsToUse = '';\n\n            if (sanitizedValue.indexOf(' ') !== -1) {\n              // Prefer \", but use ' if required\n              quotationsToUse = sanitizedValue.indexOf('\"') === -1 ? '\"' : '\\'';\n            }\n\n            hasFilteredSearch = true;\n            gl.FilteredSearchVisualTokens.addFilterVisualToken(sanitizedKey, `${symbol}${quotationsToUse}${sanitizedValue}${quotationsToUse}`);\n          } else if (!match && keyParam === 'assignee_id') {\n            const id = parseInt(value, 10);\n            if (usernameParams[id]) {\n              hasFilteredSearch = true;\n              gl.FilteredSearchVisualTokens.addFilterVisualToken('assignee', `@${usernameParams[id]}`);\n            }\n          } else if (!match && keyParam === 'author_id') {\n            const id = parseInt(value, 10);\n            if (usernameParams[id]) {\n              hasFilteredSearch = true;\n              gl.FilteredSearchVisualTokens.addFilterVisualToken('author', `@${usernameParams[id]}`);\n            }\n          } else if (!match && keyParam === 'search') {\n            hasFilteredSearch = true;\n            this.filteredSearchInput.value = sanitizedValue;\n          }\n        }\n      });\n\n      if (hasFilteredSearch) {\n        this.clearSearchButton.classList.remove('hidden');\n        this.handleInputPlaceholder();\n      }\n    }\n\n    search() {\n      const paths = [];\n      const { tokens, searchToken }\n        = this.tokenizer.processTokens(gl.DropdownUtils.getSearchQuery());\n      const currentState = gl.utils.getParameterByName('state') || 'opened';\n      paths.push(`state=${currentState}`);\n\n      tokens.forEach((token) => {\n        const condition = this.filteredSearchTokenKeys\n          .searchByConditionKeyValue(token.key, token.value.toLowerCase());\n        const { param } = this.filteredSearchTokenKeys.searchByKey(token.key) || {};\n        const keyParam = param ? `${token.key}_${param}` : token.key;\n        let tokenPath = '';\n\n        if (condition) {\n          tokenPath = condition.url;\n        } else {\n          let tokenValue = token.value;\n\n          if ((tokenValue[0] === '\\'' && tokenValue[tokenValue.length - 1] === '\\'') ||\n            (tokenValue[0] === '\"' && tokenValue[tokenValue.length - 1] === '\"')) {\n            tokenValue = tokenValue.slice(1, tokenValue.length - 1);\n          }\n\n          tokenPath = `${keyParam}=${encodeURIComponent(tokenValue)}`;\n        }\n\n        paths.push(tokenPath);\n      });\n\n      if (searchToken) {\n        const sanitized = searchToken.split(' ').map(t => encodeURIComponent(t)).join('+');\n        paths.push(`search=${sanitized}`);\n      }\n\n      const parameterizedUrl = `?scope=all&utf8=%E2%9C%93&${paths.join('&')}`;\n\n      gl.utils.visitUrl(parameterizedUrl);\n    }\n\n    getUsernameParams() {\n      const usernamesById = {};\n      try {\n        const attribute = this.filteredSearchInput.getAttribute('data-username-params');\n        JSON.parse(attribute).forEach((user) => {\n          usernamesById[user.id] = user.username;\n        });\n      } catch (e) {\n        // do nothing\n      }\n      return usernamesById;\n    }\n\n    tokenChange() {\n      const dropdown = this.dropdownManager.mapping[this.dropdownManager.currentDropdown];\n\n      if (dropdown) {\n        const currentDropdownRef = dropdown.reference;\n\n        this.setDropdownWrapper();\n        currentDropdownRef.dispatchInputEvent();\n      }\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchManager = FilteredSearchManager;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_manager.js","/* global DropLab */\n\n(() => {\n  class FilteredSearchDropdownManager {\n    constructor(baseEndpoint = '', page) {\n      this.baseEndpoint = baseEndpoint.replace(/\\/$/, '');\n      this.tokenizer = gl.FilteredSearchTokenizer;\n      this.filteredSearchTokenKeys = gl.FilteredSearchTokenKeys;\n      this.filteredSearchInput = document.querySelector('.filtered-search');\n      this.page = page;\n\n      this.setupMapping();\n\n      this.cleanupWrapper = this.cleanup.bind(this);\n      document.addEventListener('beforeunload', this.cleanupWrapper);\n    }\n\n    cleanup() {\n      if (this.droplab) {\n        this.droplab.destroy();\n        this.droplab = null;\n      }\n\n      this.setupMapping();\n\n      document.removeEventListener('beforeunload', this.cleanupWrapper);\n    }\n\n    setupMapping() {\n      this.mapping = {\n        author: {\n          reference: null,\n          gl: 'DropdownUser',\n          element: document.querySelector('#js-dropdown-author'),\n        },\n        assignee: {\n          reference: null,\n          gl: 'DropdownUser',\n          element: document.querySelector('#js-dropdown-assignee'),\n        },\n        milestone: {\n          reference: null,\n          gl: 'DropdownNonUser',\n          extraArguments: [`${this.baseEndpoint}/milestones.json`, '%'],\n          element: document.querySelector('#js-dropdown-milestone'),\n        },\n        label: {\n          reference: null,\n          gl: 'DropdownNonUser',\n          extraArguments: [`${this.baseEndpoint}/labels.json`, '~'],\n          element: document.querySelector('#js-dropdown-label'),\n        },\n        hint: {\n          reference: null,\n          gl: 'DropdownHint',\n          element: document.querySelector('#js-dropdown-hint'),\n        },\n      };\n    }\n\n    static addWordToInput(tokenName, tokenValue = '', clicked = false) {\n      const input = document.querySelector('.filtered-search');\n\n      gl.FilteredSearchVisualTokens.addFilterVisualToken(tokenName, tokenValue);\n      input.value = '';\n\n      if (clicked) {\n        gl.FilteredSearchVisualTokens.moveInputToTheRight();\n      }\n    }\n\n    updateCurrentDropdownOffset() {\n      this.updateDropdownOffset(this.currentDropdown);\n    }\n\n    updateDropdownOffset(key) {\n      // Always align dropdown with the input field\n      let offset = this.filteredSearchInput.getBoundingClientRect().left - document.querySelector('.scroll-container').getBoundingClientRect().left;\n\n      const maxInputWidth = 240;\n      const currentDropdownWidth = this.mapping[key].element.clientWidth || maxInputWidth;\n\n      // Make sure offset never exceeds the input container\n      const offsetMaxWidth = document.querySelector('.scroll-container').clientWidth - currentDropdownWidth;\n      if (offsetMaxWidth < offset) {\n        offset = offsetMaxWidth;\n      }\n\n      this.mapping[key].reference.setOffset(offset);\n    }\n\n    load(key, firstLoad = false) {\n      const mappingKey = this.mapping[key];\n      const glClass = mappingKey.gl;\n      const element = mappingKey.element;\n      let forceShowList = false;\n\n      if (!mappingKey.reference) {\n        const dl = this.droplab;\n        const defaultArguments = [null, dl, element, this.filteredSearchInput, key];\n        const glArguments = defaultArguments.concat(mappingKey.extraArguments || []);\n\n        // Passing glArguments to `new gl[glClass](<arguments>)`\n        mappingKey.reference = new (Function.prototype.bind.apply(gl[glClass], glArguments))();\n      }\n\n      if (firstLoad) {\n        mappingKey.reference.init();\n      }\n\n      if (this.currentDropdown === 'hint') {\n        // Force the dropdown to show if it was clicked from the hint dropdown\n        forceShowList = true;\n      }\n\n      this.updateDropdownOffset(key);\n      mappingKey.reference.render(firstLoad, forceShowList);\n\n      this.currentDropdown = key;\n    }\n\n    loadDropdown(dropdownName = '') {\n      let firstLoad = false;\n\n      if (!this.droplab) {\n        firstLoad = true;\n        this.droplab = new DropLab();\n      }\n\n      const match = this.filteredSearchTokenKeys.searchByKey(dropdownName.toLowerCase());\n      const shouldOpenFilterDropdown = match && this.currentDropdown !== match.key\n        && this.mapping[match.key];\n      const shouldOpenHintDropdown = !match && this.currentDropdown !== 'hint';\n\n      if (shouldOpenFilterDropdown || shouldOpenHintDropdown) {\n        const key = match && match.key ? match.key : 'hint';\n        this.load(key, firstLoad);\n      }\n    }\n\n    setDropdown() {\n      const query = gl.DropdownUtils.getSearchQuery(true);\n      const { lastToken, searchToken } = this.tokenizer.processTokens(query);\n\n      if (this.currentDropdown) {\n        this.updateCurrentDropdownOffset();\n      }\n\n      if (lastToken === searchToken && lastToken !== null) {\n        // Token is not fully initialized yet because it has no value\n        // Eg. token = 'label:'\n\n        const split = lastToken.split(':');\n        const dropdownName = split[0].split(' ').last();\n        this.loadDropdown(split.length > 1 ? dropdownName : '');\n      } else if (lastToken) {\n        // Token has been initialized into an object because it has a value\n        this.loadDropdown(lastToken.key);\n      } else {\n        this.loadDropdown('hint');\n      }\n    }\n\n    resetDropdowns() {\n      // Force current dropdown to hide\n      this.mapping[this.currentDropdown].reference.hideDropdown();\n\n      // Re-Load dropdown\n      this.setDropdown();\n\n      // Reset filters for current dropdown\n      this.mapping[this.currentDropdown].reference.resetFilters();\n\n      // Reposition dropdown so that it is aligned with cursor\n      this.updateDropdownOffset(this.currentDropdown);\n    }\n\n    destroyDroplab() {\n      this.droplab.destroy();\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchDropdownManager = FilteredSearchDropdownManager;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_dropdown_manager.js","(() => {\n  const tokenKeys = [{\n    key: 'author',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n  }, {\n    key: 'assignee',\n    type: 'string',\n    param: 'username',\n    symbol: '@',\n  }, {\n    key: 'milestone',\n    type: 'string',\n    param: 'title',\n    symbol: '%',\n  }, {\n    key: 'label',\n    type: 'array',\n    param: 'name[]',\n    symbol: '~',\n  }];\n\n  const alternativeTokenKeys = [{\n    key: 'label',\n    type: 'string',\n    param: 'name',\n    symbol: '~',\n  }];\n\n  const tokenKeysWithAlternative = tokenKeys.concat(alternativeTokenKeys);\n\n  const conditions = [{\n    url: 'assignee_id=0',\n    tokenKey: 'assignee',\n    value: 'none',\n  }, {\n    url: 'milestone_title=No+Milestone',\n    tokenKey: 'milestone',\n    value: 'none',\n  }, {\n    url: 'milestone_title=%23upcoming',\n    tokenKey: 'milestone',\n    value: 'upcoming',\n  }, {\n    url: 'milestone_title=%23started',\n    tokenKey: 'milestone',\n    value: 'started',\n  }, {\n    url: 'label_name[]=No+Label',\n    tokenKey: 'label',\n    value: 'none',\n  }];\n\n  class FilteredSearchTokenKeys {\n    static get() {\n      return tokenKeys;\n    }\n\n    static getAlternatives() {\n      return alternativeTokenKeys;\n    }\n\n    static getConditions() {\n      return conditions;\n    }\n\n    static searchByKey(key) {\n      return tokenKeys.find(tokenKey => tokenKey.key === key) || null;\n    }\n\n    static searchBySymbol(symbol) {\n      return tokenKeys.find(tokenKey => tokenKey.symbol === symbol) || null;\n    }\n\n    static searchByKeyParam(keyParam) {\n      return tokenKeysWithAlternative.find((tokenKey) => {\n        let tokenKeyParam = tokenKey.key;\n\n        if (tokenKey.param) {\n          tokenKeyParam += `_${tokenKey.param}`;\n        }\n\n        return keyParam === tokenKeyParam;\n      }) || null;\n    }\n\n    static searchByConditionUrl(url) {\n      return conditions.find(condition => condition.url === url) || null;\n    }\n\n    static searchByConditionKeyValue(key, value) {\n      return conditions\n        .find(condition => condition.tokenKey === key && condition.value === value) || null;\n    }\n  }\n\n  window.gl = window.gl || {};\n  gl.FilteredSearchTokenKeys = FilteredSearchTokenKeys;\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./filtered_search/filtered_search_token_keys.js"],"sourceRoot":""}